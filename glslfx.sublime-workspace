{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"kAbsolte",
				"kAbsolute"
			],
			[
				"bez",
				"bezierPoints"
			],
			[
				"Vect",
				"Vector2f"
			],
			[
				"be",
				"bezierList"
			],
			[
				"num",
				"numBeziers"
			],
			[
				"Vec",
				"Vector2f"
			],
			[
				"numS",
				"numSegments"
			],
			[
				"bezier",
				"bezierPoints"
			],
			[
				"auto",
				"automaton"
			],
			[
				"Vectr",
				"Vector2f"
			],
			[
				"kNum",
				"kNumElements"
			],
			[
				"kNu",
				"kNumIterations"
			],
			[
				"adaptiveE",
				"adaptiveEfficiency"
			],
			[
				"kModel",
				"kModelMass"
			],
			[
				"is",
				"isDebug"
			],
			[
				"Model",
				"ModelType"
			],
			[
				"rin",
				"ringBufferBit"
			],
			[
				"ring",
				"ringBuffer"
			],
			[
				"uint",
				"uint16_t"
			],
			[
				"kMod",
				"kModelMinMass"
			],
			[
				"k",
				"kModelMinMass"
			],
			[
				"elemet",
				"elementidx"
			],
			[
				"chara",
				"character"
			],
			[
				"0x",
				"0x80000000"
			],
			[
				"bits",
				"bitsPerSymbol"
			],
			[
				"frequen",
				"frequencyTable"
			],
			[
				"print",
				"printModel"
			],
			[
				"kM",
				"kModelPrecision"
			],
			[
				"Gener",
				"GenerateNormalisedGaussianKernel1D"
			],
			[
				"m_",
				"m_Model"
			],
			[
				"bitPla",
				"bitPlanes"
			],
			[
				"message",
				"messageList"
			],
			[
				"packed",
				"packedMessageLength"
			],
			[
				"alphab",
				"alphabet"
			],
			[
				"alp",
				"alphabet"
			],
			[
				"Test",
				"TestResult"
			],
			[
				"alphabe",
				"alphabetVariance"
			],
			[
				"alph",
				"alphabetLength"
			],
			[
				"under",
				"underflowDepth"
			],
			[
				"score",
				"scores"
			],
			[
				"com",
				"computeDisagreementScore"
			],
			[
				"dis",
				"disagreementScore"
			],
			[
				"current",
				"currentElement"
			],
			[
				"compute",
				"computeMeanVariance"
			],
			[
				"issue",
				"issueDescriptions"
			],
			[
				"members",
				"memberList"
			],
			[
				"group",
				"groupIdxA"
			],
			[
				"grou",
				"groupList"
			],
			[
				"RgbTo",
				"RgbToYuv"
			],
			[
				"m_co",
				"m_colourSpaceTransform"
			],
			[
				"grey",
				"grey_lambert"
			],
			[
				"active",
				"activeCameraId"
			],
			[
				"emis",
				"emissive_lambert"
			],
			[
				"m_row",
				"m_rowDataOffset"
			],
			[
				"max",
				"m_MaxPoolSizeElements"
			],
			[
				"scene",
				"sceneContext"
			],
			[
				"ext",
				"extantRay"
			],
			[
				"inc",
				"incidentIntersection"
			],
			[
				"incid",
				"incidentRay"
			],
			[
				"gre",
				"grey_lambert"
			]
		]
	},
	"buffers":
	[
		{
			"file": "src/2d/ImageCodec.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/core/SphericalHarmonics.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "examples/shadertoy/simplex/BufferA.glsl",
			"settings":
			{
				"buffer_size": 13199,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAryIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAMCcAAAAAAAAAAAAAMCcAAAAAAAAwJwAAAAAAAK8iAAAjZGVmaW5lIGtDYXB0dXJlTW9kZSAwCgojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3IgdHJ1ZQojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3JNb2RlIDEKI2lmIGtSZXRyb01vZGUgPT0gMQogICAgI2RlZmluZSBrTGFtYmRhU2FtcGxlciAyCiNlbHNlCiAgICAjZGVmaW5lIGtMYW1iZGFTYW1wbGVyIDAKI2VuZGlmCiNkZWZpbmUga0RpZWxlY3RyaWNEaXNwZXJzaW9uIDEwLjAKCiNkZWZpbmUga01CbHVyR2FpbiAgICAgIDAuMAojZGVmaW5lIGtNYXhJdGVyYXRpb25zICA0CiNkZWZpbmUga1pvb21PcmRlciAgICAgIDMKI2RlZmluZSBrRW5kUGF1c2UgICAgICAgMC4wCiNkZWZpbmUga1NwZWVkICAgICAgICAgIDEuMAojZGVmaW5lIGtNYXhEZXB0aCAgICAgICAyCgojZGVmaW5lIGtCYWNrZ3JvdW5kQ29sb3VyIDAuCiNkZWZpbmUga0VkZ2VHYWluIDEuMCAKI2RlZmluZSBrRWRnZUVtcGhhc2lzR2FpbiAwLjAKI2RlZmluZSBrRmFjZUVtcGhhc2lzR2FpbiAwLjAKCiNkZWZpbmUga09yaWdpbkNlbGxIZWFkU3RhcnQgMC4xCiNkZWZpbmUga0N1YmVTaHJpbmsgMC42CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VJbiAwLjA1CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VPdXQgMC4yNQoKI2RlZmluZSBrU2t5bGlnaHRGbG9vciAwLgogICAgI2RlZmluZSBrU2t5bGlnaHRDZWlsIDEuMAogICAgI2RlZmluZSBrU2t5bGlnaHRHYWluQSAxLjAKICAgICNkZWZpbmUga1NreWxpZ2h0R2FpbkIgMS4wCiAgICAjZGVmaW5lIGtTa3lsaWdodEZyZXFBIDUuMAogICAgI2RlZmluZSBrU2t5bGlnaHRGcmVxQiAyMC4wCiAgICAjZGVmaW5lIGtTa3lsaWdodE5vcm1hbEEgdmVjMygxLjAsIDAuMCwgMC4wKQogICAgI2RlZmluZSBrU2t5bGlnaHROb3JtYWxCIHZlYzMoMC4wLCAtMS4wLCAwLjApCiAgICAjZGVmaW5lIGtTa3lsaWdodEhhcmRuZXNzIDUuMAogICAgI2RlZmluZSBrRW52aXJvbm1lbnRSYWRpdXMgMi4wCiNkZWZpbmUga1Rlc3RTa3lsaWdodCBmYWxzZQoKI2lmIGtDYXB0dXJlTW9kZSA9PSAxCiAgICAjZGVmaW5lIGtDYXB0dXJlVGltZURlbGF5IDEwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgKDEwLjAgLyA2MC4wKQojZWxzZQogICAgI2RlZmluZSBrQ2FwdHVyZVRpbWVEZWxheSAwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgMS4wCiNlbmRpZgoKI2lmIGtDbGlwVmlldyA9PSAwCiAgICAjZGVmaW5lIGtTdGVybm9ncmFwaGljU2NhbGUgMS4xCiAgICAjZGVmaW5lIGtWaWV3U2NhbGUgMS4KI2Vsc2UKICAgICNkZWZpbmUga1N0ZXJub2dyYXBoaWNTY2FsZSAxLjMKICAgICNkZWZpbmUga1ZpZXdTY2FsZSAwLjI1CiNlbmRpZgoKdmVjMyBTa3lsaWdodCh2ZWMzIG4pCnsKICAgIGZsb2F0IHRoZXRhQSA9IGFjb3MoZG90KG4sIG5vcm1hbGl6ZShrU2t5bGlnaHROb3JtYWxBKSkpOwogICAgZmxvYXQgdGhldGFCID0gYWNvcyhkb3Qobiwgbm9ybWFsaXplKGtTa3lsaWdodE5vcm1hbEIpKSk7ICAgIAogICAgCiAgICBmbG9hdCB2ID0gKGtTa3lsaWdodEdhaW5BICogY29zMDEoa1NreWxpZ2h0RnJlcUEgKiB0aGV0YUEpICsga1NreWxpZ2h0R2FpbkIgKiBzaW4wMShrU2t5bGlnaHRGcmVxQiAqIHRoZXRhQikpIC8gKGtTa3lsaWdodEdhaW5BICsga1NreWxpZ2h0R2FpbkIpOwogICAgCiAgICByZXR1cm4gdmVjMyhtaXgoa1NreWxpZ2h0Rmxvb3IsIGtTa3lsaWdodENlaWwsIHBvdyhzYXR1cmF0ZSh2ICoga1NreWxpZ2h0SGFyZG5lc3MgLSAoMC41ICogKGtTa3lsaWdodEhhcmRuZXNzIC0gMS4wKSkpLCAxLjApKSk7Cn0KCnZlYzMgU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUoUmF5QmFzaWMgcmF5LCB2ZWMzIHRpbWUpCnsKICAgIGZsb2F0IGEgPSBkb3QocmF5LmQsIHJheS5kKTsKICAgIGZsb2F0IGIgPSAyLjAgKiBkb3QocmF5LmQsIHJheS5vKTsKICAgIGZsb2F0IGMgPSBkb3QocmF5Lm8sIHJheS5vKSAtIHNxcihrRW52aXJvbm1lbnRSYWRpdXMpOwoKICAgIGZsb2F0IHQwLCB0MTsKICAgIGlmICghUXVhZHJhdGljU29sdmUoYSwgYiwgYywgdDAsIHQxKSkgeyByZXR1cm4ga1plcm87IH0KCiAgICB2ZWMzIG4gPSBub3JtYWxpemUocmF5Lm8gKyByYXkuZCAqICgodDAgPiAwLjApID8gdDAgOiB0MSkpOwogICAgCiAgICByZXR1cm4gU2t5bGlnaHQobik7Cn0KCnZvaWQgU2FtcGxlUGVyZmVjdFNwZWN1bGFyKGlub3V0IFJheSByYXksIGluIEhpdEN0eCBoaXQpCnsKICAgIHZlYzMgciA9IHJlZmxlY3QocmF5Lm9kLmQsIGhpdC5uKTsKICAgIAogICAgcmF5Lm9kLm8gPSByYXkub2QubyArIHJheS5vZC5kICogcmF5LnROZWFyICsgaGl0Lm4gKiBoaXQua2lja29mZjsKICAgIHJheS5vZC5kID0gcjsgIAp9CgoKZmxvYXQgQ2F1Y2h5UERGKGZsb2F0IHgsIGZsb2F0IEQpCnsKICAgIHJldHVybiAxLjAgLyAoa1BpICogRCAqICgxLjAgKyBzcXIoeCAvIEQpKSk7Cn0KCmZsb2F0IENhdWNoeUNERihmbG9hdCB4LCBmbG9hdCBEKQp7CiAgICByZXR1cm4ga0ludlBpICogYXRhbih4IC8gRCkgKyAwLjU7Cn0KCnZvaWQgRXF1aWFuZ3VsYXJTYW1wbGUoaW4gZmxvYXQgTDAsIGluIGZsb2F0IEwxLCBpbiBmbG9hdCBELCBpbiBmbG9hdCB4aSwgb3V0IGZsb2F0IHRFcXVpLCBvdXQgZmxvYXQgcGRmKQp7CiAgICBmbG9hdCBjZGYwID0gQ2F1Y2h5Q0RGKEwwLCBEKTsKICAgIGZsb2F0IGNkZjEgPSBDYXVjaHlDREYoTDEsIEQpOwogICAgdEVxdWkgPSB0YW4oKG1peChjZGYwLCBjZGYxLCB4aSkgLSAwLjUpICoga1BpKSAqIEQ7CiAgICAgICAgCiAgICAvL3RFcXVpID0gKHggLSBMMCkgLyAoTDEgLSBMMCk7CiAgICBwZGYgPSBDYXVjaHlQREYoKHRFcXVpIC0gTDApIC8gKEwxIC0gTDApLCBEKSAvIG1heCgxZS0xMCwgY2RmMSAtIGNkZjApOwp9Cgpib29sIFRyYWNlV2F2ZWZyb250KGlub3V0IFJheSByYXksIG91dCB2ZWM0IEwsIHZlYzMgdGltZSwgaW50IGRlcHRoLCBpbnQgc2FtcGxlSWR4KQp7ICAgCiAgICAvKmlmKGRlcHRoID09IGtNYXhEZXB0aCkKICAgIHsKICAgICAgICBMLnh5eiArPSBTYW1wbGVFbnZpcm9ubWVudFNwaGVyZShyYXkub2QsIHRpbWUpICogcmF5LndlaWdodDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9ICovICAgCiAgIAogICAgZmxvYXQgcGhpID0gc2luMDEoa1R3b1BpICogKGZsb29yKHRpbWUueCkgKyBQYWRkZWRTbW9vdGhTdGVwKHRpbWUueiwgMC4wLCAxLjApKSAvIGZsb2F0KGtOdW1JbnRlcnZhbHMpKTsKICAgIGZsb2F0IHRoZXRhID0ga1BpICogdGltZS55OwogICAgZmxvYXQgYWxwaGEgPSBLaWNrRHJvcCh0aW1lLngsIHZlYzIoNy4wLCAxLjApLCB2ZWMyKDcuNSwgMC4wKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMigxMS4wLCAwLjApLCB2ZWMyKDExLjUsIDEuMCkpOwogICAgLy9mbG9hdCBqaXR0ZXIgPSBhbHBoYSAqIDAuOCAqICgxLjAgKyAwLjIgKiBzaW4odGltZS54ICogMjAuMCkpOwogICAgCiAgICBpbnQgbWF0SUQgPSAtMTsKICAgIFRyYW5zZm9ybSB0cmFuc2Zvcm07CiAgICBIaXRDdHggaGl0OwogICAgcmF5LnROZWFyID0ga0ZsdE1heDsKICAgIAogICAgdHJhbnNmb3JtID0gQ29tcG91bmRUcmFuc2Zvcm0odmVjMygwLjApLCB2ZWMzKDAuMCwgdGhldGEsIGtIYWxmUGkpLCAxLjApOwogICAgaWYoUmF5U2ltcGxleFNERihyYXksIGhpdCwgdHJhbnNmb3JtLCBtaXgoMS4wLCAxLjUsIHBoaSksIGludCh0aW1lLngpLCB0aW1lLnopKSB7IG1hdElEID0gMDsgfSAgICAgICAgICAKICAgICAgICAKICAgIC8qdHJhbnNmb3JtID0gQ29tcG91bmRUcmFuc2Zvcm0odmVjMygwLjApLCB2ZWMzKDAuMCwgdGhldGEsIGtIYWxmUGkpLCAwLjgpOwogICAgaWYoUmF5U2ltcGxleFNERihyYXksIGhpdCwgdHJhbnNmb3JtLCAwLjAsIDcsIDAuMCkpIHsgbWF0SUQgPSAxOyB9Ki8KICAgCiAgICAvL0wueHl6ICs9IHJheS5uOyByZXR1cm4gTnVsbFJheSgpOwogICAgCiAgICBpZigocmF5LmZsYWdzICYga0ZsYWdzRGlyZWN0UmF5KSAhPSAwdSkKICAgIHsKICAgICAgICBpZihtYXRJRCAhPSAwIHx8IHNxcihyYXkudE5lYXIpID4gbGVuZ3RoMihyYXkub2QubykpCiAgICAgICAgewogICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAgICAgCiAgICAjZGVmaW5lIGtBYnNvcnB0aW9uIDEuMAogICAgLy9pZihzYW1wbGVJZHggPCA4KQogICAgewogICAgICAgIGZsb2F0IHhpID0gKGZsb2F0KHNhbXBsZUlkeCkgKyBSYW5kKGlDaGFubmVsMCkueCkgLyBmbG9hdChrQW50aUFsaWFzKmtBbnRpQWxpYXMpOwogICAgICAgIC8vZmxvYXQgdFZvbHVtZSA9IC1sb2coKDEuMCAtIHhpLngpIC8ga0Fic29ycHRpb24pIC8ga0Fic29ycHRpb247CiAgICAgICAgZmxvYXQgdFBlcnAgPSBtYXgoMC4wLCAtZG90KHJheS5vZC5vLCByYXkub2QuZCkpOwogICAgICAgIGZsb2F0IHRWb2x1bWUsIHBkZkNhdWNoeTsKICAgICAgICBmbG9hdCB0RGVwdGggPSAobWF0SUQgPT0gLTEpID8gNS4wIDogcmF5LnROZWFyOwogICAgICAgIGZsb2F0IEQgPSBtYXgoMC4xLCBsZW5ndGgoUmF5UG9pbnRBdChyYXksIHRQZXJwKSkpOwogICAgICAgIEVxdWlhbmd1bGFyU2FtcGxlKC10UGVycCwgdERlcHRoIC0gdFBlcnAsIEQsIHhpLCB0Vm9sdW1lLCBwZGZDYXVjaHkpOyAgICAgICAgCiAgICAgICAgIAogICAgICAgIHRWb2x1bWUgKz0gdFBlcnA7CiAgICAgICAKICAgICAgICAgICAgcmF5Lm9kLm8gPSByYXkub2QubyArIHJheS5vZC5kICogdFZvbHVtZTsKICAgICAgICAgICAgLy9yYXkub2QuZCA9IFNhbXBsZVVuaXRTcGhlcmUoeGkueXopOwogICAgICAgICAgICBmbG9hdCBkaXN0ID0gbGVuZ3RoKHJheS5vZC5vKTsKICAgICAgICAgICAgcmF5Lm9kLmQgPSAtcmF5Lm9kLm8gLyBkaXN0OwogICAgICAgICAgICByYXkuZmxhZ3MgPSBrRmxhZ3NEaXJlY3RSYXk7CiAgICAgICAgICAgIHJheS53ZWlnaHQgKj0gKDIyLjAgLyBzcXIoZGlzdCkpICogZXhwKC10Vm9sdW1lICoga0Fic29ycHRpb24pIC8gcGRmQ2F1Y2h5OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAKICAgIH0KICAgIAogICAgaWYobWF0SUQgPT0gLTEpCiAgICB7CiAgICAgICAgaWYoZGVwdGggIT0gMSl7IEwueHl6ICs9IFNhbXBsZUVudmlyb25tZW50U3BoZXJlKHJheS5vZCwgdGltZSkgKiByYXkud2VpZ2h0OyB9CiAgICAgICAgZWxzZSB7IEwueHl6ICs9IGtPbmUgKiBrQmFja2dyb3VuZENvbG91cjsgfQogICAgICAgIHJldHVybiBmYWxzZTsgCiAgICB9CiAgICAKICAgIHJheS53ZWlnaHQgKj0gZXhwKC1yYXkudE5lYXIgKiBrQWJzb3JwdGlvbik7CiAgICAKICAgIHJheS53ZWlnaHQgKj0gYWxwaGE7CiAgICBMLnh5eiArPSBzcXIoZG90KC1ub3JtYWxpemUocmF5Lm9kLmQpLCBoaXQubikpICogKDEuMCAtIGFscGhhKSAqIDAuMjsgCiAgICBpZihhbHBoYSA9PSAwLjApIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAKICAgIHN3aXRjaChtYXRJRCkKICAgIHsKICAgIGNhc2UgMDoKICAgICAgICBTYW1wbGVQZXJmZWN0U3BlY3VsYXIocmF5LCBoaXQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgY2FzZSAxOiAgCiAgICAgICAgTC54eXogKz0gcmF5LndlaWdodCAqIDEuNTsKICAgIH0KICAgIAogICAgcmV0dXJuIGZhbHNlOwogICAgCn0KCnZlYzQgVHJhY2VQYXRoKHZlYzIgdXZTY3JlZW4sIGludCBzYW1wbGVJZHgsIGludCBtYXhTYW1wbGVzKQp7CiAgICAvLyBTYW1wbGUgdGhlIHNwZWN0cnVtCiAgICBmbG9hdCB4aSA9IChmbG9hdChzYW1wbGVJZHgpICsgUmFuZChpQ2hhbm5lbDApLngpIC8gZmxvYXQobWF4U2FtcGxlcyk7ICAgIAogICAgZmxvYXQgbGFtYmRhID0gbWl4KDM4MDAuMCwgNzAwMC4wLCB4aSk7CiAgICAKICAgIC8vIENvbmZpZ3VyZSB0aGUgdGltZQogICAgdmVjMyB0aW1lOwogICAgdGltZS54ID0gbWF4KDAuMCwgaVRpbWUgLSBrQ2FwdHVyZVRpbWVEZWxheSk7ICAgIAogICAgZmxvYXQgdGltZVN1YlNhbXBsZSA9IDEuMCAvIDYwLjAgKiB4aSAqIGtNQmx1ckdhaW47CiAgICB0aW1lLnggPSBtb2QoKHRpbWUueCAqIGtDYXB0dXJlVGltZVNwZWVkICsgdGltZVN1YlNhbXBsZSkgKiBrU3BlZWQsIGZsb2F0KGtOdW1JbnRlcnZhbHMpKTsKICAgIHRpbWUueSA9IHRpbWUueCAvIGZsb2F0KGtOdW1JbnRlcnZhbHMpOwogICAgdGltZS56ID0gZnJhY3QodGltZS54KTsgIAogICAgCiAgICB2ZWMyIHV2VmlldyA9IFRyYW5zZm9ybVNjcmVlblRvV29ybGQodXZTY3JlZW4pOwogICAgCiAgICBpZighSW52ZXJzZVN0ZXJub2dyYXBoKHV2Vmlldywga1N0ZXJub2dyYXBoaWNTY2FsZSkpIHsgcmV0dXJuIHZlYzQoMC4wKTsgfSAKICAgIAogICAgLy8gQ3JlYXRlIGEgbmV3IGNhbWVyYSByYXkgYW5kIHN0b3JlIHRoZSBzYW1wbGVkIHdhdmVsZW5ndGggKHdlIHJldXNlIHRoZSBzYW1lIHJheSBhdCBlYWNoIGJvdW5jZSkgICAKICAgIFJheSBjYW1lcmFSYXkgPSBDcmVhdGVPcnRob2dyYXBoaWNDYW1lcmFSYXkodXZWaWV3LCB2ZWMyKDEuNzMyMDUwOCkgKiAxLjUsIHZlYzMoMy4wKSwgdmVjMygwLjApKTsgICAKICAgIC8vY2FtZXJhUmF5LmxhbWJkYSA9IGxhbWJkYTsKICAgIAogICAgLy8gSW50ZXJhdGl2ZWx5IHNhbXBsZSB0aGUgcGF0aAogICAgdmVjNCBMID0gdmVjNCgwLjApOwogICAgZm9yKGludCBkZXB0aCA9IDA7IGRlcHRoIDwga01heERlcHRoOyBkZXB0aCsrKQogICAgewogICAgICAgIC8vIFBhc3NpbmcgUmF5IHN0cnVjdHVyZXMgYnkgcmVmZXJlbmNlIGJyZWFrcyB0aGUgc2hhZGVyIG9uIE1hY3MuIFRoaXMgZXhwbGFpbnMKICAgICAgICAvLyB0aGUgY2x1bmt5IGFwcHJvYWNoIHRvIHJldHVybmluZyBleHRhbnQgcmF5cyBieSB2YWx1ZS4KICAgICAgICBpZighVHJhY2VXYXZlZnJvbnQoY2FtZXJhUmF5LCBMLCB0aW1lLCBkZXB0aCArIDEsIHNhbXBsZUlkeCkpCiAgICAgICAgeyAgICAgICAgCiAgICAgICAgICAgaWYoZGVwdGggPT0gMCkgeyByZXR1cm4gTDsgfQogICAgICAgICAgICBicmVhazsgCiAgICAgICAgfQogICAgfQogICAgICAKICAgIGlmKGtTcGVjdHJhbEludGVncmF0b3IpCiAgICB7ICAKICAgICAgICAvL0wueHl6ICo9IFNhbXBsZVNwZWN0cnVtKGxhbWJkYSk7CiAgICB9CiAgIAogICAgcmV0dXJuIEw7Cn0KCnZvaWQgbWFpbkltYWdlKCBvdXQgdmVjNCByZ2JhLCBpbiB2ZWMyIHh5ICkKeyAgICAKICAgIGlmKGtUZXN0U2t5bGlnaHQpCiAgICB7CiAgICAgICAgdmVjMyBuID0gdmVjMyhjb3Moa1R3b1BpICogeHkueCAvIGlSZXNvbHV0aW9uLngpICogc2luKGtQaSAqIHh5LnkgLyBpUmVzb2x1dGlvbi55KSwgCiAgICAgICAgICAgICAgICAgICAgICBzaW4oa1R3b1BpICogeHkueCAvIGlSZXNvbHV0aW9uLngpICogc2luKGtQaSAqIHh5LnkgLyBpUmVzb2x1dGlvbi55KSwgCiAgICAgICAgICAgICAgICAgICAgICBjb3Moa1BpICogeHkueSAvIGlSZXNvbHV0aW9uLnkpKTsKICAgICAgICByZ2JhLnh5eiA9IFNreWxpZ2h0KG4pOwogICAgICAgIHJnYmEudyA9IDEuMDsKICAgICAgICByZXR1cm47CiAgICB9CiAgIAogICAgaWYoeHkueCA+IGlSZXNvbHV0aW9uLnggLyBmbG9hdChrU2NyZWVuRG93bnNhbXBsZSkgfHwgeHkueSA+IGlSZXNvbHV0aW9uLnkgLyBmbG9hdChrU2NyZWVuRG93bnNhbXBsZSkpIHsgcmV0dXJuOyB9CiAgICAKICAgIFNldEdsb2JhbHMoeHksIGlSZXNvbHV0aW9uLnh5KTsKICAgIAogICAgaWYoIUlzVGV4ZWxJbkNsaXBSZWdpb24oeHkpKSB7IHJldHVybjsgfQogICAgICAgIAogICAgeHkgKj0gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpOwogICAgCiAgICAjZGVmaW5lIGtOdW1TYW1wbGVzIChrQW50aUFsaWFzKmtBbnRpQWxpYXMpCiAgICB2ZWM0IHJnYmkgPSB2ZWM0KDAuMCk7CiAgICBmb3IoaW50IGkgPSAwLCBpZHggPSAwOyBpIDwga0FudGlBbGlhczsgKytpKQogICAgewogICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBrQW50aUFsaWFzOyArK2osICsraWR4KQogICAgICAgIHsKICAgICAgICAgICAgUENHSW5pdGlhbGlzZShIYXNoT2YodWludChpZHgpLCB1aW50KGlGcmFtZSkpKTsKICAgICAgICAgICAgdmVjMiB4eUFBID0geHkgKyB2ZWMyKGZsb2F0KGkpIC8gZmxvYXQoa0FudGlBbGlhcyksIGZsb2F0KGopIC8gZmxvYXQoa0FudGlBbGlhcykpOwogICAgICAgICAgICAKICAgICAgICAgICAgcmdiaSArPSBUcmFjZVBhdGgoeHlBQSwgaWR4LCBrTnVtU2FtcGxlcyk7CiAgICAgICAgfQogICAgfQogICAgCiAgICByZ2JpIC89IGZsb2F0KGtOdW1TYW1wbGVzKTsKICAgIHZlYzMgcmdiID0gKHJnYmkueHl6KTsKICAgIC8vcmdiID0gbWl4KHJnYiwga09uZSAtIHJnYiwgcmdiaS53KTsKICAgIAogICAgI2RlZmluZSBrQ29sb3VyUXVhbnRpc2F0aW9uIDQKICAgIC8qcmdiICo9IGZsb2F0KGtDb2xvdXJRdWFudGlzYXRpb24pOwogICAgaWYoZnJhY3QocmdiLngpID4gT3JkZXJlZERpdGhlcigpKSByZ2IueCArPSAxLjA7CiAgICBpZihmcmFjdChyZ2IueSkgPiBPcmRlcmVkRGl0aGVyKCkpIHJnYi55ICs9IDEuMDsKICAgIGlmKGZyYWN0KHJnYi56KSA+IE9yZGVyZWREaXRoZXIoKSkgcmdiLnogKz0gMS4wOwogICAgcmdiID0gZmxvb3IocmdiKSAvIGZsb2F0KGtDb2xvdXJRdWFudGlzYXRpb24pOyovCiAgICAKICAgIC8vIEdyYWRlCiAgICB2ZWMzIGhzdiA9IFJHQlRvSFNWKHJnYik7ICAgIAogICAgaHN2LnggKz0gLXNpbigoaHN2LnggKyAwLjA1KSAqIGtUd29QaSkgKiAwLjA3OwogICAgaHN2LnkgKj0gMS4wOyAgICAKICAgIHJnYiA9IEhTVlRvUkdCKGhzdik7CiAgICAKICAgIHJnYiArPSAwLjEgKiBmbG9hdCgoaW50KHh5LnkpIC8ga1NjcmVlbkRvd25zYW1wbGUpICYgMSk7CiAgICAvL3JnYiArPSAwLjE7CiAgICAKICAgIHJnYmEgPSB2ZWM0KHJnYiwgMS4wKTsKfQ",
					"AQAAAAAAAAABAAAAAAAAAAAAAACvIgAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAVCgAAAAAAAAAAAAAVCgAAAAAAABUKAAAAAAAADAnAAAjZGVmaW5lIGtDYXB0dXJlTW9kZSAwCgojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3IgdHJ1ZQojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3JNb2RlIDEKI2lmIGtSZXRyb01vZGUgPT0gMQogICAgI2RlZmluZSBrTGFtYmRhU2FtcGxlciAyCiNlbHNlCiAgICAjZGVmaW5lIGtMYW1iZGFTYW1wbGVyIDAKI2VuZGlmCiNkZWZpbmUga0RpZWxlY3RyaWNEaXNwZXJzaW9uIDEwLjAKCiNkZWZpbmUga01CbHVyR2FpbiAgICAgIDcuMAojZGVmaW5lIGtNYXhJdGVyYXRpb25zICA0CiNkZWZpbmUga1pvb21PcmRlciAgICAgIDMKI2RlZmluZSBrRW5kUGF1c2UgICAgICAgMC4wCiNkZWZpbmUga1NwZWVkICAgICAgICAgIDEuMAojZGVmaW5lIGtNYXhEZXB0aCAgICAgICAyCgojZGVmaW5lIGtCYWNrZ3JvdW5kQ29sb3VyIDAuCiNkZWZpbmUga0VkZ2VHYWluIDEuMCAKI2RlZmluZSBrRWRnZUVtcGhhc2lzR2FpbiAwLjAKI2RlZmluZSBrRmFjZUVtcGhhc2lzR2FpbiAwLjAKCiNkZWZpbmUga09yaWdpbkNlbGxIZWFkU3RhcnQgMC4xCiNkZWZpbmUga0N1YmVTaHJpbmsgMC42CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VJbiAwLjA1CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VPdXQgMC4yNQoKI2RlZmluZSBrU2t5bGlnaHRGbG9vciAwLgogICAgI2RlZmluZSBrU2t5bGlnaHRDZWlsIDEuMAogICAgI2RlZmluZSBrU2t5bGlnaHRHYWluQSAxLjAKICAgICNkZWZpbmUga1NreWxpZ2h0R2FpbkIgMS4wCiAgICAjZGVmaW5lIGtTa3lsaWdodEZyZXFBIDUuMAogICAgI2RlZmluZSBrU2t5bGlnaHRGcmVxQiAyMC4wCiAgICAjZGVmaW5lIGtTa3lsaWdodE5vcm1hbEEgdmVjMygxLjAsIDAuMCwgMC4wKQogICAgI2RlZmluZSBrU2t5bGlnaHROb3JtYWxCIHZlYzMoMC4wLCAtMS4wLCAwLjApCiAgICAjZGVmaW5lIGtTa3lsaWdodEhhcmRuZXNzIDUuMAogICAgI2RlZmluZSBrRW52aXJvbm1lbnRSYWRpdXMgMi4wCiNkZWZpbmUga1Rlc3RTa3lsaWdodCBmYWxzZQoKI2lmIGtDYXB0dXJlTW9kZSA9PSAxCiAgICAjZGVmaW5lIGtDYXB0dXJlVGltZURlbGF5IDEwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgKDEwLjAgLyA2MC4wKQojZWxzZQogICAgI2RlZmluZSBrQ2FwdHVyZVRpbWVEZWxheSAwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgMS4wCiNlbmRpZgoKI2lmIGtDbGlwVmlldyA9PSAwCiAgICAjZGVmaW5lIGtTdGVybm9ncmFwaGljU2NhbGUgMS4xCiAgICAjZGVmaW5lIGtWaWV3U2NhbGUgMS4KI2Vsc2UKICAgICNkZWZpbmUga1N0ZXJub2dyYXBoaWNTY2FsZSAxLjMKICAgICNkZWZpbmUga1ZpZXdTY2FsZSAwLjI1CiNlbmRpZgoKdmVjMyBTa3lsaWdodCh2ZWMzIG4pCnsKICAgIGZsb2F0IHRoZXRhQSA9IGFjb3MoZG90KG4sIG5vcm1hbGl6ZShrU2t5bGlnaHROb3JtYWxBKSkpOwogICAgZmxvYXQgdGhldGFCID0gYWNvcyhkb3Qobiwgbm9ybWFsaXplKGtTa3lsaWdodE5vcm1hbEIpKSk7ICAgIAogICAgCiAgICBmbG9hdCB2ID0gKGtTa3lsaWdodEdhaW5BICogY29zMDEoa1NreWxpZ2h0RnJlcUEgKiB0aGV0YUEpICsga1NreWxpZ2h0R2FpbkIgKiBzaW4wMShrU2t5bGlnaHRGcmVxQiAqIHRoZXRhQikpIC8gKGtTa3lsaWdodEdhaW5BICsga1NreWxpZ2h0R2FpbkIpOwogICAgCiAgICByZXR1cm4gdmVjMyhtaXgoa1NreWxpZ2h0Rmxvb3IsIGtTa3lsaWdodENlaWwsIHBvdyhzYXR1cmF0ZSh2ICoga1NreWxpZ2h0SGFyZG5lc3MgLSAoMC41ICogKGtTa3lsaWdodEhhcmRuZXNzIC0gMS4wKSkpLCAxLjApKSk7Cn0KCnZlYzMgU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUoUmF5QmFzaWMgcmF5LCB2ZWMzIHRpbWUpCnsKICAgIGZsb2F0IGEgPSBkb3QocmF5LmQsIHJheS5kKTsKICAgIGZsb2F0IGIgPSAyLjAgKiBkb3QocmF5LmQsIHJheS5vKTsKICAgIGZsb2F0IGMgPSBkb3QocmF5Lm8sIHJheS5vKSAtIHNxcihrRW52aXJvbm1lbnRSYWRpdXMpOwoKICAgIGZsb2F0IHQwLCB0MTsKICAgIGlmICghUXVhZHJhdGljU29sdmUoYSwgYiwgYywgdDAsIHQxKSkgeyByZXR1cm4ga1plcm87IH0KCiAgICB2ZWMzIG4gPSBub3JtYWxpemUocmF5Lm8gKyByYXkuZCAqICgodDAgPiAwLjApID8gdDAgOiB0MSkpOwogICAgCiAgICByZXR1cm4gU2t5bGlnaHQobik7Cn0KCnZvaWQgU2FtcGxlUGVyZmVjdFNwZWN1bGFyKGlub3V0IFJheSByYXksIGluIEhpdEN0eCBoaXQpCnsKICAgIHZlYzMgciA9IHJlZmxlY3QocmF5Lm9kLmQsIGhpdC5uKTsKICAgIAogICAgcmF5Lm9kLm8gPSByYXkub2QubyArIHJheS5vZC5kICogcmF5LnROZWFyICsgaGl0Lm4gKiBoaXQua2lja29mZjsKICAgIHJheS5vZC5kID0gcjsgIAp9CgoKZmxvYXQgQ2F1Y2h5UERGKGZsb2F0IHgsIGZsb2F0IEQpCnsKICAgIHJldHVybiAxLjAgLyAoa1BpICogRCAqICgxLjAgKyBzcXIoeCAvIEQpKSk7Cn0KCmZsb2F0IENhdWNoeUNERihmbG9hdCB4LCBmbG9hdCBEKQp7CiAgICByZXR1cm4ga0ludlBpICogYXRhbih4IC8gRCkgKyAwLjU7Cn0KCnZvaWQgRXF1aWFuZ3VsYXJTYW1wbGUoaW4gZmxvYXQgTDAsIGluIGZsb2F0IEwxLCBpbiBmbG9hdCBELCBpbiBmbG9hdCB4aSwgb3V0IGZsb2F0IHRFcXVpLCBvdXQgZmxvYXQgcGRmKQp7CiAgICBmbG9hdCBjZGYwID0gQ2F1Y2h5Q0RGKEwwLCBEKTsKICAgIGZsb2F0IGNkZjEgPSBDYXVjaHlDREYoTDEsIEQpOwogICAgdEVxdWkgPSB0YW4oKG1peChjZGYwLCBjZGYxLCB4aSkgLSAwLjUpICoga1BpKSAqIEQ7CiAgICAgICAgCiAgICAvL3RFcXVpID0gKHggLSBMMCkgLyAoTDEgLSBMMCk7CiAgICBwZGYgPSBDYXVjaHlQREYoKHRFcXVpIC0gTDApIC8gKEwxIC0gTDApLCBEKSAvIG1heCgxZS0xMCwgY2RmMSAtIGNkZjApOwp9Cgpib29sIFRyYWNlV2F2ZWZyb250KGlub3V0IFJheSByYXksIG91dCB2ZWM0IEwsIHZlYzMgdGltZSwgaW50IGRlcHRoLCBpbnQgc2FtcGxlSWR4LCBpbnQgbWF4U2FtcGxlcywgYm9vbCBpc1ZvbHVtZVBhc3MpCnsgICAKICAgIC8qaWYoZGVwdGggPT0ga01heERlcHRoKQogICAgewogICAgICAgIEwueHl6ICs9IFNhbXBsZUVudmlyb25tZW50U3BoZXJlKHJheS5vZCwgdGltZSkgKiByYXkud2VpZ2h0OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gKi8gICAKICAgCiAgICBmbG9hdCBwaGkgPSBzaW4wMShrVHdvUGkgKiAoZmxvb3IodGltZS54KSArIFBhZGRlZFNtb290aFN0ZXAodGltZS56LCAwLjAsIDEuMCkpIC8gZmxvYXQoa051bUludGVydmFscykpOwogICAgZmxvYXQgdGhldGEgPSBrVHdvUGkgKiB0aW1lLnk7CiAgICBmbG9hdCBhbHBoYSA9IEtpY2tEcm9wKHRpbWUueCwgdmVjMig3LjAsIDEuMCksIHZlYzIoNy41LCAwLjApLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMyKDExLjAsIDAuMCksIHZlYzIoMTEuNSwgMS4wKSk7CiAgICAvL2Zsb2F0IGppdHRlciA9IGFscGhhICogMC44ICogKDEuMCArIDAuMiAqIHNpbih0aW1lLnggKiAyMC4wKSk7CiAgICAKICAgIGludCBtYXRJRCA9IC0xOwogICAgdmVjMiBzZGZOZWFyID0gdmVjMihrRmx0TWF4KTsKICAgIFRyYW5zZm9ybSB0cmFuc2Zvcm07CiAgICBIaXRDdHggaGl0OwogICAgcmF5LnROZWFyID0ga0ZsdE1heDsKICAgIAogICAgdHJhbnNmb3JtID0gQ29tcG91bmRUcmFuc2Zvcm0odmVjMygwLjApLCB2ZWMzKDAuMCwgdGhldGEsIGtIYWxmUGkpLCAxLjApOwogICAgaWYoUmF5U2ltcGxleFNERihyYXksIHNkZk5lYXIsIGhpdCwgdHJhbnNmb3JtLCBtaXgoMS4wLCAxLjUsIHBoaSksIGludCh0aW1lLngpLCB0aW1lLnopKSB7IG1hdElEID0gMDsgfSAgICAgICAgICAKICAgICAgICAKICAgIGlmKCFpc1ZvbHVtZVBhc3MgfHwgZGVwdGggPT0gMSkKICAgIHsKICAgICAgICB0cmFuc2Zvcm0gPSBDb21wb3VuZFRyYW5zZm9ybSh2ZWMzKDAuMCksIHZlYzMoMC4wLCB0aGV0YSwga0hhbGZQaSksIC44KTsKICAgICAgICBpZihSYXlTaW1wbGV4U0RGKHJheSwgc2RmTmVhciwgaGl0LCB0cmFuc2Zvcm0sIDAuMCwgaW50KHRpbWUueCksIHRpbWUueikpIHsgbWF0SUQgPSAxOyB9CiAgICB9CiAgIAogICAgLy9MLnh5eiArPSBoaXQubjsgcmV0dXJuIGZhbHNlOwogICAgCiAgICAjZGVmaW5lIGtFeHRpbmN0aW9uIDAuMQogICAgaWYoaXNWb2x1bWVQYXNzKQogICAgewogICAgICAgIGlmKChyYXkuZmxhZ3MgJiBrRmxhZ3NEaXJlY3RSYXkpICE9IDB1KQogICAgICAgIHsKICAgICAgICAgICAgZmxvYXQgZGlzdFRvTGlnaHQgPSBsZW5ndGgyKHJheS5vZC5vKTsKICAgICAgICAgICAgaWYobWF0SUQgIT0gLTEgJiYgc3FyKHJheS50TmVhcikgPCBkaXN0VG9MaWdodCkgeyByZXR1cm4gZmFsc2U7IH0gCiAgICAgICAgICAgIAogICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0OyByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICBpZihzcXIoc2RmTmVhci55KSA+IGRpc3RUb0xpZ2h0KQogICAgICAgICAgICAgICAgTC54eXogKz0gcmF5LndlaWdodDsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgTC54eXogKz0gcmF5LndlaWdodCAqIG1pbigxLjAsIDIuMCAqIHNxcnQoYWJzKHNkZk5lYXIueCkgLyBzZGZOZWFyLnkpKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZsb2F0IHhpID0gKGZsb2F0KHNhbXBsZUlkeCkgKyBSYW5kKGlDaGFubmVsMCkueCkgLyBmbG9hdChtYXhTYW1wbGVzKTsKICAgICAgICBmbG9hdCB0UGVycCA9IG1heCgwLjAsIC1kb3QocmF5Lm9kLm8sIHJheS5vZC5kKSk7CiAgICAgICAgZmxvYXQgdFZvbHVtZSwgcGRmQ2F1Y2h5OwogICAgICAgIGZsb2F0IHREZXB0aCA9IChtYXRJRCA9PSAtMSkgPyA1LjAgOiByYXkudE5lYXI7CiAgICAgICAgZmxvYXQgRCA9IG1heCgwLjEsIGxlbmd0aChSYXlQb2ludEF0KHJheSwgdFBlcnApKSk7CiAgICAgICAgCiAgICAgICAgRXF1aWFuZ3VsYXJTYW1wbGUoLXRQZXJwLCB0RGVwdGggLSB0UGVycCwgRCwgeGksIHRWb2x1bWUsIHBkZkNhdWNoeSk7ICAgICAgICAKICAgICAgICB0Vm9sdW1lICs9IHRQZXJwOwoKICAgICAgICByYXkub2QubyA9IHJheS5vZC5vICsgcmF5Lm9kLmQgKiB0Vm9sdW1lOwogICAgICAgIC8vcmF5Lm9kLmQgPSBTYW1wbGVVbml0U3BoZXJlKHhpLnl6KTsKICAgICAgICBmbG9hdCBkaXN0VG9MaWdodCA9IGxlbmd0aChyYXkub2Qubyk7CiAgICAgICAgcmF5Lm9kLmQgPSAtcmF5Lm9kLm8gLyBkaXN0VG9MaWdodDsKICAgICAgICByYXkuZmxhZ3MgPSBrRmxhZ3NEaXJlY3RSYXk7CiAgICAgICAgcmF5LndlaWdodCAqPSA1LjAgKiAoMS4wIC8gbWF4KDAuNSwgc3FyKGRpc3RUb0xpZ2h0KSkpICogZXhwKC10Vm9sdW1lICoga0V4dGluY3Rpb24pICoga0V4dGluY3Rpb24gLyBwZGZDYXVjaHk7CiAgICAgICAgCiAgICAgICAgZmxvYXQgYXJjID0gMC41ICogKHRoZXRhICsgYXRhbihyYXkub2QuZC55LCByYXkub2QuZC56KSArIGFjb3MoKHJheS5vZC5kLnggPiAwLjApID8gc3FyKHJheS5vZC5kLngpIDogKC1zcXIoLXJheS5vZC5kLngpKSkpOwogICAgICAgIHJheS53ZWlnaHQgKj0gSHVlKGZyYWN0KGFyYykpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOyAgICAgICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICBpZihtYXRJRCA9PSAtMSkKICAgIHsKICAgICAgICBpZihkZXB0aCAhPSAxKXsgTC54eXogKz0gU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUocmF5Lm9kLCB0aW1lKSAqIHJheS53ZWlnaHQ7IH0KICAgICAgICBlbHNlIHsgTC54eXogKz0ga09uZSAqIGtCYWNrZ3JvdW5kQ29sb3VyOyB9CiAgICAgICAgcmV0dXJuIGZhbHNlOyAKICAgIH0gICAKICAgIAogICAgLy9yYXkud2VpZ2h0ICo9IGV4cCgtcmF5LnROZWFyICoga0V4dGluY3Rpb24pOwogICAgCiAgICByYXkud2VpZ2h0ICo9IGFscGhhOwogICAgTC54eXogKz0gc3FyKGRvdCgtbm9ybWFsaXplKHJheS5vZC5kKSwgaGl0Lm4pKSAqICgxLjAgLSBhbHBoYSkgKiAwLjM7IAogICAgaWYoYWxwaGEgPT0gMC4wKSB7IHJldHVybiBmYWxzZTsgfQogICAgCiAgICBzd2l0Y2gobWF0SUQpCiAgICB7CiAgICBjYXNlIDA6CiAgICAgICAgU2FtcGxlUGVyZmVjdFNwZWN1bGFyKHJheSwgaGl0KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIGNhc2UgMTogIAogICAgICAgIEwueHl6ICs9IHJheS53ZWlnaHQgKiAxLjA7CiAgICB9CiAgICAKICAgIHJldHVybiBmYWxzZTsKICAgIAp9Cgp2ZWM0IFRyYWNlUGF0aCh2ZWMyIHV2U2NyZWVuLCBpbnQgc2FtcGxlSWR4LCBpbnQgbWF4U2FtcGxlcywgYm9vbCBpc1ZvbHVtZVBhc3MpCnsKICAgIC8vIFNhbXBsZSB0aGUgc3BlY3RydW0KICAgIGZsb2F0IHhpID0gKGZsb2F0KHNhbXBsZUlkeCkgKyBSYW5kKGlDaGFubmVsMCkueCkgLyBmbG9hdChtYXhTYW1wbGVzKTsgICAgCiAgICBmbG9hdCBsYW1iZGEgPSBtaXgoMzgwMC4wLCA3MDAwLjAsIHhpKTsKICAgIAogICAgLy8gQ29uZmlndXJlIHRoZSB0aW1lCiAgICB2ZWMzIHRpbWU7CiAgICB0aW1lLnggPSBtYXgoMC4wLCBpVGltZSAtIGtDYXB0dXJlVGltZURlbGF5KTsgICAgCiAgICBmbG9hdCB0aW1lU3ViU2FtcGxlID0gMS4wIC8gNjAuMCAqIHhpICoga01CbHVyR2FpbjsKICAgIHRpbWUueCA9IG1vZCgodGltZS54ICoga0NhcHR1cmVUaW1lU3BlZWQgKyB0aW1lU3ViU2FtcGxlKSAqIGtTcGVlZCwgZmxvYXQoa051bUludGVydmFscykpOwogICAgdGltZS55ID0gdGltZS54IC8gZmxvYXQoa051bUludGVydmFscyk7CiAgICB0aW1lLnogPSBmcmFjdCh0aW1lLngpOyAgCiAgICAKICAgIHZlYzIgdXZWaWV3ID0gVHJhbnNmb3JtU2NyZWVuVG9Xb3JsZCh1dlNjcmVlbik7CiAgICAKICAgIGlmKCFJbnZlcnNlU3Rlcm5vZ3JhcGgodXZWaWV3LCBrU3Rlcm5vZ3JhcGhpY1NjYWxlKSkgeyByZXR1cm4gdmVjNCgwLjApOyB9IAogICAgCiAgICAvLyBDcmVhdGUgYSBuZXcgY2FtZXJhIHJheSBhbmQgc3RvcmUgdGhlIHNhbXBsZWQgd2F2ZWxlbmd0aCAod2UgcmV1c2UgdGhlIHNhbWUgcmF5IGF0IGVhY2ggYm91bmNlKSAgIAogICAgUmF5IGNhbWVyYVJheSA9IENyZWF0ZU9ydGhvZ3JhcGhpY0NhbWVyYVJheSh1dlZpZXcsIHZlYzIoMS43MzIwNTA4KSAqIDEuNSwgdmVjMygyLjApLCB2ZWMzKDAuMCkpOyAgIAogICAgLy9jYW1lcmFSYXkubGFtYmRhID0gbGFtYmRhOwogICAgCiAgICAvLyBJbnRlcmF0aXZlbHkgc2FtcGxlIHRoZSBwYXRoCiAgICB2ZWM0IEwgPSB2ZWM0KDAuMCk7CiAgICBmb3IoaW50IGRlcHRoID0gMDsgZGVwdGggPCBrTWF4RGVwdGg7IGRlcHRoKyspCiAgICB7CiAgICAgICAgLy8gUGFzc2luZyBSYXkgc3RydWN0dXJlcyBieSByZWZlcmVuY2UgYnJlYWtzIHRoZSBzaGFkZXIgb24gTWFjcy4gVGhpcyBleHBsYWlucwogICAgICAgIC8vIHRoZSBjbHVua3kgYXBwcm9hY2ggdG8gcmV0dXJuaW5nIGV4dGFudCByYXlzIGJ5IHZhbHVlLgogICAgICAgIGlmKCFUcmFjZVdhdmVmcm9udChjYW1lcmFSYXksIEwsIHRpbWUsIGRlcHRoICsgMSwgc2FtcGxlSWR4LCBtYXhTYW1wbGVzLCBpc1ZvbHVtZVBhc3MpKQogICAgICAgIHsgICAgICAgIAogICAgICAgICAgIGlmKGRlcHRoID09IDApIHsgcmV0dXJuIEw7IH0KICAgICAgICAgICAgYnJlYWs7IAogICAgICAgIH0KICAgIH0KICAgICAgCiAgICBpZihrU3BlY3RyYWxJbnRlZ3JhdG9yICYmICFpc1ZvbHVtZVBhc3MpCiAgICB7ICAKICAgICAgICBMLnh5eiAqPSBTYW1wbGVTcGVjdHJ1bShsYW1iZGEpOwogICAgfQogICAKICAgIHJldHVybiBMOwp9Cgp2b2lkIG1haW5JbWFnZSggb3V0IHZlYzQgcmdiYSwgaW4gdmVjMiB4eSApCnsgICAgCiAgICBpZihrVGVzdFNreWxpZ2h0KQogICAgewogICAgICAgIHZlYzMgbiA9IHZlYzMoY29zKGtUd29QaSAqIHh5LnggLyBpUmVzb2x1dGlvbi54KSAqIHNpbihrUGkgKiB4eS55IC8gaVJlc29sdXRpb24ueSksIAogICAgICAgICAgICAgICAgICAgICAgc2luKGtUd29QaSAqIHh5LnggLyBpUmVzb2x1dGlvbi54KSAqIHNpbihrUGkgKiB4eS55IC8gaVJlc29sdXRpb24ueSksIAogICAgICAgICAgICAgICAgICAgICAgY29zKGtQaSAqIHh5LnkgLyBpUmVzb2x1dGlvbi55KSk7CiAgICAgICAgcmdiYS54eXogPSBTa3lsaWdodChuKTsKICAgICAgICByZ2JhLncgPSAxLjA7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAKICAgIGlmKHh5LnggPiBpUmVzb2x1dGlvbi54IC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpIHx8IHh5LnkgPiBpUmVzb2x1dGlvbi55IC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpKSB7IHJldHVybjsgfQogICAgCiAgICBTZXRHbG9iYWxzKHh5LCBpUmVzb2x1dGlvbi54eSk7CiAgICAKICAgIGlmKCFJc1RleGVsSW5DbGlwUmVnaW9uKHh5KSkgeyByZXR1cm47IH0KICAgICAgICAKICAgIHh5ICo9IGZsb2F0KGtTY3JlZW5Eb3duc2FtcGxlKTsKICAgIHZlYzMgcmdiID0ga1plcm87CiAgICAKICAgICNkZWZpbmUga051bVNhbXBsZXMgKGtBbnRpQWxpYXMqa0FudGlBbGlhcykKICAgIHZlYzQgcmdiaSA9IHZlYzQoMC4wKTsKICAgIC8qZm9yKGludCBpID0gMCwgaWR4ID0gMDsgaSA8IGtBbnRpQWxpYXM7ICsraSkKICAgIHsKICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwga0FudGlBbGlhczsgKytqLCArK2lkeCkKICAgICAgICB7CiAgICAgICAgICAgIFBDR0luaXRpYWxpc2UoSGFzaE9mKHVpbnQoaWR4KSkpOwogICAgICAgICAgICB2ZWMyIHh5QUEgPSB4eSArIHZlYzIoZmxvYXQoaSkgLyBmbG9hdChrQW50aUFsaWFzKSwgZmxvYXQoaikgLyBmbG9hdChrQW50aUFsaWFzKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZ2JpICs9IFRyYWNlUGF0aCh4eUFBLCBpZHgsIGtOdW1TYW1wbGVzLCBmYWxzZSk7CiAgICAgICAgfQogICAgfSAgICAKICAgIHJnYiArPSByZ2JpLnh5eiAvIGZsb2F0KGtOdW1TYW1wbGVzKTsqLwogICAgCiAgICByZ2JpID0gdmVjNCgwLjApOwogICAgI2RlZmluZSBrVm9sdW1lQW50aUFsaWFzIDIKICAgICNkZWZpbmUga051bVZvbHVtZVNhbXBsZXMgKGtWb2x1bWVBbnRpQWxpYXMqa1ZvbHVtZUFudGlBbGlhcykKICAgIGZvcihpbnQgaSA9IDAsIGlkeCA9IDA7IGkgPCBrVm9sdW1lQW50aUFsaWFzOyArK2kpCiAgICB7CiAgICAgICAgZm9yKGludCBqID0gMDsgaiA8IGtWb2x1bWVBbnRpQWxpYXM7ICsraiwgKytpZHgpCiAgICAgICAgewogICAgICAgICAgICBQQ0dJbml0aWFsaXNlKEhhc2hPZih1aW50KGlkeCkpKTsKICAgICAgICAgICAgdmVjMiB4eUFBID0geHkgKyB2ZWMyKGZsb2F0KGkpIC8gZmxvYXQoa1ZvbHVtZUFudGlBbGlhcyksIGZsb2F0KGopIC8gZmxvYXQoa1ZvbHVtZUFudGlBbGlhcykpOwogICAgICAgICAgICAKICAgICAgICAgICAgcmdiaSArPSBUcmFjZVBhdGgoeHlBQSwgaWR4LCBrTnVtVm9sdW1lU2FtcGxlcywgdHJ1ZSk7CiAgICAgICAgfQogICAgfQogICAgcmdiICs9IHJnYmkueHl6IC8gZmxvYXQoOSk7CiAgICAKICAgIC8vcmdiID0gbWl4KHJnYiwga09uZSAtIHJnYiwgcmdiaS53KTsKICAgIAogICAgI2RlZmluZSBrQ29sb3VyUXVhbnRpc2F0aW9uIDQKICAgIC8qcmdiICo9IGZsb2F0KGtDb2xvdXJRdWFudGlzYXRpb24pOwogICAgaWYoZnJhY3QocmdiLngpID4gT3JkZXJlZERpdGhlcigpKSByZ2IueCArPSAxLjA7CiAgICBpZihmcmFjdChyZ2IueSkgPiBPcmRlcmVkRGl0aGVyKCkpIHJnYi55ICs9IDEuMDsKICAgIGlmKGZyYWN0KHJnYi56KSA+IE9yZGVyZWREaXRoZXIoKSkgcmdiLnogKz0gMS4wOwogICAgcmdiID0gZmxvb3IocmdiKSAvIGZsb2F0KGtDb2xvdXJRdWFudGlzYXRpb24pOyovCiAgICAKICAgIC8vIEdyYWRlCiAgICB2ZWMzIGhzdiA9IFJHQlRvSFNWKHJnYik7ICAgIAogICAgaHN2LnggKz0gLXNpbigoaHN2LnggKyAwLjA1KSAqIGtUd29QaSkgKiAwLjA3OwogICAgaHN2LnkgKj0gMS4wOyAgICAKICAgIHJnYiA9IEhTVlRvUkdCKGhzdik7CiAgICAKICAgIC8vcmdiICs9IDAuMSAqIGZsb2F0KChpbnQoeHkueSkgLyBrU2NyZWVuRG93bnNhbXBsZSkgJiAxKTsKICAgIHJnYiArPSAwLjA1OwogICAgCiAgICByZ2JhID0gdmVjNChyZ2IsIDEuMCk7Cn0",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAwJwAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAAzMAAAAAAAAAAAAAAzMAAAAAAAADMwAAAAAAAFQoAAAjZGVmaW5lIGtDYXB0dXJlTW9kZSAwCgojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3IgdHJ1ZQojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3JNb2RlIDEKI2lmIGtSZXRyb01vZGUgPT0gMQogICAgI2RlZmluZSBrTGFtYmRhU2FtcGxlciAyCiNlbHNlCiAgICAjZGVmaW5lIGtMYW1iZGFTYW1wbGVyIDAKI2VuZGlmCiNkZWZpbmUga0RpZWxlY3RyaWNEaXNwZXJzaW9uIDEwLjAKCiNkZWZpbmUga01CbHVyR2FpbiAgICAgIDcuMAojZGVmaW5lIGtNYXhJdGVyYXRpb25zICA0CiNkZWZpbmUga1pvb21PcmRlciAgICAgIDMKI2RlZmluZSBrRW5kUGF1c2UgICAgICAgMC4wCiNkZWZpbmUga1NwZWVkICAgICAgICAgMi41CiNkZWZpbmUga01heERlcHRoICAgICAgIDIKCiNkZWZpbmUga0JhY2tncm91bmRDb2xvdXIgMC4KI2RlZmluZSBrRWRnZUdhaW4gMS4wIAojZGVmaW5lIGtFZGdlRW1waGFzaXNHYWluIDAuMAojZGVmaW5lIGtGYWNlRW1waGFzaXNHYWluIDAuMAoKI2RlZmluZSBrT3JpZ2luQ2VsbEhlYWRTdGFydCAwLjEKI2RlZmluZSBrQ3ViZVNocmluayAwLjYKI2RlZmluZSBrQ3ViZVNjYWxlRWFzZUluIDAuMDUKI2RlZmluZSBrQ3ViZVNjYWxlRWFzZU91dCAwLjI1CgojZGVmaW5lIGtTa3lsaWdodEZsb29yIDAuCiAgICAjZGVmaW5lIGtTa3lsaWdodENlaWwgMS4wCiAgICAjZGVmaW5lIGtTa3lsaWdodEdhaW5BIDEuMAogICAgI2RlZmluZSBrU2t5bGlnaHRHYWluQiAxLjAKICAgICNkZWZpbmUga1NreWxpZ2h0RnJlcUEgNS4wCiAgICAjZGVmaW5lIGtTa3lsaWdodEZyZXFCIDIwLjAKICAgICNkZWZpbmUga1NreWxpZ2h0Tm9ybWFsQSB2ZWMzKDEuMCwgMC4wLCAwLjApCiAgICAjZGVmaW5lIGtTa3lsaWdodE5vcm1hbEIgdmVjMygwLjAsIC0xLjAsIDAuMCkKICAgICNkZWZpbmUga1NreWxpZ2h0SGFyZG5lc3MgNS4wCiAgICAjZGVmaW5lIGtFbnZpcm9ubWVudFJhZGl1cyAyLjAKI2RlZmluZSBrVGVzdFNreWxpZ2h0IGZhbHNlCgojaWYga0NhcHR1cmVNb2RlID09IDEKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lRGVsYXkgMTAuMAogICAgI2RlZmluZSBrQ2FwdHVyZVRpbWVTcGVlZCAoMTAuMCAvIDYwLjApCiNlbHNlCiAgICAjZGVmaW5lIGtDYXB0dXJlVGltZURlbGF5IDAuMAogICAgI2RlZmluZSBrQ2FwdHVyZVRpbWVTcGVlZCAxLjAKI2VuZGlmCgojaWYga0NsaXBWaWV3ID09IDAKICAgICNkZWZpbmUga1N0ZXJub2dyYXBoaWNTY2FsZSAxLjEKICAgICNkZWZpbmUga1ZpZXdTY2FsZSAxLgojZWxzZQogICAgI2RlZmluZSBrU3Rlcm5vZ3JhcGhpY1NjYWxlIDEuMwogICAgI2RlZmluZSBrVmlld1NjYWxlIDAuMjUKI2VuZGlmCgp2ZWMzIFNreWxpZ2h0KHZlYzMgbikKewogICAgZmxvYXQgdGhldGFBID0gYWNvcyhkb3Qobiwgbm9ybWFsaXplKGtTa3lsaWdodE5vcm1hbEEpKSk7CiAgICBmbG9hdCB0aGV0YUIgPSBhY29zKGRvdChuLCBub3JtYWxpemUoa1NreWxpZ2h0Tm9ybWFsQikpKTsgICAgCiAgICAKICAgIGZsb2F0IHYgPSAoa1NreWxpZ2h0R2FpbkEgKiBjb3MwMShrU2t5bGlnaHRGcmVxQSAqIHRoZXRhQSkgKyBrU2t5bGlnaHRHYWluQiAqIHNpbjAxKGtTa3lsaWdodEZyZXFCICogdGhldGFCKSkgLyAoa1NreWxpZ2h0R2FpbkEgKyBrU2t5bGlnaHRHYWluQik7CiAgICAKICAgIHJldHVybiB2ZWMzKG1peChrU2t5bGlnaHRGbG9vciwga1NreWxpZ2h0Q2VpbCwgcG93KHNhdHVyYXRlKHYgKiBrU2t5bGlnaHRIYXJkbmVzcyAtICgwLjUgKiAoa1NreWxpZ2h0SGFyZG5lc3MgLSAxLjApKSksIDEuMCkpKTsKfQoKdmVjMyBTYW1wbGVFbnZpcm9ubWVudFNwaGVyZShSYXlCYXNpYyByYXksIHZlYzMgdGltZSkKewogICAgZmxvYXQgYSA9IGRvdChyYXkuZCwgcmF5LmQpOwogICAgZmxvYXQgYiA9IDIuMCAqIGRvdChyYXkuZCwgcmF5Lm8pOwogICAgZmxvYXQgYyA9IGRvdChyYXkubywgcmF5Lm8pIC0gc3FyKGtFbnZpcm9ubWVudFJhZGl1cyk7CgogICAgZmxvYXQgdDAsIHQxOwogICAgaWYgKCFRdWFkcmF0aWNTb2x2ZShhLCBiLCBjLCB0MCwgdDEpKSB7IHJldHVybiBrWmVybzsgfQoKICAgIHZlYzMgbiA9IG5vcm1hbGl6ZShyYXkubyArIHJheS5kICogKCh0MCA+IDAuMCkgPyB0MCA6IHQxKSk7CiAgICAKICAgIHJldHVybiBTa3lsaWdodChuKTsKfQoKdm9pZCBTYW1wbGVQZXJmZWN0U3BlY3VsYXIoaW5vdXQgUmF5IHJheSwgaW4gSGl0Q3R4IGhpdCkKewogICAgdmVjMyByID0gcmVmbGVjdChyYXkub2QuZCwgaGl0Lm4pOwogICAgCiAgICByYXkub2QubyA9IHJheS5vZC5vICsgcmF5Lm9kLmQgKiByYXkudE5lYXIgKyBoaXQubiAqIGhpdC5raWNrb2ZmOwogICAgcmF5Lm9kLmQgPSByOyAgCn0KCgpmbG9hdCBDYXVjaHlQREYoZmxvYXQgeCwgZmxvYXQgRCkKewogICAgcmV0dXJuIDEuMCAvIChrUGkgKiBEICogKDEuMCArIHNxcih4IC8gRCkpKTsKfQoKZmxvYXQgQ2F1Y2h5Q0RGKGZsb2F0IHgsIGZsb2F0IEQpCnsKICAgIHJldHVybiBrSW52UGkgKiBhdGFuKHggLyBEKSArIDAuNTsKfQoKdm9pZCBFcXVpYW5ndWxhclNhbXBsZShpbiBmbG9hdCBMMCwgaW4gZmxvYXQgTDEsIGluIGZsb2F0IEQsIGluIGZsb2F0IHhpLCBvdXQgZmxvYXQgdEVxdWksIG91dCBmbG9hdCBwZGYpCnsKICAgIGZsb2F0IGNkZjAgPSBDYXVjaHlDREYoTDAsIEQpOwogICAgZmxvYXQgY2RmMSA9IENhdWNoeUNERihMMSwgRCk7CiAgICB0RXF1aSA9IHRhbigobWl4KGNkZjAsIGNkZjEsIHhpKSAtIDAuNSkgKiBrUGkpICogRDsKICAgICAgICAKICAgIC8vdEVxdWkgPSAoeCAtIEwwKSAvIChMMSAtIEwwKTsKICAgIHBkZiA9IENhdWNoeVBERigodEVxdWkgLSBMMCkgLyAoTDEgLSBMMCksIEQpIC8gbWF4KDFlLTEwLCBjZGYxIC0gY2RmMCk7Cn0KCmJvb2wgVHJhY2VXYXZlZnJvbnQoaW5vdXQgUmF5IHJheSwgb3V0IHZlYzQgTCwgdmVjMyB0aW1lLCBpbnQgZGVwdGgsIGludCBzYW1wbGVJZHgsIGludCBtYXhTYW1wbGVzLCBib29sIGlzVm9sdW1lUGFzcykKeyAgIAogICAgLyppZihkZXB0aCA9PSBrTWF4RGVwdGgpCiAgICB7CiAgICAgICAgTC54eXogKz0gU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUocmF5Lm9kLCB0aW1lKSAqIHJheS53ZWlnaHQ7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSAqLyAgIAogICAKICAgIC8vZmxvYXQgcGhpID0gbWF4KDAuMCwgc2luKGtQaSAqIChmbG9vcih0aW1lLnkpICsgUGFkZGVkU21vb3RoU3RlcCh0aW1lLnosIDAuMCwgMS4wKSkgLyBmbG9hdChrQ2xvc2VkSW50ZXJ2YWwgKyAxKSkpOwogICAgZmxvYXQgcGhpID0gS2lja0Ryb3AodGltZS55LCB2ZWMyKDAuMCwgMC4wKSwgdmVjMigwLjUsIDEuMCksIHZlYzIoa0Nsb3NlZEludGVydmFsIC0gMywgMS4wKSwgdmVjMihrQ2xvc2VkSW50ZXJ2YWwsIDAuMCkpOwogICAgZmxvYXQgdGhldGEgPSBrVHdvUGkgKiB0aW1lLnggLyBmbG9hdChrTnVtSW50ZXJ2YWxzKTsKICAgIGZsb2F0IGFscGhhID0gS2lja0Ryb3AodGltZS55LCB2ZWMyKDAuMCwgMC4wKSwgdmVjMigwLjUsIDEuMCksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoZmxvYXQoa0Nsb3NlZEludGVydmFsKSwgMS4wKSwgdmVjMihmbG9hdChrQ2xvc2VkSW50ZXJ2YWwpICsgMC41LCAwLjApKTsKICAgIC8vZmxvYXQgaml0dGVyID0gYWxwaGEgKiAwLjggKiAoMS4wICsgMC4yICogc2luKHRpbWUueCAqIDIwLjApKTsKICAgIAogICAgaW50IG1hdElEID0gLTE7CiAgICB2ZWMyIHNkZk5lYXIgPSB2ZWMyKGtGbHRNYXgpOwogICAgVHJhbnNmb3JtIHRyYW5zZm9ybTsKICAgIEhpdEN0eCBoaXQ7CiAgICByYXkudE5lYXIgPSBrRmx0TWF4OwogICAgCiAgICB0cmFuc2Zvcm0gPSBDb21wb3VuZFRyYW5zZm9ybSh2ZWMzKDAuMCksIHZlYzMoMC4wLCB0aGV0YSwga0hhbGZQaSksIDEuMSk7CiAgICBpZihSYXlTaW1wbGV4U0RGKHJheSwgc2RmTmVhciwgaGl0LCB0cmFuc2Zvcm0sIG1peCgwLjIsIDEuMywgcGhpKSwgaW50KHRpbWUueSksIHRpbWUueikpIHsgbWF0SUQgPSAwOyB9ICAgICAgICAgIAogICAgICAgIAogICAgaWYoIWlzVm9sdW1lUGFzcyB8fCBkZXB0aCA9PSAxKQogICAgewogICAgICAgIHRyYW5zZm9ybSA9IENvbXBvdW5kVHJhbnNmb3JtKHZlYzMoMC4wKSwgdmVjMygwLjAsIHRoZXRhLCBrSGFsZlBpKSwgLjgpOwogICAgICAgIGlmKFJheVNpbXBsZXhTREYocmF5LCBzZGZOZWFyLCBoaXQsIHRyYW5zZm9ybSwgMC4wLCBpbnQodGltZS55KSwgdGltZS56KSkgeyBtYXRJRCA9IDE7IH0KICAgIH0KICAgCiAgICAvL0wueHl6ICs9IGhpdC5uOyByZXR1cm4gZmFsc2U7CiAgICAKICAgICNkZWZpbmUga0V4dGluY3Rpb24gMC4xCiAgICBpZihpc1ZvbHVtZVBhc3MpCiAgICB7CiAgICAgICAgaWYoKHJheS5mbGFncyAmIGtGbGFnc0RpcmVjdFJheSkgIT0gMHUpCiAgICAgICAgewogICAgICAgICAgICBmbG9hdCBkaXN0VG9MaWdodCA9IGxlbmd0aDIocmF5Lm9kLm8pOwogICAgICAgICAgICBpZihtYXRJRCAhPSAtMSAmJiBzcXIocmF5LnROZWFyKSA8IGRpc3RUb0xpZ2h0KSB7IHJldHVybiBmYWxzZTsgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIEwueHl6ICs9IHJheS53ZWlnaHQ7IHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGlmKHNxcihzZGZOZWFyLnkpID4gZGlzdFRvTGlnaHQpCiAgICAgICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0OwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0ICogbWluKDEuMCwgMi4wICogc3FydChhYnMoc2RmTmVhci54KSAvIHNkZk5lYXIueSkpOwoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZmxvYXQgeGkgPSAoZmxvYXQoc2FtcGxlSWR4KSArIFJhbmQoaUNoYW5uZWwwKS54KSAvIGZsb2F0KG1heFNhbXBsZXMpOwogICAgICAgIGZsb2F0IHRQZXJwID0gbWF4KDAuMCwgLWRvdChyYXkub2QubywgcmF5Lm9kLmQpKTsKICAgICAgICBmbG9hdCB0Vm9sdW1lLCBwZGZDYXVjaHk7CiAgICAgICAgZmxvYXQgdERlcHRoID0gKG1hdElEID09IC0xKSA/IDUuMCA6IHJheS50TmVhcjsKICAgICAgICBmbG9hdCBEID0gbWF4KDAuMSwgbGVuZ3RoKFJheVBvaW50QXQocmF5LCB0UGVycCkpKTsKICAgICAgICAKICAgICAgICBFcXVpYW5ndWxhclNhbXBsZSgtdFBlcnAsIHREZXB0aCAtIHRQZXJwLCBELCB4aSwgdFZvbHVtZSwgcGRmQ2F1Y2h5KTsgICAgICAgIAogICAgICAgIHRWb2x1bWUgKz0gdFBlcnA7CgogICAgICAgIHJheS5vZC5vID0gcmF5Lm9kLm8gKyByYXkub2QuZCAqIHRWb2x1bWU7CiAgICAgICAgLy9yYXkub2QuZCA9IFNhbXBsZVVuaXRTcGhlcmUoeGkueXopOwogICAgICAgIGZsb2F0IGRpc3RUb0xpZ2h0ID0gbGVuZ3RoKHJheS5vZC5vKTsKICAgICAgICByYXkub2QuZCA9IC1yYXkub2QubyAvIGRpc3RUb0xpZ2h0OwogICAgICAgIHJheS5mbGFncyA9IGtGbGFnc0RpcmVjdFJheTsKICAgICAgICByYXkud2VpZ2h0ICo9IDEwLjAgKiAoMS4wIC8gbWF4KDEuMCwgc3FyKGRpc3RUb0xpZ2h0KSkpICogZXhwKC10Vm9sdW1lICoga0V4dGluY3Rpb24pICoga0V4dGluY3Rpb24gLyBwZGZDYXVjaHk7CiAgICAgICAgCiAgICAgICAgZmxvYXQgYXJjID0gMC40ICogKHRoZXRhICsgYXRhbihyYXkub2QuZC55LCByYXkub2QuZC56KSArIGFjb3MoKHJheS5vZC5kLnggPiAwLjApID8gc3FyKHJheS5vZC5kLngpIDogKC1zcXIoLXJheS5vZC5kLngpKSkpOwogICAgICAgIHJheS53ZWlnaHQgPSBwb3cocmF5LndlaWdodCAqIEh1ZShmcmFjdChhcmMpKSwgdmVjMygwLjgpKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICAgICAgCiAgICB9CiAgICAKICAgIAogICAgaWYobWF0SUQgPT0gLTEpCiAgICB7CiAgICAgICAgaWYoZGVwdGggIT0gMSl7IEwueHl6ICs9IFNhbXBsZUVudmlyb25tZW50U3BoZXJlKHJheS5vZCwgdGltZSkgKiByYXkud2VpZ2h0OyB9CiAgICAgICAgZWxzZSB7IEwueHl6ICs9IGtPbmUgKiBrQmFja2dyb3VuZENvbG91cjsgfQogICAgICAgIHJldHVybiBmYWxzZTsgCiAgICB9ICAgCiAgICAKICAgIC8vcmF5LndlaWdodCAqPSBleHAoLXJheS50TmVhciAqIGtFeHRpbmN0aW9uKTsKICAgIAogICAgcmF5LndlaWdodCAqPSBhbHBoYTsKICAgIEwueHl6ICs9IHNxcihkb3QoLW5vcm1hbGl6ZShyYXkub2QuZCksIGhpdC5uKSkgKiAoMS4wIC0gYWxwaGEpICogMC4xOyAKICAgIGlmKGFscGhhID09IDAuMCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIAogICAgc3dpdGNoKG1hdElEKQogICAgewogICAgY2FzZSAwOgogICAgICAgIFNhbXBsZVBlcmZlY3RTcGVjdWxhcihyYXksIGhpdCk7CiAgICAgICAgcmF5LndlaWdodCAqPSBhbHBoYTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIGNhc2UgMTogIAogICAgICAgIEwueHl6ICs9IHJheS53ZWlnaHQgKiAxLjA7CiAgICB9CiAgICAKICAgIHJldHVybiBmYWxzZTsKICAgIAp9Cgp2ZWM0IFRyYWNlUGF0aCh2ZWMyIHV2U2NyZWVuLCBpbnQgc2FtcGxlSWR4LCBpbnQgbWF4U2FtcGxlcywgYm9vbCBpc1ZvbHVtZVBhc3MpCnsKICAgIC8vIFNhbXBsZSB0aGUgc3BlY3RydW0KICAgIGZsb2F0IHhpID0gKGZsb2F0KHNhbXBsZUlkeCkgKyBSYW5kKGlDaGFubmVsMCkueCkgLyBmbG9hdChtYXhTYW1wbGVzKTsgICAgCiAgICBmbG9hdCBsYW1iZGEgPSBtaXgoMzgwMC4wLCA3MDAwLjAsIHhpKTsKICAgIAogICAgLy8gQ29uZmlndXJlIHRoZSB0aW1lCiAgICB2ZWMzIHRpbWU7CiAgICB0aW1lLnggPSBtYXgoMC4wLCBpVGltZSAtIGtDYXB0dXJlVGltZURlbGF5KTsgICAgCiAgICBmbG9hdCB0aW1lU3ViU2FtcGxlID0gMS4wIC8gNjAuMCAqIHhpICoga01CbHVyR2FpbjsKICAgIHRpbWUueCA9ICh0aW1lLnggKiBrQ2FwdHVyZVRpbWVTcGVlZCArIHRpbWVTdWJTYW1wbGUpICoga1NwZWVkOwogICAgdGltZS55ID0gbW9kKHRpbWUueCwgZmxvYXQoa051bUludGVydmFscykpOwogICAgdGltZS56ID0gZnJhY3QodGltZS54KTsgIAogICAgCiAgICB2ZWMyIHV2VmlldyA9IFRyYW5zZm9ybVNjcmVlblRvV29ybGQodXZTY3JlZW4pOwogICAgCiAgICBpZighSW52ZXJzZVN0ZXJub2dyYXBoKHV2Vmlldywga1N0ZXJub2dyYXBoaWNTY2FsZSkpIHsgcmV0dXJuIHZlYzQoMC4wKTsgfSAKICAgIAogICAgLy8gQ3JlYXRlIGEgbmV3IGNhbWVyYSByYXkgYW5kIHN0b3JlIHRoZSBzYW1wbGVkIHdhdmVsZW5ndGggKHdlIHJldXNlIHRoZSBzYW1lIHJheSBhdCBlYWNoIGJvdW5jZSkgICAKICAgIFJheSBjYW1lcmFSYXkgPSBDcmVhdGVPcnRob2dyYXBoaWNDYW1lcmFSYXkodXZWaWV3LCB2ZWMyKDEuNzMyMDUwOCkgKiAxLjUsIHZlYzMoMi4wKSwgdmVjMygwLjApKTsgICAKICAgIC8vY2FtZXJhUmF5LmxhbWJkYSA9IGxhbWJkYTsKICAgIAogICAgLy8gSW50ZXJhdGl2ZWx5IHNhbXBsZSB0aGUgcGF0aAogICAgdmVjNCBMID0gdmVjNCgwLjApOwogICAgZm9yKGludCBkZXB0aCA9IDA7IGRlcHRoIDwga01heERlcHRoOyBkZXB0aCsrKQogICAgewogICAgICAgIC8vIFBhc3NpbmcgUmF5IHN0cnVjdHVyZXMgYnkgcmVmZXJlbmNlIGJyZWFrcyB0aGUgc2hhZGVyIG9uIE1hY3MuIFRoaXMgZXhwbGFpbnMKICAgICAgICAvLyB0aGUgY2x1bmt5IGFwcHJvYWNoIHRvIHJldHVybmluZyBleHRhbnQgcmF5cyBieSB2YWx1ZS4KICAgICAgICBpZighVHJhY2VXYXZlZnJvbnQoY2FtZXJhUmF5LCBMLCB0aW1lLCBkZXB0aCArIDEsIHNhbXBsZUlkeCwgbWF4U2FtcGxlcywgaXNWb2x1bWVQYXNzKSkKICAgICAgICB7ICAgICAgICAKICAgICAgICAgICBpZihkZXB0aCA9PSAwKSB7IHJldHVybiBMOyB9CiAgICAgICAgICAgIGJyZWFrOyAKICAgICAgICB9CiAgICB9CiAgICAgIAogICAgaWYoa1NwZWN0cmFsSW50ZWdyYXRvciAmJiAhaXNWb2x1bWVQYXNzKQogICAgeyAgCiAgICAgICAgTC54eXogKj0gU2FtcGxlU3BlY3RydW0obGFtYmRhKTsKICAgICAgICAvL0wueHl6ICo9IEh1ZSh4aSkgKiAyLjsKICAgIH0KICAgCiAgICByZXR1cm4gTDsKfQoKdm9pZCBtYWluSW1hZ2UoIG91dCB2ZWM0IHJnYmEsIGluIHZlYzIgeHkgKQp7ICAgIAogICAgaWYoa1Rlc3RTa3lsaWdodCkKICAgIHsKICAgICAgICB2ZWMzIG4gPSB2ZWMzKGNvcyhrVHdvUGkgKiB4eS54IC8gaVJlc29sdXRpb24ueCkgKiBzaW4oa1BpICogeHkueSAvIGlSZXNvbHV0aW9uLnkpLCAKICAgICAgICAgICAgICAgICAgICAgIHNpbihrVHdvUGkgKiB4eS54IC8gaVJlc29sdXRpb24ueCkgKiBzaW4oa1BpICogeHkueSAvIGlSZXNvbHV0aW9uLnkpLCAKICAgICAgICAgICAgICAgICAgICAgIGNvcyhrUGkgKiB4eS55IC8gaVJlc29sdXRpb24ueSkpOwogICAgICAgIHJnYmEueHl6ID0gU2t5bGlnaHQobik7CiAgICAgICAgcmdiYS53ID0gMS4wOwogICAgICAgIHJldHVybjsKICAgIH0KICAgCiAgICBpZih4eS54ID4gaVJlc29sdXRpb24ueCAvIGZsb2F0KGtTY3JlZW5Eb3duc2FtcGxlKSB8fCB4eS55ID4gaVJlc29sdXRpb24ueSAvIGZsb2F0KGtTY3JlZW5Eb3duc2FtcGxlKSkgeyByZXR1cm47IH0KICAgIAogICAgU2V0R2xvYmFscyh4eSwgaVJlc29sdXRpb24ueHkpOwogICAgCiAgICBpZighSXNUZXhlbEluQ2xpcFJlZ2lvbih4eSkpIHsgcmV0dXJuOyB9CiAgICAgICAgCiAgICB4eSAqPSBmbG9hdChrU2NyZWVuRG93bnNhbXBsZSk7CiAgICB2ZWMzIHJnYiA9IGtaZXJvOwogICAgCiAgICAjZGVmaW5lIGtBbnRpQWxpYXMgMwogICAgI2RlZmluZSBrTnVtU2FtcGxlcyAoa0FudGlBbGlhcyprQW50aUFsaWFzKQogICAgdmVjNCByZ2JpID0gdmVjNCgwLjApOwogICAgZm9yKGludCBpID0gMCwgaWR4ID0gMDsgaSA8IGtBbnRpQWxpYXM7ICsraSkKICAgIHsKICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwga0FudGlBbGlhczsgKytqLCArK2lkeCkKICAgICAgICB7CiAgICAgICAgICAgIFBDR0luaXRpYWxpc2UoSGFzaE9mKHVpbnQoaWR4KSkpOwogICAgICAgICAgICB2ZWMyIHh5QUEgPSB4eSArIHZlYzIoZmxvYXQoaSkgLyBmbG9hdChrQW50aUFsaWFzKSwgZmxvYXQoaikgLyBmbG9hdChrQW50aUFsaWFzKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZ2JpICs9IFRyYWNlUGF0aCh4eUFBLCBpZHgsIGtOdW1TYW1wbGVzLCBmYWxzZSk7CiAgICAgICAgfQogICAgfSAgICAKICAgIHJnYiArPSByZ2JpLnh5eiAvIGZsb2F0KGtOdW1TYW1wbGVzKTsKICAgIAogICAgcmdiaSA9IHZlYzQoMC4wKTsKICAgICNkZWZpbmUga1ZvbHVtZUFudGlBbGlhcyAyCiAgICAjZGVmaW5lIGtOdW1Wb2x1bWVTYW1wbGVzIChrVm9sdW1lQW50aUFsaWFzKmtWb2x1bWVBbnRpQWxpYXMpCiAgICBmb3IoaW50IGkgPSAwLCBpZHggPSAwOyBpIDwga1ZvbHVtZUFudGlBbGlhczsgKytpKQogICAgewogICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBrVm9sdW1lQW50aUFsaWFzOyArK2osICsraWR4KQogICAgICAgIHsKICAgICAgICAgICAgUENHSW5pdGlhbGlzZShIYXNoT2YodWludChpZHgpKSk7CiAgICAgICAgICAgIHZlYzIgeHlBQSA9IHh5ICsgdmVjMihmbG9hdChpKSAvIGZsb2F0KGtWb2x1bWVBbnRpQWxpYXMpLCBmbG9hdChqKSAvIGZsb2F0KGtWb2x1bWVBbnRpQWxpYXMpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJnYmkgKz0gVHJhY2VQYXRoKHh5QUEsIGlkeCwga051bVZvbHVtZVNhbXBsZXMsIHRydWUpOwogICAgICAgIH0KICAgIH0KICAgIHJnYiArPSByZ2JpLnh5eiAvIGZsb2F0KDkpOwogICAgCiAgICAvL3JnYiA9IG1peChyZ2IsIGtPbmUgLSByZ2IsIHJnYmkudyk7CiAgICAKICAgICNkZWZpbmUga0NvbG91clF1YW50aXNhdGlvbiA0CiAgICAvKnJnYiAqPSBmbG9hdChrQ29sb3VyUXVhbnRpc2F0aW9uKTsKICAgIGlmKGZyYWN0KHJnYi54KSA+IE9yZGVyZWREaXRoZXIoKSkgcmdiLnggKz0gMS4wOwogICAgaWYoZnJhY3QocmdiLnkpID4gT3JkZXJlZERpdGhlcigpKSByZ2IueSArPSAxLjA7CiAgICBpZihmcmFjdChyZ2IueikgPiBPcmRlcmVkRGl0aGVyKCkpIHJnYi56ICs9IDEuMDsKICAgIHJnYiA9IGZsb29yKHJnYikgLyBmbG9hdChrQ29sb3VyUXVhbnRpc2F0aW9uKTsqLwogICAgCiAgICAvLyBHcmFkZQogICAgdmVjMyBoc3YgPSBSR0JUb0hTVihyZ2IpOyAgICAKICAgIGhzdi54ICs9IC1zaW4oKGhzdi54ICsgMC4wNSkgKiBrVHdvUGkpICogMC4wNzsKICAgIGhzdi55ICo9IDEuMDsgICAgCiAgICByZ2IgPSBIU1ZUb1JHQihoc3YpOwogICAgCiAgICAvL3JnYiArPSAwLjEgKiBmbG9hdCgoaW50KHh5LnkpIC8ga1NjcmVlbkRvd25zYW1wbGUpICYgMSk7CiAgICByZ2IgKz0gMC4wNTsKICAgIAogICAgcmdiYSA9IHZlYzQocmdiLCAxLjApOwp9",
					"AQAAAAAAAAABAAAAAAAAAAAAAABUKAAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAjzMAAAAAAAAAAAAAjzMAAAAAAACPMwAAAAAAAAMzAAAjZGVmaW5lIGtDYXB0dXJlTW9kZSAwCgojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3IgdHJ1ZQojZGVmaW5lIGtTcGVjdHJhbEludGVncmF0b3JNb2RlIDEKI2RlZmluZSBrTGFtYmRhU2FtcGxlciAwCgojZGVmaW5lIGtEaWVsZWN0cmljRGlzcGVyc2lvbiAxMC4wCgojZGVmaW5lIGtNQmx1ckdhaW4gICAgICA3LjAKI2RlZmluZSBrTWF4SXRlcmF0aW9ucyAgNAojZGVmaW5lIGtab29tT3JkZXIgICAgICAzCiNkZWZpbmUga0VuZFBhdXNlICAgICAgIDAuMAojZGVmaW5lIGtTcGVlZCAgICAgICAgIDIuNQojZGVmaW5lIGtNYXhEZXB0aCAgICAgICAyCgojZGVmaW5lIGtCYWNrZ3JvdW5kQ29sb3VyIDAuCiNkZWZpbmUga0VkZ2VHYWluIDEuMCAKI2RlZmluZSBrRWRnZUVtcGhhc2lzR2FpbiAwLjAKI2RlZmluZSBrRmFjZUVtcGhhc2lzR2FpbiAwLjAKCiNkZWZpbmUga09yaWdpbkNlbGxIZWFkU3RhcnQgMC4xCiNkZWZpbmUga0N1YmVTaHJpbmsgMC42CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VJbiAwLjA1CiNkZWZpbmUga0N1YmVTY2FsZUVhc2VPdXQgMC4yNQoKI2RlZmluZSBrU2t5bGlnaHRGbG9vciAwLgogICAgI2RlZmluZSBrU2t5bGlnaHRDZWlsIDEuMAogICAgI2RlZmluZSBrU2t5bGlnaHRHYWluQSAxLjAKICAgICNkZWZpbmUga1NreWxpZ2h0R2FpbkIgMS4wCiAgICAjZGVmaW5lIGtTa3lsaWdodEZyZXFBIDUuMAogICAgI2RlZmluZSBrU2t5bGlnaHRGcmVxQiAyMC4wCiAgICAjZGVmaW5lIGtTa3lsaWdodE5vcm1hbEEgdmVjMygxLjAsIDAuMCwgMC4wKQogICAgI2RlZmluZSBrU2t5bGlnaHROb3JtYWxCIHZlYzMoMC4wLCAtMS4wLCAwLjApCiAgICAjZGVmaW5lIGtTa3lsaWdodEhhcmRuZXNzIDUuMAogICAgI2RlZmluZSBrRW52aXJvbm1lbnRSYWRpdXMgMi4wCiNkZWZpbmUga1Rlc3RTa3lsaWdodCBmYWxzZQoKI2lmIGtDYXB0dXJlTW9kZSA9PSAxCiAgICAjZGVmaW5lIGtDYXB0dXJlVGltZURlbGF5IDEwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgKDEwLjAgLyA2MC4wKQojZWxzZQogICAgI2RlZmluZSBrQ2FwdHVyZVRpbWVEZWxheSAwLjAKICAgICNkZWZpbmUga0NhcHR1cmVUaW1lU3BlZWQgMS4wCiNlbmRpZgoKI2lmIGtDbGlwVmlldyA9PSAwCiAgICAjZGVmaW5lIGtTdGVybm9ncmFwaGljU2NhbGUgMS4xCiAgICAjZGVmaW5lIGtWaWV3U2NhbGUgMS4KI2Vsc2UKICAgICNkZWZpbmUga1N0ZXJub2dyYXBoaWNTY2FsZSAxLjMKICAgICNkZWZpbmUga1ZpZXdTY2FsZSAwLjI1CiNlbmRpZgoKdmVjMyBTa3lsaWdodCh2ZWMzIG4pCnsKICAgIGZsb2F0IHRoZXRhQSA9IGFjb3MoZG90KG4sIG5vcm1hbGl6ZShrU2t5bGlnaHROb3JtYWxBKSkpOwogICAgZmxvYXQgdGhldGFCID0gYWNvcyhkb3Qobiwgbm9ybWFsaXplKGtTa3lsaWdodE5vcm1hbEIpKSk7ICAgIAogICAgCiAgICBmbG9hdCB2ID0gKGtTa3lsaWdodEdhaW5BICogY29zMDEoa1NreWxpZ2h0RnJlcUEgKiB0aGV0YUEpICsga1NreWxpZ2h0R2FpbkIgKiBzaW4wMShrU2t5bGlnaHRGcmVxQiAqIHRoZXRhQikpIC8gKGtTa3lsaWdodEdhaW5BICsga1NreWxpZ2h0R2FpbkIpOwogICAgCiAgICByZXR1cm4gdmVjMyhtaXgoa1NreWxpZ2h0Rmxvb3IsIGtTa3lsaWdodENlaWwsIHBvdyhzYXR1cmF0ZSh2ICoga1NreWxpZ2h0SGFyZG5lc3MgLSAoMC41ICogKGtTa3lsaWdodEhhcmRuZXNzIC0gMS4wKSkpLCAxLjApKSk7Cn0KCnZlYzMgU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUoUmF5QmFzaWMgcmF5LCB2ZWMzIHRpbWUsIGZsb2F0IHJhZGl1cykKewogICAgZmxvYXQgYSA9IGRvdChyYXkuZCwgcmF5LmQpOwogICAgZmxvYXQgYiA9IDIuMCAqIGRvdChyYXkuZCwgcmF5Lm8pOwogICAgZmxvYXQgYyA9IGRvdChyYXkubywgcmF5Lm8pIC0gc3FyKHJhZGl1cyk7CgogICAgZmxvYXQgdDAsIHQxOwogICAgaWYgKCFRdWFkcmF0aWNTb2x2ZShhLCBiLCBjLCB0MCwgdDEpKSB7IHJldHVybiBrWmVybzsgfQoKICAgIHZlYzMgbiA9IG5vcm1hbGl6ZShyYXkubyArIHJheS5kICogKCh0MCA+IDAuMCkgPyB0MCA6IHQxKSk7CiAgICAKICAgIHJldHVybiBTa3lsaWdodChuKTsKfQoKdm9pZCBTYW1wbGVQZXJmZWN0U3BlY3VsYXIoaW5vdXQgUmF5IHJheSwgaW4gSGl0Q3R4IGhpdCkKewogICAgdmVjMyByID0gcmVmbGVjdChyYXkub2QuZCwgaGl0Lm4pOwogICAgCiAgICByYXkub2QubyA9IHJheS5vZC5vICsgcmF5Lm9kLmQgKiByYXkudE5lYXIgKyBoaXQubiAqIGhpdC5raWNrb2ZmOwogICAgcmF5Lm9kLmQgPSByOyAgCn0KCgpmbG9hdCBDYXVjaHlQREYoZmxvYXQgeCwgZmxvYXQgRCkKewogICAgcmV0dXJuIDEuMCAvIChrUGkgKiBEICogKDEuMCArIHNxcih4IC8gRCkpKTsKfQoKZmxvYXQgQ2F1Y2h5Q0RGKGZsb2F0IHgsIGZsb2F0IEQpCnsKICAgIHJldHVybiBrSW52UGkgKiBhdGFuKHggLyBEKSArIDAuNTsKfQoKdm9pZCBFcXVpYW5ndWxhclNhbXBsZShpbiBmbG9hdCBMMCwgaW4gZmxvYXQgTDEsIGluIGZsb2F0IEQsIGluIGZsb2F0IHhpLCBvdXQgZmxvYXQgdEVxdWksIG91dCBmbG9hdCBwZGYpCnsKICAgIGZsb2F0IGNkZjAgPSBDYXVjaHlDREYoTDAsIEQpOwogICAgZmxvYXQgY2RmMSA9IENhdWNoeUNERihMMSwgRCk7CiAgICB0RXF1aSA9IHRhbigobWl4KGNkZjAsIGNkZjEsIHhpKSAtIDAuNSkgKiBrUGkpICogRDsKICAgICAgICAKICAgIC8vdEVxdWkgPSAoeCAtIEwwKSAvIChMMSAtIEwwKTsKICAgIHBkZiA9IENhdWNoeVBERigodEVxdWkgLSBMMCkgLyAoTDEgLSBMMCksIEQpIC8gbWF4KDFlLTEwLCBjZGYxIC0gY2RmMCk7Cn0KCmJvb2wgVHJhY2VXYXZlZnJvbnQoaW5vdXQgUmF5IHJheSwgb3V0IHZlYzQgTCwgdmVjMyB0aW1lLCBpbnQgZGVwdGgsIGludCBzYW1wbGVJZHgsIGludCBtYXhTYW1wbGVzLCBib29sIGlzVm9sdW1lUGFzcykKeyAgIAogICAgLyppZihkZXB0aCA9PSBrTWF4RGVwdGgpCiAgICB7CiAgICAgICAgTC54eXogKz0gU2FtcGxlRW52aXJvbm1lbnRTcGhlcmUocmF5Lm9kLCB0aW1lKSAqIHJheS53ZWlnaHQ7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSAqLyAgIAogICAKICAgIC8vZmxvYXQgcGhpID0gbWF4KDAuMCwgc2luKGtQaSAqIChmbG9vcih0aW1lLnkpICsgUGFkZGVkU21vb3RoU3RlcCh0aW1lLnosIDAuMCwgMS4wKSkgLyBmbG9hdChrQ2xvc2VkSW50ZXJ2YWwgKyAxKSkpOwogICAgZmxvYXQgcGhpID0gS2lja0Ryb3AodGltZS55LCB2ZWMyKDAuMCwgMC4wKSwgdmVjMigwLjUsIDEuMCksIHZlYzIoa0Nsb3NlZEludGVydmFsIC0gMywgMC43KSwgdmVjMihrQ2xvc2VkSW50ZXJ2YWwsIDAuMCkpOwogICAgZmxvYXQgdGhldGEgPSBrVHdvUGkgKiAyLjAgLyAzLjAgKiB0aW1lLnggLyBmbG9hdChrTnVtSW50ZXJ2YWxzKTsKICAgIGZsb2F0IGFscGhhID0gS2lja0Ryb3AodGltZS55LCB2ZWMyKDAuMCwgMC4wKSwgdmVjMigwLjUsIDEuMCksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzIoZmxvYXQoa0Nsb3NlZEludGVydmFsKSwgMS4wKSwgdmVjMihmbG9hdChrQ2xvc2VkSW50ZXJ2YWwpICsgMC41LCAwLjApKTsKICAgIC8vZmxvYXQgaml0dGVyID0gYWxwaGEgKiAwLjggKiAoMS4wICsgMC4yICogc2luKHRpbWUueCAqIDIwLjApKTsKICAgIAogICAgaW50IG1hdElEID0gLTE7CiAgICB2ZWMyIHNkZk5lYXIgPSB2ZWMyKGtGbHRNYXgpOwogICAgVHJhbnNmb3JtIHRyYW5zZm9ybTsKICAgIEhpdEN0eCBoaXQ7CiAgICByYXkudE5lYXIgPSBrRmx0TWF4OwogICAgCiAgICB0cmFuc2Zvcm0gPSBDb21wb3VuZFRyYW5zZm9ybSh2ZWMzKDAuMCksIHZlYzMoMC4wLCB0aGV0YSwga0hhbGZQaSksIDEuMSk7CiAgICBpZihSYXlTaW1wbGV4U0RGKHJheSwgc2RmTmVhciwgaGl0LCB0cmFuc2Zvcm0sIG1peCgwLjIsIDEuNSwgcGhpKSwgaW50KHRpbWUueSksIHRpbWUueikpIHsgbWF0SUQgPSAwOyB9ICAgICAgICAgIAogICAgICAgIAogICAgaWYoIWlzVm9sdW1lUGFzcyB8fCBkZXB0aCA9PSAxKQogICAgewogICAgICAgIHRyYW5zZm9ybSA9IENvbXBvdW5kVHJhbnNmb3JtKHZlYzMoMC4wKSwgdmVjMygwLjAsIHRoZXRhLCBrSGFsZlBpKSwgLjgpOwogICAgICAgIGlmKFJheVNpbXBsZXhTREYocmF5LCBzZGZOZWFyLCBoaXQsIHRyYW5zZm9ybSwgMC4wLCBpbnQodGltZS55KSwgdGltZS56KSkgeyBtYXRJRCA9IDE7IH0KICAgIH0KICAgCiAgICAvL0wueHl6ICs9IGhpdC5uOyByZXR1cm4gZmFsc2U7CiAgICAKICAgICNkZWZpbmUga0V4dGluY3Rpb24gMC4xCiAgICBpZihpc1ZvbHVtZVBhc3MpCiAgICB7CiAgICAgICAgaWYoKHJheS5mbGFncyAmIGtGbGFnc0RpcmVjdFJheSkgIT0gMHUpCiAgICAgICAgewogICAgICAgICAgICBmbG9hdCBkaXN0VG9MaWdodCA9IGxlbmd0aDIocmF5Lm9kLm8pOwogICAgICAgICAgICBpZihtYXRJRCAhPSAtMSAmJiBzcXIocmF5LnROZWFyKSA8IGRpc3RUb0xpZ2h0KSB7IHJldHVybiBmYWxzZTsgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIEwueHl6ICs9IHJheS53ZWlnaHQ7IHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGlmKHNxcihzZGZOZWFyLnkpID4gZGlzdFRvTGlnaHQpCiAgICAgICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0OwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBMLnh5eiArPSByYXkud2VpZ2h0ICogbWluKDEuMCwgMi4wICogc3FydChhYnMoc2RmTmVhci54KSAvIHNkZk5lYXIueSkpOwoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZmxvYXQgeGkgPSAoZmxvYXQoc2FtcGxlSWR4KSArIFJhbmQoaUNoYW5uZWwwKS54KSAvIGZsb2F0KG1heFNhbXBsZXMpOwogICAgICAgIGZsb2F0IHRQZXJwID0gbWF4KDAuMCwgLWRvdChyYXkub2QubywgcmF5Lm9kLmQpKTsKICAgICAgICBmbG9hdCB0Vm9sdW1lLCBwZGZDYXVjaHk7CiAgICAgICAgZmxvYXQgdERlcHRoID0gKG1hdElEID09IC0xKSA/IDUuMCA6IHJheS50TmVhcjsKICAgICAgICBmbG9hdCBEID0gbWF4KDAuMSwgbGVuZ3RoKFJheVBvaW50QXQocmF5LCB0UGVycCkpKTsKICAgICAgICAKICAgICAgICBFcXVpYW5ndWxhclNhbXBsZSgtdFBlcnAsIHREZXB0aCAtIHRQZXJwLCBELCB4aSwgdFZvbHVtZSwgcGRmQ2F1Y2h5KTsgICAgICAgIAogICAgICAgIHRWb2x1bWUgKz0gdFBlcnA7CgogICAgICAgIHJheS5vZC5vID0gcmF5Lm9kLm8gKyByYXkub2QuZCAqIHRWb2x1bWU7CiAgICAgICAgLy9yYXkub2QuZCA9IFNhbXBsZVVuaXRTcGhlcmUoeGkueXopOwogICAgICAgIGZsb2F0IGRpc3RUb0xpZ2h0ID0gbGVuZ3RoKHJheS5vZC5vKTsKICAgICAgICByYXkub2QuZCA9IC1yYXkub2QubyAvIGRpc3RUb0xpZ2h0OwogICAgICAgIHJheS5mbGFncyA9IGtGbGFnc0RpcmVjdFJheTsKICAgICAgICByYXkud2VpZ2h0ICo9IDMuMCAqICgxLjAgLyBtYXgoMS4wLCBzcXIoZGlzdFRvTGlnaHQpKSkgKiBleHAoLXRWb2x1bWUgKiBrRXh0aW5jdGlvbikgKiBrRXh0aW5jdGlvbiAvIHBkZkNhdWNoeTsKICAgICAgICAKICAgICAgICBmbG9hdCBhcmMgPSAwLjQgKiAodGhldGEgKyBhdGFuKHJheS5vZC5kLnksIHJheS5vZC5kLnopICsgYWNvcygocmF5Lm9kLmQueCA+IDAuMCkgPyBzcXIocmF5Lm9kLmQueCkgOiAoLXNxcigtcmF5Lm9kLmQueCkpKSk7CiAgICAgICAgcmF5LndlaWdodCA9IHBvdyhyYXkud2VpZ2h0ICogSHVlKGZyYWN0KGFyYykpLCB2ZWMzKDAuOCkpOwogICAgICAgIC8vcmF5LndlaWdodCAqPSAwLjU7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAgICAgIAogICAgfQogICAgCiAgICAKICAgIGlmKG1hdElEID09IC0xKQogICAgewogICAgICAgIGlmKGRlcHRoICE9IDEpeyBMLnh5eiArPSBTYW1wbGVFbnZpcm9ubWVudFNwaGVyZShyYXkub2QsIHRpbWUsIG1peCgxMC4wLCAyLjAsIHBoaSkpICogcmF5LndlaWdodDsgfQogICAgICAgIGVsc2UgeyBMLnh5eiArPSBrT25lICoga0JhY2tncm91bmRDb2xvdXI7IH0KICAgICAgICByZXR1cm4gZmFsc2U7IAogICAgfSAgIAogICAgCiAgICByYXkud2VpZ2h0ICo9IG1peCgwLjMsIDEuMCwgc3FydChwaGkpKTsKICAgIAogICAgLy9yYXkud2VpZ2h0ICo9IGV4cCgtcmF5LnROZWFyICoga0V4dGluY3Rpb24pOwogICAgCiAgICAvL3JheS53ZWlnaHQgKj0gYWxwaGE7CiAgICAvKkwueHl6ICs9IChkb3QoLW5vcm1hbGl6ZShyYXkub2QuZCksIGhpdC5uKSkgKiAoMS4wIC0gc3FydChwaGkpKSAqIDAuMjsgCiAgICBpZihhbHBoYSA9PSAwLjApIHsgcmV0dXJuIGZhbHNlOyB9Ki8KICAgIAogICAgc3dpdGNoKG1hdElEKQogICAgewogICAgY2FzZSAwOgogICAgICAgIFNhbXBsZVBlcmZlY3RTcGVjdWxhcihyYXksIGhpdCk7CiAgICAgICAgLy9yYXkud2VpZ2h0ICo9IHNxcnQocGhpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIGNhc2UgMTogIAogICAgICAgIEwueHl6ICs9IHJheS53ZWlnaHQgKiAxLjA7CiAgICB9CiAgICAKICAgIHJldHVybiBmYWxzZTsKICAgIAp9Cgp2ZWM0IFRyYWNlUGF0aCh2ZWMyIHV2U2NyZWVuLCBpbnQgc2FtcGxlSWR4LCBpbnQgbWF4U2FtcGxlcywgYm9vbCBpc1ZvbHVtZVBhc3MpCnsKICAgIC8vIFNhbXBsZSB0aGUgc3BlY3RydW0KICAgIGZsb2F0IHhpID0gKGZsb2F0KHNhbXBsZUlkeCkgKyBSYW5kKGlDaGFubmVsMCkueCkgLyBmbG9hdChtYXhTYW1wbGVzKTsgICAgCiAgICBmbG9hdCBsYW1iZGEgPSBtaXgoMzgwMC4wLCA3MDAwLjAsIHhpKTsKICAgIAogICAgLy8gQ29uZmlndXJlIHRoZSB0aW1lCiAgICB2ZWMzIHRpbWU7CiAgICB0aW1lLnggPSBtYXgoMC4wLCBpVGltZSAtIGtDYXB0dXJlVGltZURlbGF5KTsgICAgCiAgICBmbG9hdCB0aW1lU3ViU2FtcGxlID0gMS4wIC8gNjAuMCAqIHhpICoga01CbHVyR2FpbjsKICAgIHRpbWUueCA9ICh0aW1lLnggKiBrQ2FwdHVyZVRpbWVTcGVlZCArIHRpbWVTdWJTYW1wbGUpICoga1NwZWVkOwogICAgdGltZS55ID0gbW9kKHRpbWUueCwgZmxvYXQoa051bUludGVydmFscykpOwogICAgdGltZS56ID0gZnJhY3QodGltZS54KTsgIAogICAgCiAgICB2ZWMyIHV2VmlldyA9IFRyYW5zZm9ybVNjcmVlblRvV29ybGQodXZTY3JlZW4pOwogICAgCiAgICBpZighSW52ZXJzZVN0ZXJub2dyYXBoKHV2Vmlldywga1N0ZXJub2dyYXBoaWNTY2FsZSkpIHsgcmV0dXJuIHZlYzQoMC4wKTsgfSAKICAgIAogICAgLy8gQ3JlYXRlIGEgbmV3IGNhbWVyYSByYXkgYW5kIHN0b3JlIHRoZSBzYW1wbGVkIHdhdmVsZW5ndGggKHdlIHJldXNlIHRoZSBzYW1lIHJheSBhdCBlYWNoIGJvdW5jZSkgICAKICAgIFJheSBjYW1lcmFSYXkgPSBDcmVhdGVPcnRob2dyYXBoaWNDYW1lcmFSYXkodXZWaWV3LCB2ZWMyKDEuNzMyMDUwOCkgKiAxLjUsIHZlYzMoMi4wKSwgdmVjMygwLjApKTsgICAKICAgIC8vY2FtZXJhUmF5LmxhbWJkYSA9IGxhbWJkYTsKICAgIAogICAgLy8gSW50ZXJhdGl2ZWx5IHNhbXBsZSB0aGUgcGF0aAogICAgdmVjNCBMID0gdmVjNCgwLjApOwogICAgZm9yKGludCBkZXB0aCA9IDA7IGRlcHRoIDwga01heERlcHRoOyBkZXB0aCsrKQogICAgewogICAgICAgIC8vIFBhc3NpbmcgUmF5IHN0cnVjdHVyZXMgYnkgcmVmZXJlbmNlIGJyZWFrcyB0aGUgc2hhZGVyIG9uIE1hY3MuIFRoaXMgZXhwbGFpbnMKICAgICAgICAvLyB0aGUgY2x1bmt5IGFwcHJvYWNoIHRvIHJldHVybmluZyBleHRhbnQgcmF5cyBieSB2YWx1ZS4KICAgICAgICBpZighVHJhY2VXYXZlZnJvbnQoY2FtZXJhUmF5LCBMLCB0aW1lLCBkZXB0aCArIDEsIHNhbXBsZUlkeCwgbWF4U2FtcGxlcywgaXNWb2x1bWVQYXNzKSkKICAgICAgICB7ICAgICAgICAKICAgICAgICAgICBpZihkZXB0aCA9PSAwKSB7IHJldHVybiBMOyB9CiAgICAgICAgICAgIGJyZWFrOyAKICAgICAgICB9CiAgICB9CiAgICAgIAogICAgaWYoa1NwZWN0cmFsSW50ZWdyYXRvciAmJiAhaXNWb2x1bWVQYXNzKQogICAgeyAgCiAgICAgICAgTC54eXogKj0gU2FtcGxlU3BlY3RydW0obGFtYmRhKTsKICAgICAgICAvL0wueHl6ICo9IEh1ZSh4aSkgKiAyLjsKICAgIH0KICAgCiAgICByZXR1cm4gTDsKfQoKCnZlYzIgSW50ZXJmZXJlKHZlYzIgeHkpCnsKICAgICNkZWZpbmUga1N0YXRpYyB0cnVlCiAgICAjZGVmaW5lIGtTdGF0aWNGcmVxdWVuY3kgMC4wMgogICAgI2RlZmluZSBrU3RhdGljTG93TWFnbml0dWRlIDAuMDA1CiAgICAjZGVmaW5lIGtTdGF0aWNIaWdoTWFnbml0dWRlIDAuMDA1CiAgICAKICAgICNkZWZpbmUga1ZEaXNwbGFjZSB0cnVlCiAgICAjZGVmaW5lIGtWRGlzcGxhY2VGcmVxdWVuY3kgMC4wNgogICAgCiAgICAjZGVmaW5lIGtIRGlzcGxhY2UgdHJ1ZQogICAgI2RlZmluZSBrSERpc3BsYWNlRnJlcXVlbmN5IDAuMTQKICAgICNkZWZpbmUga0hEaXNwbGFjZVZNYWduaXR1ZGUgMC4wNQogICAgI2RlZmluZSBrSERpc3BsYWNlSE1hZ25pdHVkZSAwLjMKICAgIAogICAgZmxvYXQgZnJhbWVIYXNoID0gSGFzaFRvRmxvYXQoSGFzaE9mKHVpbnQoaUZyYW1lIC8gaW50KDEwLjAgLyBrQ2FwdHVyZVRpbWVTcGVlZCkpKSk7CiAgICAKICAgIGlmKGtTdGF0aWMpCiAgICB7CiAgICAgICAgLy8gRXZlcnkgbm93IGFuZCB0aGVuLCBhZGQgYSB0b24gb2Ygc3RhdGljCiAgICAgICAgZmxvYXQgaW50ZXJQID0gMC4wMSwgZGlzcGxhY2VtZW50ID0gaVJlc29sdXRpb24ueCAqIGtTdGF0aWNMb3dNYWduaXR1ZGU7CiAgICAgICAgaWYoZnJhbWVIYXNoIDwga1N0YXRpY0ZyZXF1ZW5jeSkKICAgICAgICB7CiAgICAgICAgICAgIGludGVyUCA9IDAuNTsKICAgICAgICAgICAgZGlzcGxhY2VtZW50ID0ga1N0YXRpY0hpZ2hNYWduaXR1ZGUgKiBpUmVzb2x1dGlvbi54OwogICAgICAgIH0KCiAgICAgICAgLy8gQ1JUIGludGVyZmVyZW5jZSBhdCBQQUwgcmVmcmVzaCByYXRlIAogICAgICAgIFBDR0luaXRpYWxpc2UoSGFzaE9mKHVpbnQoeHkueSksIHVpbnQoaUZyYW1lIC8gaW50KDYwLjAgLyAoMjQuMCAqIGtDYXB0dXJlVGltZVNwZWVkKSkpKSk7CiAgICAgICAgdmVjNCB4aSA9IFJhbmQoKTsKICAgICAgICBpZih4aS54IDwgaW50ZXJQKSAKICAgICAgICB7ICAKICAgICAgICAgICAgZmxvYXQgbWFnID0gbWl4KC0xLjAsIDEuMCwgeGkueSk7ICAgICAgICAKICAgICAgICAgICAgeHkueCAtPSBkaXNwbGFjZW1lbnQgKiBzaWduKG1hZykgKiBzcXIoYWJzKG1hZykpOyAKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIFZlcnRpY2FsIGRpc3BsYWNtZW50CiAgICBpZihrVkRpc3BsYWNlICYmIGZyYW1lSGFzaCA+IDEuMCAtIGtWRGlzcGxhY2VGcmVxdWVuY3kpCiAgICB7CiAgICAgICAgZmxvYXQgZGlzcFggPSBIYXNoVG9GbG9hdChIYXNoT2YoODc4M3UsIHVpbnQoaUZyYW1lIC8gaW50KDEwLjAgLyBrQ2FwdHVyZVRpbWVTcGVlZCkpKSk7CiAgICAgICAgZmxvYXQgZGlzcFkgPSBIYXNoVG9GbG9hdChIYXNoT2YoMzY0NzE5dSwgdWludChpRnJhbWUgLyBpbnQoMTIuMCAvIGtDYXB0dXJlVGltZVNwZWVkKSkpKTsKICAgICAgICAKICAgICAgICBpZih4eS55IDwgZGlzcFggKiBpUmVzb2x1dGlvbi55KSAKICAgICAgICB7IAogICAgICAgICAgICB4eS55IC09IG1peCgtMS4wLCAxLjAsIGRpc3BZKSAqIGlSZXNvbHV0aW9uLnkgKiAwLjI7IAogICAgICAgIH0KICAgIH0KICAgIC8vIEhvcml6b250YWwgZGlzcGxhY21lbnQKICAgIGVsc2UgaWYoa0hEaXNwbGFjZSAmJiBmcmFtZUhhc2ggPiAxLjAgLSBrSERpc3BsYWNlRnJlcXVlbmN5IC0ga1ZEaXNwbGFjZUZyZXF1ZW5jeSkKICAgIHsKICAgICAgICBmbG9hdCBkaXNwWCA9IEhhc2hUb0Zsb2F0KEhhc2hPZigxNDcyNTF1LCB1aW50KGlGcmFtZSAvIGludCg5LjAgLyBrQ2FwdHVyZVRpbWVTcGVlZCkpKSk7CiAgICAgICAgZmxvYXQgZGlzcFkgPSBIYXNoVG9GbG9hdChIYXNoT2YoMjg3NTEydSwgdWludChpRnJhbWUgLyBpbnQoMTEuMCAvIGtDYXB0dXJlVGltZVNwZWVkKSkpKTsKICAgICAgICBmbG9hdCBkaXNwWiA9IEhhc2hUb0Zsb2F0KEhhc2hPZig4NzU2MTIzdSwgdWludChpRnJhbWUgLyBpbnQoNy4wIC8ga0NhcHR1cmVUaW1lU3BlZWQpKSkpOwogICAgICAgIAogICAgICAgIGlmKHh5LnkgPiBkaXNwWCAqIGlSZXNvbHV0aW9uLnkgJiYgeHkueSA8IChkaXNwWCArIG1peCgwLjAsIGtIRGlzcGxhY2VWTWFnbml0dWRlLCBkaXNwWikpICogaVJlc29sdXRpb24ueSkgCiAgICAgICAgeyAKICAgICAgICAgICAgeHkueCAtPSBtaXgoLTEuMCwgMS4wLCBkaXNwWSkgKiBpUmVzb2x1dGlvbi54ICoga0hEaXNwbGFjZUhNYWduaXR1ZGU7IAogICAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIHh5Owp9Cgp2b2lkIG1haW5JbWFnZSggb3V0IHZlYzQgcmdiYSwgaW4gdmVjMiB4eSApCnsgICAgCiAgICBpZihrVGVzdFNreWxpZ2h0KQogICAgewogICAgICAgIHZlYzMgbiA9IHZlYzMoY29zKGtUd29QaSAqIHh5LnggLyBpUmVzb2x1dGlvbi54KSAqIHNpbihrUGkgKiB4eS55IC8gaVJlc29sdXRpb24ueSksIAogICAgICAgICAgICAgICAgICAgICAgc2luKGtUd29QaSAqIHh5LnggLyBpUmVzb2x1dGlvbi54KSAqIHNpbihrUGkgKiB4eS55IC8gaVJlc29sdXRpb24ueSksIAogICAgICAgICAgICAgICAgICAgICAgY29zKGtQaSAqIHh5LnkgLyBpUmVzb2x1dGlvbi55KSk7CiAgICAgICAgcmdiYS54eXogPSBTa3lsaWdodChuKTsKICAgICAgICByZ2JhLncgPSAxLjA7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAKICAgIGlmKHh5LnggPiBpUmVzb2x1dGlvbi54IC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpIHx8IHh5LnkgPiBpUmVzb2x1dGlvbi55IC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpKSB7IHJldHVybjsgfQogICAgCiAgICBpZigoeHkueCAtIChpUmVzb2x1dGlvbi54ICogMC41KSkgPiBpUmVzb2x1dGlvbi55ICogMC41KSB7IHJldHVybjsgfQogICAgCiAgICBTZXRHbG9iYWxzKHh5LCBpUmVzb2x1dGlvbi54eSk7CiAgICAKICAgIC8vaWYoIUlzVGV4ZWxJbkNsaXBSZWdpb24oeHkpKSB7IHJldHVybjsgfQogICAgICAgIAogICAgeHkgKj0gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpOwogICAgdmVjMyByZ2IgPSBrWmVybzsKICAgIHZlYzQgcmdiaSA9IHZlYzQoMC4wKTsgICAgCiAgICAKICAgICNkZWZpbmUga0dlb21ldHJ5UGFzcwogICAgI2RlZmluZSBrVm9sdW1lUGFzcwogICAgI2RlZmluZSBrSW50ZXJmZXJlbmNlIHRydWUKICAgIAogICAgdmVjMiB4eUludGVyZmVyZSA9IHh5Oy8vKGtJbnRlcmZlcmVuY2UpID8gSW50ZXJmZXJlKHh5KSA6IHh5OyAgIAogICAgCiAgICAjaWZkZWYga0dlb21ldHJ5UGFzcyAgICAKICAgICAgICAjZGVmaW5lIGtBbnRpQWxpYXMgMwogICAgICAgICNkZWZpbmUga051bVNhbXBsZXMgKGtBbnRpQWxpYXMqa0FudGlBbGlhcykKICAgICAgIAogICAgICAgIGZvcihpbnQgaSA9IDAsIGlkeCA9IDA7IGkgPCBrQW50aUFsaWFzOyArK2kpCiAgICAgICAgewogICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwga0FudGlBbGlhczsgKytqLCArK2lkeCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUENHSW5pdGlhbGlzZShIYXNoT2YodWludChpZHgpKSk7CiAgICAgICAgICAgICAgICB2ZWMyIHh5QUEgPSB4eUludGVyZmVyZSArIHZlYzIoZmxvYXQoaSkgLyBmbG9hdChrQW50aUFsaWFzKSwgZmxvYXQoaikgLyBmbG9hdChrQW50aUFsaWFzKSk7CgogICAgICAgICAgICAgICAgcmdiaSArPSBUcmFjZVBhdGgoeHlBQSwgaWR4LCBrTnVtU2FtcGxlcywgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSAgICAKICAgICAgICByZ2IgKz0gcmdiaS54eXogLyBmbG9hdChrTnVtU2FtcGxlcyk7CiAgICAjZW5kaWYKICAgIAogICAgI2lmZGVmIGtWb2x1bWVQYXNzCiAgICAgICAgcmdiaSA9IHZlYzQoMC4wKTsKICAgICAgICAjZGVmaW5lIGtWb2x1bWVBbnRpQWxpYXMgMgogICAgICAgICNkZWZpbmUga051bVZvbHVtZVNhbXBsZXMgKGtWb2x1bWVBbnRpQWxpYXMqa1ZvbHVtZUFudGlBbGlhcykKICAgICAgICBmb3IoaW50IGkgPSAwLCBpZHggPSAwOyBpIDwga1ZvbHVtZUFudGlBbGlhczsgKytpKQogICAgICAgIHsKICAgICAgICAgICAgZm9yKGludCBqID0gMDsgaiA8IGtWb2x1bWVBbnRpQWxpYXM7ICsraiwgKytpZHgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBDR0luaXRpYWxpc2UoSGFzaE9mKHVpbnQoaWR4KSkpOwogICAgICAgICAgICAgICAgdmVjMiB4eUFBID0geHlJbnRlcmZlcmUgKyB2ZWMyKGZsb2F0KGkpIC8gZmxvYXQoa1ZvbHVtZUFudGlBbGlhcyksIGZsb2F0KGopIC8gZmxvYXQoa1ZvbHVtZUFudGlBbGlhcykpOwoKICAgICAgICAgICAgICAgIHJnYmkgKz0gVHJhY2VQYXRoKHh5QUEsIGlkeCwga051bVZvbHVtZVNhbXBsZXMsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJnYiArPSByZ2JpLnh5eiAvIGZsb2F0KGtOdW1Wb2x1bWVTYW1wbGVzKTsKICAgICNlbmRpZgogICAgCiAgICAvL3JnYiA9IG1peChyZ2IsIGtPbmUgLSByZ2IsIHJnYmkudyk7CiAgICAKICAgICNkZWZpbmUga0NvbG91clF1YW50aXNhdGlvbiA0CiAgICAvKnJnYiAqPSBmbG9hdChrQ29sb3VyUXVhbnRpc2F0aW9uKTsKICAgIGlmKGZyYWN0KHJnYi54KSA+IE9yZGVyZWREaXRoZXIoKSkgcmdiLnggKz0gMS4wOwogICAgaWYoZnJhY3QocmdiLnkpID4gT3JkZXJlZERpdGhlcigpKSByZ2IueSArPSAxLjA7CiAgICBpZihmcmFjdChyZ2IueikgPiBPcmRlcmVkRGl0aGVyKCkpIHJnYi56ICs9IDEuMDsKICAgIHJnYiA9IGZsb29yKHJnYikgLyBmbG9hdChrQ29sb3VyUXVhbnRpc2F0aW9uKTsqLwogICAgCiAgICAvLyBHcmFkZQogICAgdmVjMyBoc3YgPSBSR0JUb0hTVihyZ2IpOyAgICAKICAgIGhzdi54ICs9IC1zaW4oKGhzdi54ICsgMC4wKSAqIGtUd29QaSkgKiAwLjE1OwogICAgaHN2LnkgKj0gMS4wOyAgICAKICAgIHJnYiA9IEhTVlRvUkdCKGhzdik7CiAgICAKICAgIC8vcmdiICs9IDAuMSAqIGZsb2F0KChpbnQoeHkueSkgLyBrU2NyZWVuRG93bnNhbXBsZSkgJiAxKTsKICAgIHJnYiArPSAwLjA1OwogICAgCiAgICByZ2JhID0gdmVjNChyZ2IsIDEuMCk7Cn0",
					"AQAAAAAAAAABAAAAAAAAAAAAAAADMwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "examples/shadertoy/simplex/Common.glsl",
			"settings":
			{
				"buffer_size": 28047,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					15,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAimYAAAAAAAAAAAAAimYAAAAAAACKZgAAAAAAAPtmAAAjZGVmaW5lIGtDbGlwVmlldyAwCiNkZWZpbmUga1JldHJvTW9kZSAwCgojaWYga1JldHJvTW9kZSA9PSAxCiAgICAjZGVmaW5lIGtTY3JlZW5Eb3duc2FtcGxlIDIKICAgICNkZWZpbmUga0ludGVyZmVyZW5jZSBmYWxzZQojZWxzZQogICAgI2RlZmluZSBrU2NyZWVuRG93bnNhbXBsZSAyCiAgICAjZGVmaW5lIGtJbnRlcmZlcmVuY2UgZmFsc2UKI2VuZGlmCgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vIEdsb2JhbCB2YXJpYWJsZXMKCnZlYzIgZ1Jlc29sdXRpb247CnZlYzIgZ0ZyYWdDb29yZDsKdXZlYzQgcm5nU2VlZDsKZmxvYXQgZ0R4eUR1djsKCnZvaWQgU2V0R2xvYmFscyh2ZWMyIGZyYWdDb29yZCwgdmVjMiByZXNvbHV0aW9uKQp7CiAgICBnRnJhZ0Nvb3JkID0gZnJhZ0Nvb3JkOwogICAgZ1Jlc29sdXRpb24gPSByZXNvbHV0aW9uOwogICAgCiAgICAgLy8gRmlyc3QgZGVyaXZhdGl2ZSBvZiBzY3JlZW4gdG8gd29ybGQgc3BhY2UgKGFzc3VtaW5nIHNxdWFyZSBwaXhlbHMpCiAgICBnRHh5RHV2ID0gMS4wIC8gZ1Jlc29sdXRpb24ueDsKfQoKYm9vbCBJc1RleGVsSW5DbGlwUmVnaW9uKHZlYzIgeHkpCnsKI2lmIGtDbGlwVmlldyA9PSAxCiAgICByZXR1cm4gKGFicyh4eS54IC0gKGdSZXNvbHV0aW9uLnggLyAyLjApKSA8IGdSZXNvbHV0aW9uLnkgLyAyLjApOwojZWxzZQogICAgcmV0dXJuIHRydWU7CiNlbmRpZgp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIE1hdGggZnVuY3Rpb25zCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCiNkZWZpbmUga1BpICAgICAgICAgICAgICAgICAgICAzLjE0MTU5MjY1MzU5CiNkZWZpbmUga0ludlBpICAgICAgICAgICAgICAgICAoMS4wIC8gMy4xNDE1OTI2NTM1OSkKI2RlZmluZSBrVHdvUGkgICAgICAgICAgICAgICAgICgyLjAgKiBrUGkpCiNkZWZpbmUga0hhbGZQaSAgICAgICAgICAgICAgICAoMC41ICoga1BpKQojZGVmaW5lIGtSb290MiAgICAgICAgICAgICAgICAgMS40MTQyMTM1NjIzNwojZGVmaW5lIGtGbHRNYXggICAgICAgICAgICAgICAgMy40MDI4MjM0NjZlKzM4CiNkZWZpbmUga0ludE1heCAgICAgICAgICAgICAgICAweDdmZmZmZmZmCiNkZWZpbmUga09uZSAgICAgICAgICAgICAgICAgICB2ZWMzKDEuMCkKI2RlZmluZSBrWmVybyAgICAgICAgICAgICAgICAgIHZlYzMoMC4wKQojZGVmaW5lIGtQaW5rICAgICAgICAgICAgICAgICAgdmVjMygxLjAsIDAuMCwgMC4yKQoKZmxvYXQgY3VicnQoZmxvYXQgYSkgICAgICAgICAgIHsgcmV0dXJuIHNpZ24oYSkgKiBwb3coYWJzKGEpLCAxLjAgLyAzLjApOyB9CmZsb2F0IHRvUmFkKGZsb2F0IGRlZykgICAgICAgICB7IHJldHVybiBrVHdvUGkgKiBkZWcgLyAzNjAuMDsgfQpmbG9hdCB0b0RlZyhmbG9hdCByYWQpICAgICAgICAgeyByZXR1cm4gMzYwLjAgKiByYWQgLyBrVHdvUGk7IH0KZmxvYXQgc3FyKGZsb2F0IGEpICAgICAgICAgICAgIHsgcmV0dXJuIGEgKiBhOyB9CnZlYzMgc3FyKHZlYzMgYSkgICAgICAgICAgICAgICB7IHJldHVybiBhICogYTsgfQppbnQgc3FyKGludCBhKSAgICAgICAgICAgICAgICAgeyByZXR1cm4gYSAqIGE7IH0KaW50IG1vZDIoaW50IGEsIGludCBiKSAgICAgICAgIHsgcmV0dXJuICgoYSAlIGIpICsgYikgJSBiOyB9CmZsb2F0IG1vZDIoZmxvYXQgYSwgZmxvYXQgYikgICB7IHJldHVybiBtb2QobW9kKGEsIGIpICsgYiwgYik7IH0KdmVjMyBtb2QyKHZlYzMgYSwgdmVjMyBiKSAgICAgIHsgcmV0dXJuIG1vZChtb2QoYSwgYikgKyBiLCBiKTsgfQpmbG9hdCBsZW5ndGgyKHZlYzIgdikgICAgICAgICAgeyByZXR1cm4gZG90KHYsIHYpOyB9CmZsb2F0IGxlbmd0aDIodmVjMyB2KSAgICAgICAgICB7IHJldHVybiBkb3Qodiwgdik7IH0KaW50IHN1bShpdmVjMiBhKSAgICAgICAgICAgICAgIHsgcmV0dXJuIGEueCArIGEueTsgfQpmbG9hdCBsdW1pbmFuY2UodmVjMyB2KSAgICAgICAgeyByZXR1cm4gdi54ICogMC4xNzY5MSArIHYueSAqIDAuODEyNCArIHYueiAqIDAuMDEwNjM7IH0KZmxvYXQgbWVhbih2ZWMzIHYpICAgICAgICAgICAgIHsgcmV0dXJuIHYueCAvIDMuMCArIHYueSAvIDMuMCArIHYueiAvIDMuMDsgfQp2ZWM0IG11bDQodmVjMyBhLCBtYXQ0IG0pICAgICAgeyByZXR1cm4gdmVjNChhLCAxLjApICogbTsgfQp2ZWMzIG11bDModmVjMyBhLCBtYXQ0IG0pICAgICAgeyByZXR1cm4gKHZlYzQoYSwgMS4wKSAqIG0pLnh5ejsgfQpmbG9hdCBzaW4wMShmbG9hdCBhKSAgICAgICAgICAgeyByZXR1cm4gMC41ICogc2luKGEpICsgMC41OyB9CmZsb2F0IGNvczAxKGZsb2F0IGEpICAgICAgICAgICB7IHJldHVybiAwLjUgKiBjb3MoYSkgKyAwLjU7IH0KZmxvYXQgc2F0dXJhdGUoZmxvYXQgYSkgICAgICAgIHsgcmV0dXJuIGNsYW1wKGEsIDAuMCwgMS4wKTsgfQp2ZWMzIHNhdHVyYXRlKHZlYzMgYSkgICAgICAgIHsgcmV0dXJuIGNsYW1wKGEsIDAuMCwgMS4wKTsgfQpmbG9hdCBzYXcwMShmbG9hdCBhKSAgICAgICAgICAgeyByZXR1cm4gYWJzKGZyYWN0KGEpICogMi4wIC0gMS4wKTsgfQpmbG9hdCBjd2lzZU1heCh2ZWMzIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA+IHYueSkgPyAoKHYueCA+IHYueikgPyB2LnggOiB2LnopIDogKCh2LnkgPiB2LnopID8gdi55IDogdi56KTsgfQpmbG9hdCBjd2lzZU1heCh2ZWMyIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA+IHYueSkgPyB2LnggOiB2Lnk7IH0KZmxvYXQgY3dpc2VNaW4odmVjMyB2KSAgICAgICAgIHsgcmV0dXJuICh2LnggPCB2LnkpID8gKCh2LnggPCB2LnopID8gdi54IDogdi56KSA6ICgodi55IDwgdi56KSA/IHYueSA6IHYueik7IH0KZmxvYXQgY3dpc2VNaW4odmVjMiB2KSAgICAgICAgIHsgcmV0dXJuICh2LnggPCB2LnkpID8gdi54IDogdi55OyB9CnZvaWQgc29ydChpbm91dCBmbG9hdCBhLCBpbm91dCBmbG9hdCBiKSB7IGlmKGEgPiBiKSB7IGZsb2F0IHMgPSBhOyBhID0gYjsgYiA9IHM7IH0gfQp2b2lkIHN3YXAoaW5vdXQgZmxvYXQgYSwgaW5vdXQgZmxvYXQgYikgeyBmbG9hdCBzID0gYTsgYSA9IGI7IGIgPSBzOyB9Cgp2ZWMzIHNhZmVBdGFuKHZlYzMgYSwgdmVjMyBiKQp7CiAgICB2ZWMzIHI7CiAgICAjZGVmaW5lIGtBdGFuRXBzaWxvbiAxZS0xMAogICAgci54ID0gKGFicyhhLngpIDwga0F0YW5FcHNpbG9uICYmIGFicyhiLngpIDwga0F0YW5FcHNpbG9uKSA/IDAuMCA6IGF0YW4oYS54LCBiLngpOyAKICAgIHIueSA9IChhYnMoYS55KSA8IGtBdGFuRXBzaWxvbiAmJiBhYnMoYi55KSA8IGtBdGFuRXBzaWxvbikgPyAwLjAgOiBhdGFuKGEueSwgYi55KTsgCiAgICByLnogPSAoYWJzKGEueikgPCBrQXRhbkVwc2lsb24gJiYgYWJzKGIueikgPCBrQXRhbkVwc2lsb24pID8gMC4wIDogYXRhbihhLnosIGIueik7IAogICAgcmV0dXJuIHI7Cn0KCmZsb2F0IFNtb290aFN0ZXAoZmxvYXQgYSwgZmxvYXQgYiwgZmxvYXQgeCkgeyByZXR1cm4gbWl4KGEsIGIsIHggKiB4ICogKDMuMCAtIDIuMCAqIHgpKTsgfQp2ZWM0IFNtb290aFN0ZXAodmVjNCBhLCB2ZWM0IGIsIGZsb2F0IHgpICAgIHsgcmV0dXJuIG1peChhLCBiLCB4ICogeCAqICgzLjAgLSAyLjAgKiB4KSk7IH0KZmxvYXQgU21vb3RoU3RlcChmbG9hdCB4KSAgICAgICAgICAgICAgICAgICB7IHJldHVybiBtaXgoMC4wLCAxLjAsIHggKiB4ICogKDMuMCAtIDIuMCAqIHgpKTsgfQoKZmxvYXQgUGFkZGVkU21vb3RoU3RlcChmbG9hdCB4LCBmbG9hdCBhLCBmbG9hdCBiKQp7IAogICAgcmV0dXJuIFNtb290aFN0ZXAoc2F0dXJhdGUoeCAqIChhICsgYiArIDEuMCkgLSBhKSk7Cn0KCmZsb2F0IFBhZGRlZFNtb290aFN0ZXAoZmxvYXQgeCwgZmxvYXQgYSkKewogICAgcmV0dXJuIFBhZGRlZFNtb290aFN0ZXAoeCwgYSwgYSk7Cn0KCmZsb2F0IEltcHVsc2UoZmxvYXQgeCwgZmxvYXQgYXhpcywgZmxvYXQgc3RkRGV2KQp7CiAgICByZXR1cm4gZXhwKC1zcXIoKHggLSBheGlzKSAvIHN0ZERldikpOwp9CgpmbG9hdCBBbmlzb3Ryb3BpY0ltcHVsc2UoZmxvYXQgeCwgZmxvYXQgYXhpcywgZmxvYXQgc3RkRGV2QSwgZmxvYXQgc3RkRGV2QikKewogICAgZmxvYXQgaW1wdWxzZSA9ICh4IDwgYXhpcykgPyBleHAoLXNxcigoeCAtIGF4aXMpIC8gc3RkRGV2QSkpIDogZXhwKC1zcXIoKHggLSBheGlzKSAvIHN0ZERldkIpKTsKICAgIHJldHVybiBzYXR1cmF0ZSgoaW1wdWxzZSAtIDAuMDUpIC8gKDEuMCAtIDAuMDUpKTsKfQoKZmxvYXQgS2lja0Ryb3AoZmxvYXQgdCwgdmVjMiBwMCwgdmVjMiBwMSwgdmVjMiBwMiwgdmVjMiBwMykKewogICAgaWYodCA8IHAxLngpCiAgICB7CiAgICAgICAgcmV0dXJuIG1peChwMC55LCBwMS55LCBtYXgoMC4wLCBleHAoLXNxcigodCAtIHAxLngpKjIuMTQ1OTY2MDI2Mjg5MzQ3LyhwMS54LXAwLngpKSkgLSAwLjAxKSAvIDAuOTkpOwogICAgfQogICAgZWxzZSBpZih0IDwgcDIueCkKICAgIHsKICAgICAgICByZXR1cm4gbWl4KHAxLnksIHAyLnksICh0IC0gcDEueCkgLyAocDIueCAtIHAxLngpKTsKICAgIH0KICAgIGVsc2UKICAgIHsgIAogICAgICAgIHJldHVybiBtaXgocDMueSwgcDIueSwgbWF4KDAuMCwgZXhwKC1zcXIoKHQgLSBwMi54KSoyLjE0NTk2NjAyNjI4OTM0Ny8ocDMueC1wMi54KSkpIC0gMC4wMSkgLyAwLjk5KTsKICAgIH0KfQoKZmxvYXQgS2lja0Ryb3AoZmxvYXQgdCwgdmVjMiBwMCwgdmVjMiBwMSwgdmVjMiBwMikKewogICAgcmV0dXJuIEtpY2tEcm9wKHQsIHAwLCBwMSwgcDEsIHAyKTsKfQoKYm9vbCBRdWFkcmF0aWNTb2x2ZShmbG9hdCBhLCBmbG9hdCBiLCBmbG9hdCBjLCBvdXQgZmxvYXQgdDAsIG91dCBmbG9hdCB0MSkKewogICAgZmxvYXQgYjJhYzQgPSBiICogYiAtIDQuMCAqIGEgKiBjOwogICAgaWYoYjJhYzQgPCAwLjApIHsgcmV0dXJuIGZhbHNlOyB9IAoKICAgIGZsb2F0IHNxcnRiMmFjNCA9IHNxcnQoYjJhYzQpOwogICAgdDAgPSAoLWIgKyBzcXJ0YjJhYzQpIC8gKDIuMCAqIGEpOwogICAgdDEgPSAoLWIgLSBzcXJ0YjJhYzQpIC8gKDIuMCAqIGEpOyAgICAKICAgIHJldHVybiB0cnVlOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIDJEIFNWRwovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgpmbG9hdCBTREZMaW5lKHZlYzIgcCwgdmVjMiB2MCwgdmVjMiB2MSwgZmxvYXQgdGhpY2tuZXNzKQp7CiAgICB2MSAtPSB2MDsKICAgIGZsb2F0IHQgPSBzYXR1cmF0ZSgoZG90KHAsIHYxKSAtIGRvdCh2MCwgdjEpKSAvIGRvdCh2MSwgdjEpKTsKICAgIHZlYzIgcGVycCA9IHYwICsgdCAqIHYxOwogICAgcmV0dXJuIHNhdHVyYXRlKCh0aGlja25lc3MgLSBsZW5ndGgocCAtIHBlcnApKSAvIGdEeHlEdXYpOwp9CgpmbG9hdCBTREZRdWFkKHZlYzIgcCwgdmVjMiB2WzRdLCBmbG9hdCB0aGlja25lc3MpCnsKICAgIGZsb2F0IGMgPSAwLjA7CiAgICBmb3IoaW50IGkgPSAwOyBpIDwgNDsgaSsrKQogICAgewogICAgICAgIGMgPSBtYXgoYywgU0RGTGluZShwLCB2W2ldLCB2WyhpKzEpJTRdLCB0aGlja25lc3MpKTsgCiAgICB9CiAKICAgIHJldHVybiBjOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIDJEIHByaW1pdGl2ZSB0ZXN0cwovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgpib29sIElzUG9pbnRJblF1YWQodmVjMiB1diwgdmVjMiB2WzRdKQp7CiAgICBmb3IoaW50IGkgPSAwOyBpIDwgNDsgaSsrKQogICAgewogICAgICAgIGlmKGRvdCh1diAtIHZbaV0sIHZbaV0gLSB2WyhpKzEpJTRdKSA+IDAuMCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KICAgIHJldHVybiB0cnVlOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIFRyYW5zZm9ybXMgCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCm1hdDMgV29ybGRUb1ZpZXdNYXRyaXgoZmxvYXQgcm90LCB2ZWMyIHRyYW5zLCBmbG9hdCBzY2EpCnsgICAKICAgIHJldHVybiBtYXQzKHZlYzMoY29zKHJvdCkgLyBzY2EsIHNpbihyb3QpIC8gc2NhLCB0cmFucy54KSwgCiAgICAgICAgICAgICAgICB2ZWMzKC1zaW4ocm90KSAvIHNjYSwgY29zKHJvdCkgLyBzY2EsIHRyYW5zLnkpLAogICAgICAgICAgICAgICAgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KCm1hdDMgV29ybGRUb1ZpZXdNYXRyaXgodmVjMiB0cmFucywgZmxvYXQgc2NhKQp7ICAgCiAgICByZXR1cm4gbWF0Myh2ZWMzKDEuMCAvIHNjYSwgMC4wLCB0cmFucy54KSwgCiAgICAgICAgICAgICAgICB2ZWMzKDAuMCwgMS4wIC8gc2NhLCB0cmFucy55KSwKICAgICAgICAgICAgICAgIHZlYzMoMC4wLCAwLjAsIDEuMCkpOwp9Cgp2ZWMyIFRyYW5zZm9ybVNjcmVlblRvV29ybGQodmVjMiBwKQp7ICAgCiAgICByZXR1cm4gKHAgLSB2ZWMyKGdSZXNvbHV0aW9uLnh5KSAqIDAuNSkgLyBmbG9hdChnUmVzb2x1dGlvbi55KTsgCn0KCgp2ZWMzIENhcnRlc2lhbjJEVG9CYXJ5Y2VudHJpYyh2ZWMyIHApCnsgICAgCiAgICByZXR1cm4gdmVjMyhwLCAwLjApICogbWF0Myh2ZWMzKDAuMCwgMS4wIC8gMC44NjYwMjU0MDM3ODQ0Mzg3LCAwLjApLAogICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoMS4wLCAwLjU3NzM1MDI2OTE4OTYyNTcsIDAuMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMygtMS4wLCAwLjU3NzM1MDI2OTE4OTYyNTcsIDAuMCkpOwogICAgCn0KCi8vIE1hcHMgYW4gaW5wdXQgdXYgcG9zaXRpb24gdG8gcGVyaW9kaWMgaGV4YWdvbmFsIHRpbGluZwovLyAgICAgaW5vdXQgdmVjMiB1djogVGhlIG1hcHBlZCB1diBjb29yZGluYXRlCi8vICAgICBvdXQgdmVjMyBiYXJ5OiBUaGUgQmFyeWNlbnRyaWMgY29vcmRpbmF0ZXMgYXQgdGhlIHBvaW50IG9uIHRoZSBoZXhhZ29uCi8vICAgICBvdXQgaXZlYzIgaWo6IFRoZSBjb29yZGluYXRlIG9mIHRoZSB0aWxlCnZlYzIgQ2FydGVzaWFuMkRUb0hleGFnb25hbFRpbGluZyhpbiB2ZWMyIHV2LCBvdXQgdmVjMyBiYXJ5LCBvdXQgaXZlYzIgaWopCnsgICAgCiAgICAjZGVmaW5lIGtIZXhSYXRpbyB2ZWMyKDEuNSwgMC44NjYwMjU0MDM3ODQ0Mzg3KQogICAgdmVjMiB1dkNsaXAgPSBtb2QodXYgKyBrSGV4UmF0aW8sIDIuMCAqIGtIZXhSYXRpbykgLSBrSGV4UmF0aW87CiAgICAKICAgIGlqID0gaXZlYzIoKHV2ICsga0hleFJhdGlvKSAvICgyLjAgKiBrSGV4UmF0aW8pKSAqIDI7CiAgICBpZih1di54ICsga0hleFJhdGlvLnggPD0gMC4wKSBpai54IC09IDI7CiAgICBpZih1di55ICsga0hleFJhdGlvLnkgPD0gMC4wKSBpai55IC09IDI7CiAgICAKICAgIGJhcnkgPSBDYXJ0ZXNpYW4yRFRvQmFyeWNlbnRyaWModXZDbGlwKTsKICAgIGlmKGJhcnkueCA+IDAuMCkKICAgIHsKICAgICAgICBpZihiYXJ5LnogPiAxLjApIHsgYmFyeSArPSB2ZWMzKC0xLjAsIDEuMCwgLTIuMCk7IGlqICs9IGl2ZWMyKC0xLCAxKTsgfQogICAgICAgIGVsc2UgaWYoYmFyeS55ID4gMS4wKSB7IGJhcnkgKz0gdmVjMygtMS4wLCAtMi4wLCAxLjApOyBpaiArPSBpdmVjMigxLCAxKTsgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGlmKGJhcnkueSA8IC0xLjApIHsgYmFyeSArPSB2ZWMzKDEuMCwgMi4wLCAtMS4wKTsgaWogKz0gaXZlYzIoLTEsIC0xKTsgfQogICAgICAgIGVsc2UgaWYoYmFyeS56IDwgLTEuMCkgeyBiYXJ5ICs9IHZlYzMoMS4wLCAtMS4wLCAyLjApOyBpaiArPSBpdmVjMigxLCAtMSk7IH0KICAgIH0KCiAgICByZXR1cm4gdmVjMihiYXJ5LnkgKiAwLjU3NzM1MDI2OTE4OTYyNTcgLSBiYXJ5LnogKiAwLjU3NzM1MDI2OTE4OTYyNTcsIGJhcnkueCk7Cn0KCmJvb2wgSW52ZXJzZVN0ZXJub2dyYXBoKGlub3V0IHZlYzIgdXYsIGZsb2F0IHpvb20pCnsKICAgIGZsb2F0IHRoZXRhID0gbGVuZ3RoKHV2KSAqIGtQaSAqIHpvb207CiAgICBpZih0aGV0YSA+PSBrUGkgLSAxZS0xKSB7IHJldHVybiBmYWxzZTsgfQogICAgCiAgICBmbG9hdCBwaGkgPSBhdGFuKC11di55LCAtdXYueCkgKyBrUGk7CiAgICAKICAgIHZlYzMgc3BoID0gdmVjMyhjb3MocGhpKSAqIHNpbih0aGV0YSksIHNpbihwaGkpICogc2luKHRoZXRhKSwgLWNvcyh0aGV0YSkpOwogICAgCiAgICB1diA9IHZlYzIoc3BoLnggLyAoMS4wIC0gc3BoLnopLCBzcGgueSAvICgxLjAgLSBzcGgueikpOwogICAgcmV0dXJuIHRydWU7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgUmFuZG9tIG51bWJlciBnZW5lcmF0aW9uCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCi8vIFBlcm11dGVkIGNvbmdydWVudGlhbCBnZW5lcmF0b3IgZnJvbSAiSGFzaCBGdW5jdGlvbnMgZm9yIEdQVSBSZW5kZXJpbmciIChKYXJ6eW5za2kgYW5kIE9sYW5vKQovLyBodHRwOi8vamNndC5vcmcvcHVibGlzaGVkLzAwMDkvMDMvMDIvcGFwZXIucGRmCnV2ZWM0IFBDR0FkdmFuY2UoKQp7CiAgICBybmdTZWVkID0gcm5nU2VlZCAqIDE2NjQ1MjV1ICsgMTAxMzkwNDIyM3U7CiAgICAKICAgIHJuZ1NlZWQueCArPSBybmdTZWVkLnkqcm5nU2VlZC53OyAKICAgIHJuZ1NlZWQueSArPSBybmdTZWVkLnoqcm5nU2VlZC54OyAKICAgIHJuZ1NlZWQueiArPSBybmdTZWVkLngqcm5nU2VlZC55OyAKICAgIHJuZ1NlZWQudyArPSBybmdTZWVkLnkqcm5nU2VlZC56OwogICAgCiAgICBybmdTZWVkIF49IHJuZ1NlZWQgPj4gMTZ1OwogICAgCiAgICBybmdTZWVkLnggKz0gcm5nU2VlZC55KnJuZ1NlZWQudzsgCiAgICBybmdTZWVkLnkgKz0gcm5nU2VlZC56KnJuZ1NlZWQueDsgCiAgICBybmdTZWVkLnogKz0gcm5nU2VlZC54KnJuZ1NlZWQueTsgCiAgICBybmdTZWVkLncgKz0gcm5nU2VlZC55KnJuZ1NlZWQuejsKICAgIAogICAgcmV0dXJuIHJuZ1NlZWQ7Cn0KCi8vIEdlbmVyYXRlcyBhIHR1cGxlIG9mIGNhbm9uaWNhbCByYW5kb20gbnVtYmVyIGFuZCB1c2VzIHRoZW0gdG8gc2FtcGxlIGFuIGlucHV0IHRleHR1cmUKdmVjNCBSYW5kKHNhbXBsZXIyRCBzYW1wbGVyKQp7CiAgICByZXR1cm4gdGV4ZWxGZXRjaChzYW1wbGVyLCAoaXZlYzIoZ0ZyYWdDb29yZCkgKyBpdmVjMihQQ0dBZHZhbmNlKCkgPj4gMTYpKSAlIDEwMjQsIDApOwp9CgovLyBHZW5lcmF0ZXMgYSB0dXBsZSBvZiBjYW5vbmljYWwgcmFuZG9tIG51bWJlcnMgaW4gdGhlIHJhbmdlIFswLCAxXQp2ZWM0IFJhbmQoKQp7CiAgICByZXR1cm4gdmVjNChQQ0dBZHZhbmNlKCkpIC8gZmxvYXQoMHhmZmZmZmZmZnUpOwp9CgovLyBTZWVkIHRoZSBQQ0cgaGFzaCBmdW5jdGlvbiB3aXRoIHRoZSBjdXJyZW50IGZyYW1lIG11bHRpcGxlZCBieSBhIHByaW1lCnZvaWQgUENHSW5pdGlhbGlzZSh1aW50IGZyYW1lKQp7ICAgIAogICAgcm5nU2VlZCA9IHV2ZWM0KDIwMjE5dSwgNzI0M3UsIDEyNTQ3dSwgMjg1NzN1KSAqIGZyYW1lOwp9CgovLyBSZXZlcnNlIHRoZSBiaXRzIG9mIDMyLWJpdCBpbnRldGVyCnVpbnQgUmFkaWNhbEludmVyc2UodWludCBpKQp7CiAgICBpID0gKChpICYgMHhmZmZmdSkgPDwgMTZ1KSB8IChpID4+IDE2dSk7CiAgICBpID0gKChpICYgMHgwMGZmMDBmZnUpIDw8IDh1KSB8ICgoaSAmIDB4ZmYwMGZmMDB1KSA+PiA4dSk7CiAgICBpID0gKChpICYgMHgwZjBmMGYwZnUpIDw8IDR1KSB8ICgoaSAmIDB4ZjBmMGYwZjB1KSA+PiA0dSk7CiAgICBpID0gKChpICYgMHgzMzMzMzMzM3UpIDw8IDJ1KSB8ICgoaSAmIDB4Y2NjY2NjY2N1KSA+PiAydSk7ICAgIAogICAgaSA9ICgoaSAmIDB4NTU1NTU1NTV1KSA8PCAxdSkgfCAoKGkgJiAweGFhYWFhYWFhdSkgPj4gMXUpOyAgICAgICAgCiAgICByZXR1cm4gaTsKfQoKLy8gU2FtcGxlcyB0aGUgcmFkaXgtMiBIYWx0b24gc2VxdWVuY2UgZnJvbSBzZWVkIHZhbHVlLCBpCmZsb2F0IEhhbHRvbkJhc2UyKHVpbnQgaSkKeyAgICAKICAgIHJldHVybiBmbG9hdChSYWRpY2FsSW52ZXJzZShpKSkgLyBmbG9hdCgweGZmZmZmZmZmdSk7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgSGFzaCBmdW5jdGlvbnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKLy8gQ29uc3RhbnRzIGZvciB0aGUgRm93bGVyLU5vbGwtVm8gaGFzaCBmdW5jdGlvbgovLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Gb3dsZXItTm9sbC1Wb19oYXNoX2Z1bmN0aW9uCiNkZWZpbmUga0ZOVlByaW1lICAgICAgICAgICAgICAweDAxMDAwMTkzdQojZGVmaW5lIGtGTlZPZmZzZXQgICAgICAgICAgICAgMHg4MTFjOWRjNXUKI2RlZmluZSBrRGltc1BlckJvdW5jZSAgICAgICAgIDQKCi8vIE1peCBhbmQgY29tYmluZSB0d28gaGFzaGVzCnVpbnQgSGFzaENvbWJpbmUodWludCBhLCB1aW50IGIpCnsKICAgIHJldHVybiAoKChhIDw8ICgzMXUgLSAoYiAmIDMxdSkpKSB8IChhID4+IChiICYgMzF1KSkpKSBeCiAgICAgICAgICAgICgoYiA8PCAoYSAmIDMxdSkpIHwgKGIgPj4gKDMxdSAtIChhICYgMzF1KSkpKTsKfQoKLy8gQ29tcHV0ZSBhIDMyLWJpdCBGb3dsZXItTm9sbC1WbyBoYXNoIGZvciB0aGUgZ2l2ZW4gaW5wdXQKdWludCBIYXNoT2YodWludCBpKQp7CiAgICB1aW50IGggPSAoa0ZOVk9mZnNldCBeIChpICYgMHhmZnUpKSAqIGtGTlZQcmltZTsKICAgIGggPSAoaCBeICgoaSA+PiA4dSkgJiAweGZmdSkpICoga0ZOVlByaW1lOwogICAgaCA9IChoIF4gKChpID4+IDE2dSkgJiAweGZmdSkpICoga0ZOVlByaW1lOwogICAgaCA9IChoIF4gKChpID4+IDI0dSkgJiAweGZmdSkpICoga0ZOVlByaW1lOwogICAgcmV0dXJuIGg7Cn0KCnVpbnQgSGFzaE9mKGludCBhKSB7IHJldHVybiBIYXNoT2YodWludChhKSk7IH0KdWludCBIYXNoT2YodWludCBhLCB1aW50IGIpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hPZihhKSwgSGFzaE9mKGIpKTsgfQp1aW50IEhhc2hPZih1aW50IGEsIHVpbnQgYiwgdWludCBjKSB7IHJldHVybiBIYXNoQ29tYmluZShIYXNoQ29tYmluZShIYXNoT2YoYSksIEhhc2hPZihiKSksIEhhc2hPZihjKSk7IH0KdWludCBIYXNoT2YodWludCBhLCB1aW50IGIsIHVpbnQgYywgdWludCBkKSB7IHJldHVybiBIYXNoQ29tYmluZShIYXNoQ29tYmluZShIYXNoT2YoYSksIEhhc2hPZihiKSksIEhhc2hDb21iaW5lKEhhc2hPZihjKSwgSGFzaE9mKGQpKSk7IH0KdWludCBIYXNoT2YodmVjMiB2KSB7IHJldHVybiBIYXNoQ29tYmluZShIYXNoT2YodWludCh2LngpKSwgSGFzaE9mKHVpbnQodi55KSkpOyB9CnVpbnQgSGFzaE9mKGl2ZWMyIHYpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hPZih1aW50KHYueCkpLCBIYXNoT2YodWludCh2LnkpKSk7IH0KCi8vIFNhbXBsZXMgdGhlIHJhZGl4LTIgSGFsdG9uIHNlcXVlbmNlIGZyb20gc2VlZCB2YWx1ZSwgaQpmbG9hdCBIYXNoVG9GbG9hdCh1aW50IGkpCnsgICAgCiAgICByZXR1cm4gZmxvYXQoaSkgLyBmbG9hdCgweGZmZmZmZmZmdSk7Cn0KCmNvbnN0IG1hdDQga09yZGVyZWREaXRoZXIgPSBtYXQ0KHZlYzQoMC4wLCA4LjAsIDIuMCwgMTAuKSwgdmVjNCgxMi4sIDQuLCAxNC4sIDYuKSwgdmVjNCgzLiwgMTEuLCAxLiwgOS4pLCB2ZWM0KDE1LiwgNy4sIDEzLiwgNS4pKTsKZmxvYXQgT3JkZXJlZERpdGhlcigpCnsgICAgCiAgICByZXR1cm4gKGtPcmRlcmVkRGl0aGVyW2ludChnRnJhZ0Nvb3JkLngpICYgM11baW50KGdGcmFnQ29vcmQueSkgJiAzXSArIDEuMCkgLyAxNy4wOwp9Cgp2ZWMzIFNhbXBsZVVuaXRTcGhlcmUodmVjMiB4aSkKewogICAgeGkueCA9IHhpLnggKiAyLjAgLSAxLjA7CiAgICB4aS55ICo9IGtUd29QaTsKCiAgICBmbG9hdCBzaW5UaGV0YSA9IHNxcnQoMS4wIC0geGkueCAqIHhpLngpOwogICAgcmV0dXJuIHZlYzMoY29zKHhpLnkpICogc2luVGhldGEsIHhpLngsIHNpbih4aS55KSAqIHNpblRoZXRhKTsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBDb2xvdXIgZnVuY3Rpb25zCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCnZlYzMgSHVlKGZsb2F0IHBoaSkKewogICAgZmxvYXQgcGhpQ29sb3VyID0gNi4wICogcGhpOwogICAgaW50IGkgPSBpbnQocGhpQ29sb3VyKTsKICAgIHZlYzMgYzAgPSB2ZWMzKCgoaSArIDQpIC8gMykgJiAxLCAoKGkgKyAyKSAvIDMpICYgMSwgKChpICsgMCkgLyAzKSAmIDEpOwogICAgdmVjMyBjMSA9IHZlYzMoKChpICsgNSkgLyAzKSAmIDEsICgoaSArIDMpIC8gMykgJiAxLCAoKGkgKyAxKSAvIDMpICYgMSk7ICAgICAgICAgICAgIAogICAgcmV0dXJuIG1peChjMCwgYzEsIHBoaUNvbG91ciAtIGZsb2F0KGkpKTsKfQoKLy8gQSBHYXVzc2lhbiBmdW5jdGlvbiB0aGF0IHdlIHVzZSB0byBzYW1wbGUgdGhlIFhZWiBzdGFuZGFyZCBvYnNlcnZlciAKZmxvYXQgQ0lFWFlaR2F1c3MoZmxvYXQgbGFtYmRhLCBmbG9hdCBhbHBoYSwgZmxvYXQgbXUsIGZsb2F0IHNpZ21hMSwgZmxvYXQgc2lnbWEyKQp7CiAgIHJldHVybiBhbHBoYSAqIGV4cChzcXIobGFtYmRhIC0gbXUpIC8gKC0yLjAgKiBzcXIobGFtYmRhIDwgbXUgPyBzaWdtYTEgOiBzaWdtYTIpKSk7Cn0KCnZlYzMgSFNWVG9SR0IodmVjMyBoc3YpCnsKICAgIHJldHVybiBtaXgodmVjMygwLjApLCBtaXgodmVjMygxLjApLCBIdWUoaHN2LngpLCBoc3YueSksIGhzdi56KTsKfQoKdmVjMyBSR0JUb0hTViggdmVjMyByZ2IpCnsKICAgIC8vIFZhbHVlCiAgICB2ZWMzIGhzdjsKICAgIGhzdi56ID0gY3dpc2VNYXgocmdiKTsKCiAgICAvLyBTYXR1cmF0aW9uCiAgICBmbG9hdCBjaHJvbWEgPSBoc3YueiAtIGN3aXNlTWluKHJnYik7CiAgICBoc3YueSA9IChoc3YueiA8IDFlLTEwKSA/IDAuMCA6IChjaHJvbWEgLyBoc3Yueik7CgogICAgLy8gSHVlCiAgICBpZiAoY2hyb21hIDwgMWUtMTApICAgICAgICB7IGhzdi54ID0gMC4wOyB9CiAgICBlbHNlIGlmIChoc3YueiA9PSByZ2IueCkgICAgeyBoc3YueCA9ICgxLjAgLyA2LjApICogKHJnYi55IC0gcmdiLnopIC8gY2hyb21hOyB9CiAgICBlbHNlIGlmIChoc3YueiA9PSByZ2IueSkgICAgeyBoc3YueCA9ICgxLjAgLyA2LjApICogKDIuMCArIChyZ2IueiAtIHJnYi54KSAvIGNocm9tYSk7IH0KICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICB7IGhzdi54ID0gKDEuMCAvIDYuMCkgKiAoNC4wICsgKHJnYi54IC0gcmdiLnkpIC8gY2hyb21hKTsgfQogICAgaHN2LnggPSBmcmFjdChoc3YueCArIDEuMCk7CgogICAgcmV0dXJuIGhzdjsKfQoKdmVjMyBTYW1wbGVTcGVjdHJ1bShmbG9hdCBsYW1iZGEpCnsKICAgIC8vIEhlcmUgd2UgdXNlIGEgc2V0IG9mIGZpdHRlZCBHYXVzc2lhbiBjdXJ2ZXMgdG8gYXBwcm94aW1hdGUgdGhlIENJRSBYWVogc3RhbmRhcmQgb2JzZXJ2ZXIuCiAgICAvLyBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ0lFXzE5MzFfY29sb3Jfc3BhY2UgZm9yIGRldGFscyBvbiB0aGUgZm9ybXVsYQogICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gbWFwIHRoZSBzYW1wbGVkIHdhdmVsZW5ndGggdG8gdXNhYmxlIFJHQiB2YWx1ZXMuIFRoaXMgY29kZSBuZWVkcyBjbGVhbmluZyAKICAgIC8vIHVwIGJlY2F1c2Ugd2UgZG8gYW4gdW5uZWNlc3Nhcnkgbm9ybWFsaXNhdGlvbiBzdGVwcyBhcyB3ZSBtYXAgZnJvbSBsYW1iZGEgdG8gWFlaIHRvIFJHQi4KCiAgICAjZGVmaW5lIGtSTm9ybSAoNzAwMC4wIC0gMzgwMC4wKSAvIDExNDMuMDcKICAgICNkZWZpbmUga0dOb3JtICg3MDAwLjAgLSAzODAwLjApIC8gMTA2OC43CiAgICAjZGVmaW5lIGtCTm9ybSAoNzAwMC4wIC0gMzgwMC4wKSAvIDEwNjguMjUKCiAgICAvLyBTYW1wbGUgdGhlIEdhdXNzaWFuIGFwcHJveGltYXRpb25zCiAgICB2ZWMzIHh5ejsKICAgIHh5ei54ID0gKENJRVhZWkdhdXNzKGxhbWJkYSwgMS4wNTYsIDU5OTguMCwgMzc5LjAsIDMxMC4wKSArCiAgICAgICAgICAgICBDSUVYWVpHYXVzcyhsYW1iZGEsIDAuMzYyLCA0NDIwLjAsIDE2MC4wLCAyNjcuMCkgKwogICAgICAgICAgICAgQ0lFWFlaR2F1c3MobGFtYmRhLCAwLjA2NSwgNTAxMS4wLCAyMDQuMCwgMjYyLjApKSAqIGtSTm9ybTsKICAgIHh5ei55ID0gKENJRVhZWkdhdXNzKGxhbWJkYSwgMC44MjEsIDU2ODguMCwgNDY5LjAsIDQwNS4wKSArCiAgICAgICAgICAgICBDSUVYWVpHYXVzcyhsYW1iZGEsIDAuMjg2LCA1MzA5LjAsIDE2My4wLCAzMTEuMCkpICoga0dOb3JtOwogICAgeHl6LnogPSAoQ0lFWFlaR2F1c3MobGFtYmRhLCAxLjIxNywgNDM3MC4wLCAxMTguMCwgMzYwLjApICsKICAgICAgICAgICAgIENJRVhZWkdhdXNzKGxhbWJkYSwgMC42ODEsIDQ1OTAuMCwgMjYwLjAsIDEzOC4wKSkgKiBrQk5vcm07CgogICAgLy8gWFlaIHRvIFJHQiBsaW5lYXIgdHJhbnNmb3JtCiAgICB2ZWMzIHJnYjsKICAgIHJnYi5yID0gKDIuMDQxNTkgKiB4eXoueCAtIDAuNTY1MCAqIHh5ei55IC0gMC4zNDQ3MyAqIHh5ei56KSAvICgyLjAgKiAwLjU2NSk7CiAgICByZ2IuZyA9ICgtMC45NjkyNCAqIHh5ei54ICsgMS44NzU5NiAqIHh5ei55ICsgMC4wNDE1NSAqIHh5ei56KSAvICgyLjAgKiAwLjQ3Mik7CiAgICByZ2IuYiA9ICgwLjAxMzQ0ICogeHl6LnggLSAwLjExODYzICogeHl6LnkgKyAxLjAxNTE3ICogeHl6LnopIC8gKDIuMCAqIDAuNDUyKTsKCiAgICByZXR1cm4gcmdiOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIFJheSB0cmFjaW5nCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCiNkZWZpbmUga0ludmFsaWRIaXQgICAgICAgICAgICAgIC0xLjAKI2RlZmluZSBrTnVsbFJheSAgICAgICAgICAgICAgICAgLTEuMAoKc3RydWN0IFRyYW5zZm9ybQp7CiAgICB2ZWMzIHRyYW5zOwogICAgbWF0MyByb3Q7CiAgICBmbG9hdCBzY2E7Cn07CgptYXQzIElkZW50aXR5KCkKewogICAgcmV0dXJuIG1hdDModmVjMygxLjAsIDAuMCwgMC4wKSwgdmVjMygwLjAsIDEuMCwgMC4wKSwgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KCm1hdDMgU2NhbGVNYXQzKGZsb2F0IHNjYWxlKQp7CiAgICBmbG9hdCBpbnZTY2FsZSA9IDEuMGYgLyBzY2FsZTsKICAgIHJldHVybiBtYXQzKHZlYzMoaW52U2NhbGUsIDAuMCwgMC4wKSwKICAgICAgICAgICAgdmVjMygwLjAsIGludlNjYWxlLCAwLjApLAogICAgICAgICAgICB2ZWMzKDAuMCwgMC4wLCBpbnZTY2FsZSkpOwp9CgptYXQzIFJvdFhNYXQzKGZsb2F0IHRoZXRhKQp7CiAgICBmbG9hdCBjb3NUaGV0YSA9IGNvcyh0aGV0YSksIHNpblRoZXRhID0gc2luKHRoZXRhKTsKICAgIHJldHVybiBtYXQzKHZlYzMoMS4wLCAwLjAsIDAuMCksCiAgICAgICAgICAgIHZlYzMoMC4wLCBjb3NUaGV0YSwgLXNpblRoZXRhKSwKICAgICAgICAgICAgdmVjMygwLjAsIHNpblRoZXRhLCBjb3NUaGV0YSkpOwp9CgptYXQzIFJvdFlNYXQzKGNvbnN0IGZsb2F0IHRoZXRhKQp7CiAgICBmbG9hdCBjb3NUaGV0YSA9IGNvcyh0aGV0YSksIHNpblRoZXRhID0gc2luKHRoZXRhKTsKICAgIHJldHVybiBtYXQzKHZlYzMoY29zVGhldGEsIDAuMCwgc2luVGhldGEpLAogICAgICAgICAgICB2ZWMzKDAuMCwgMS4wLCAwLjApLAogICAgICAgICAgICB2ZWMzKC1zaW5UaGV0YSwgMC4wLCBjb3NUaGV0YSkpOwp9CgptYXQzIFJvdFpNYXQzKGNvbnN0IGZsb2F0IHRoZXRhKQp7CiAgICBmbG9hdCBjb3NUaGV0YSA9IGNvcyh0aGV0YSksIHNpblRoZXRhID0gc2luKHRoZXRhKTsKICAgIHJldHVybiBtYXQzKHZlYzMoY29zVGhldGEsIC1zaW5UaGV0YSwgMC4wKSwKICAgICAgICAgICAgdmVjMyhzaW5UaGV0YSwgY29zVGhldGEsIDAuMCksCiAgICAgICAgICAgIHZlYzMoMC4wLCAwLjAsIDEuMCkpOwp9CgpUcmFuc2Zvcm0gQ29tcG91bmRUcmFuc2Zvcm0odmVjMyB0cmFucywgdmVjMyByb3QsIGZsb2F0IHNjYWxlKQp7CiAgICBUcmFuc2Zvcm0gdHJhbnNmb3JtOwogICAgdHJhbnNmb3JtLnJvdCA9IElkZW50aXR5KCk7CiAgICB0cmFuc2Zvcm0uc2NhID0gc2NhbGU7CgogICAgaWYgKHJvdC54ICE9IDAuMCkgeyB0cmFuc2Zvcm0ucm90ICo9IFJvdFhNYXQzKHJvdC54KTsgfQogICAgaWYgKHJvdC55ICE9IDAuMCkgeyB0cmFuc2Zvcm0ucm90ICo9IFJvdFlNYXQzKHJvdC55KTsgfQogICAgaWYgKHJvdC56ICE9IDAuMCkgeyB0cmFuc2Zvcm0ucm90ICo9IFJvdFpNYXQzKHJvdC56KTsgfQoKICAgIGlmIChzY2FsZSAhPSAxLjBmKSB7IHRyYW5zZm9ybS5yb3QgKj0gU2NhbGVNYXQzKHNjYWxlKTsgfQogICAgCiAgICByZXR1cm4gdHJhbnNmb3JtOwp9CgovLyBGYXN0IGNvbnN0cnVjdGlvbiBvZiBvcnRob25vcm1hbCBiYXNpcyB1c2luZyBxdWFydGVybmlvbnMgdG8gYXZvaWQgZXhwZW5zaXZlIG5vcm1hbGlzYXRpb24gYW5kIGJyYW5jaGluZyAKLy8gRnJvbSBEdWYgZXQgYWwncyB0ZWNobmljYWwgcmVwb3J0IGh0dHBzOi8vZ3JhcGhpY3MucGl4YXIuY29tL2xpYnJhcnkvT3J0aG9ub3JtYWxCL3BhcGVyLnBkZiwgaW5zcGlyZWQgYnkKLy8gRnJpc3ZhZCdzIG9yaWdpbmFsIHBhcGVyOiBodHRwOi8vb3JiaXQuZHR1LmRrL2ZpbGVzLzEyNjgyNDk3Mi9vbmJfZnJpc3ZhZF9qZ3QyMDEyX3YyLnBkZgptYXQzIENyZWF0ZUJhc2lzKHZlYzMgbikKewogICAgZmxvYXQgcyA9IHNpZ24obi56KTsKICAgIGZsb2F0IGEgPSAtMS4wIC8gKHMgKyBuLnopOwogICAgZmxvYXQgYiA9IG4ueCAqIG4ueSAqIGE7CiAgICAKICAgIHJldHVybiBtYXQzKHZlYzMoMS4wZiArIHMgKiBuLnggKiBuLnggKiBhLCBzICogYiwgLXMgKiBuLngpLAogICAgICAgICAgICAgICAgdmVjMyhiLCBzICsgbi55ICogbi55ICogYSwgLW4ueSksCiAgICAgICAgICAgICAgICBuKTsKfQoKbWF0MyBDcmVhdGVCYXNpcyh2ZWMzIG4sIHZlYzMgdXApCnsKICAgIHZlYzMgdGFuZ2VudCA9IG5vcm1hbGl6ZShjcm9zcyhuLCB1cCkpOwogICAgdmVjMyBjb3RhbmdlbnQgPSBjcm9zcyh0YW5nZW50LCBuKTsKCiAgICByZXR1cm4gdHJhbnNwb3NlKG1hdDModGFuZ2VudCwgY290YW5nZW50LCBuKSk7Cn0KCi8vIFRoZSBtaW5pbXVtIGFtb3VudCBvZiBkYXRhIHJlcXVpcmVkIHRvIGRlZmluZSBhbiBpbmZpbml0ZSByYXkgaW4gM0Qgc3BhY2UKc3RydWN0IFJheUJhc2ljCnsKICAgIHZlYzMgICBvOyAgICAgICAgICAgICAgICAgICAvLyBPcmlnaW4gCiAgICB2ZWMzICAgZDsgICAgICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uICAKfTsKCi8vIFRoZSAiZnVsbCBmYXQiIHJheSBvYmplY3RzIHRoYXQgbW9zdCBtZXRob2RzIHdpbGwgcmVmZXIgdG8Kc3RydWN0IFJheQp7CiAgICBSYXlCYXNpYyBvZDsgICAgICAgICAgICAgICAgCiAgICBmbG9hdCAgICB0TmVhcjsgICAgICAgICAgICAgCiAgICB2ZWMzICAgICB3ZWlnaHQ7CiAgICB1aW50ICAgICBmbGFnczsKICAgIC8vZmxvYXQgICAgbGFtYmRhOyAgICAKfTsKCiNkZWZpbmUga0ZsYWdzQmFja2ZhY2luZyAxdQojZGVmaW5lIGtGbGFnc1N1YnN1cmZhY2UgMnUKI2RlZmluZSBrRmxhZ3NEaXJlY3RSYXkgIDR1CgpzdHJ1Y3QgSGl0Q3R4CnsKICAgIHZlYzMgICAgIG47CiAgICBmbG9hdCAgICBraWNrb2ZmOyAgICAKfTsKClJheUJhc2ljIFJheVRvT2JqZWN0U3BhY2UoaW4gUmF5QmFzaWMgd29ybGQsIGluIFRyYW5zZm9ybSB0cmFuc2Zvcm0pIAp7CiAgICBSYXlCYXNpYyBvYmplY3Q7CiAgICBvYmplY3QubyA9IHdvcmxkLm8gLSB0cmFuc2Zvcm0udHJhbnM7CiAgICBvYmplY3QuZCA9IHdvcmxkLmQgKyBvYmplY3QubzsKICAgIG9iamVjdC5vID0gdHJhbnNmb3JtLnJvdCAqIG9iamVjdC5vOwogICAgb2JqZWN0LmQgPSAodHJhbnNmb3JtLnJvdCAqIG9iamVjdC5kKSAtIG9iamVjdC5vOwogICAgcmV0dXJuIG9iamVjdDsKfQoKdmVjNCBTREZTaW1wbGV4RmFjZShpbiB2ZWMzIHAsIGluIHZlYzMgdls0XSwgaW4gdmVjMyBuKQp7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgIGZvcihpbnQgaSA9IDA7IGkgPCAzOyBpKyspCiAgICB7CiAgICAgICAgdmVjMyBkdiA9IHZbKGkrMSkgJSAzXSAtIHZbaV07CiAgICAgICAgdmVjMyBlZGdlTm9ybSA9IG5vcm1hbGl6ZShjcm9zcyhkdiwgbikpOwogICAgICAgIGlmKGRvdChlZGdlTm9ybSwgcCAtIHZbaV0pID4gMC4wKQogICAgICAgIHsgICAgICAgICAgICAKICAgICAgICAgICAgZmxvYXQgdCA9IGNsYW1wKChkb3QocCwgZHYpIC0gZG90KHZbaV0sIGR2KSkgLyBkb3QoZHYsIGR2KSwgMC4wLCAxLjApOwogICAgICAgICAgICB2ZWMzIGdyYWQgPSBwIC0gKHZbaV0gKyB0ICogZHYpOwogICAgICAgICAgICByZXR1cm4gdmVjNChsZW5ndGgoZ3JhZCksIGdyYWQpOwogICAgICAgIH0KICAgIH0KICAgIGlmKGRvdChuLCBwIC0gdlswXSkgPCAwLjApIHsgbiA9IC1uOyB9CiAgICByZXR1cm4gdmVjNCgoZG90KHAsIG4pIC0gZG90KHZbMF0sIG4pKSwgbik7Cn0KCmJvb2wgUmF5U2ltcGxleFNERihpbm91dCBSYXkgcmF5LCBpbm91dCB2ZWMyIHNkZk5lYXIsIG91dCBIaXRDdHggaGl0LCBpbiBUcmFuc2Zvcm0gdHJhbnNmb3JtLCBpbiBmbG9hdCBleHBsb2RlLCBpbiBpbnQgaW50ZXJ2YWwsIGluIGZsb2F0IHBoYXNlKQp7CiAgICAjZGVmaW5lIGtTREZNYXhTdGVwcyAgICAgICAgICAgICA1MAogICAgI2RlZmluZSBrU0RGQ3V0b2ZmVGhyZXNob2xkICAgICAgMWUtNAogICAgI2RlZmluZSBrU0RGRXNjYXBlVGhyZXNob2xkICAgICAgMi4wCiAgICAjZGVmaW5lIGtTREZSYXlJbmNyZW1lbnQgICAgICAgICAwLjk1CiAgICAKICAgICNkZWZpbmUga051bUludGVydmFscyAgICAgICAgICAgIDIwCiAgICAjZGVmaW5lIGtDbG9zZWRJbnRlcnZhbCAgICAgICAgICAxNgogICAgCiAgICBSYXlCYXNpYyBsb2NhbFJheSA9IFJheVRvT2JqZWN0U3BhY2UocmF5Lm9kLCB0cmFuc2Zvcm0pOwogICAgCiAgICBmbG9hdCBsb2NhbE1hZyA9IGxlbmd0aChsb2NhbFJheS5kKTsKICAgIGxvY2FsUmF5LmQgLz0gbG9jYWxNYWc7CiAgICAKICAgIGZsb2F0IHQgPSAwLjA7ICAgCiAgICB2ZWMzIHA7CiAgICB2ZWM0IEY7CiAgICBib29sIGlzU3Vic3VyZmFjZSwgaXNCb3VuZGVkID0gZmFsc2U7CgogICAgY29uc3QgdmVjMyBWWzRdID0gdmVjM1tdKHZlYzMoMSwxLDEpKi41LCB2ZWMzKC0xLC0xLDEpKi41LCB2ZWMzKDEsLTEsLTEpKi41LCB2ZWMzKC0xLDEsLTEpKi41KTsKICAgIGNvbnN0IGludCBJWzE2XSA9IGludFtdKCAwLCAyLCAxLCAwLCAxLCAzLCAyLCAxLCAyLCAwLCAzLCAyLCAzLCAxLCAwLCAzKTsKICAgIHZlYzMgRFs0XSwgTls0XTsgICAgIAogICAgI2RlZmluZSBrU0RGVGhpY2tuZXNzIDAuMDUKICAgIAogICAgZmxvYXQgYmV0YSA9IEtpY2tEcm9wKHBoYXNlLCB2ZWMyKDAuMCwgMC4wKSwgdmVjMigwLjQsIDEuMiksIHZlYzIoMC41LCAxLjApKTsKICAgIGZsb2F0IGdhbW1hID0gbWl4KDEuMCwgMi41LCBJbXB1bHNlKHBoYXNlLCAwLjQsIDAuMTUpKTsKICAgIAogICAgZm9yKGludCBqID0gMDsgaiA8IDQ7ICsraikKICAgIHsKICAgICAgICBpbnQgayA9IGoqNDsKICAgICAgICB2ZWMzIGQgPSBtaXgoVltJW2sgKyBpbnRlcnZhbCUzXV0sIFZbSVtrICsgKGludGVydmFsKzEpJTNdXSwgYmV0YSkgKiBleHBsb2RlOwogICAgICAgIGlmKGludGVydmFsID09IDApIHsgRFtqXSA9IGQgKiBiZXRhOyB9IAogICAgICAgIGVsc2UgaWYoaW50ZXJ2YWwgPCBrQ2xvc2VkSW50ZXJ2YWwpIHsgRFtqXSA9IGQ7IH0KICAgICAgICBlbHNlIGlmKGludGVydmFsID09IGtDbG9zZWRJbnRlcnZhbCkgeyBEW2pdID0gZCAqICgxLjAgLSBiZXRhKTsgfQogICAgICAgIGVsc2UgeyBEW2pdID0ga1plcm87IH0KICAgICAgICAKICAgICAgICBOW2pdID0gbm9ybWFsaXplKGNyb3NzKFZbSVtrKzFdXSAtIFZbSVtrXV0sIFZbSVtrKzJdXSAtIFZbSVtrXV0pKTsKICAgIH0KICAgIAogICAgaW50IHN0ZXBJZHg7CiAgICBmb3Ioc3RlcElkeCA9IDA7IHN0ZXBJZHggPCBrU0RGTWF4U3RlcHM7IHN0ZXBJZHgrKykKICAgIHsKICAgICAgICBwID0gbG9jYWxSYXkubyArIGxvY2FsUmF5LmQgKiB0OwogICAgICAgIAogICAgICAgIEYgPSB2ZWM0KGtGbHRNYXgpOwogICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCA0OyBqKyspCiAgICAgICAgeyAgICAgICAgICAgICAgCiAgICAgICAgICAgIHZlYzQgRkZhY2UgPSBTREZTaW1wbGV4RmFjZShwLCB2ZWMzWzRdKFZbSVtqKjRdXSArIERbal0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZbSVtqKjQrMV1dICsgRFtqXSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVltJW2oqNCsyXV0gKyBEW2pdLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWW0lbaio0KzNdXSArIERbal0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5bal0pOwoKICAgICAgICAgICAgRkZhY2UueCA9IEZGYWNlLnggLSBrU0RGVGhpY2tuZXNzICogZ2FtbWE7CiAgICAgICAgICAgIGlmKEZGYWNlLnggPCBGLngpIAogICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgRiA9IEZGYWNlOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgCiAgICAgICAgLy8gT24gdGhlIGZpcnN0IGl0ZXJhdGlvbiwgc2ltcGx5IGRldGVybWluZSB3aGV0aGVyIHdlJ3JlIGluc2lkZSB0aGUgaXNvc3VyZmFjZSBvciBub3QKICAgICAgICBpZihzdGVwSWR4ID09IDApIHsgaXNTdWJzdXJmYWNlID0gRi54IDwgMC4wOyB9CiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayB0byBzZWUgaWYgd2UncmUgYXQgdGhlIHN1cmZhY2UKICAgICAgICBlbHNlIGlmKGFicyhGLngpIDwga1NERkN1dG9mZlRocmVzaG9sZCkgeyBicmVhazsgfSAgICAgICAgCiAgICAgICAgCiAgICAgICAgaWYoIWlzQm91bmRlZCkgeyBpZihGLnggPCBrU0RGRXNjYXBlVGhyZXNob2xkKSB7IGlzQm91bmRlZCA9IHRydWU7IH0gfQogICAgICAgIGVsc2UgaWYoRi54ID4ga1NERkVzY2FwZVRocmVzaG9sZCkgeyByZXR1cm4gZmFsc2U7IH0KICAgICAgICAKICAgICAgICB0ICs9IChpc1N1YnN1cmZhY2UgPyAtRi54IDogRi54KSAqIGtTREZSYXlJbmNyZW1lbnQ7CiAgICAgICAgCiAgICAgICAgaWYoYWJzKEYueCAvIGxvY2FsTWFnKSA8IHNkZk5lYXIueCkKICAgICAgICAgICAgICAgICAgICBzZGZOZWFyID0gdmVjMihhYnMoRi54IC8gbG9jYWxNYWcpLCB0IC8gbG9jYWxNYWcpOwogICAgICAgIAogICAgICAgIGlmKHQgLyBsb2NhbE1hZyA+IHJheS50TmVhcikgeyBicmVhazsgfQogICAgICAgIAogICAgICAgIHAgPSBsb2NhbFJheS5vICsgdCAqIGxvY2FsUmF5LmQ7CiAgICB9ICAgICAgICAKICAgIAogICAgdCAvPSBsb2NhbE1hZzsKICAgIGlmKHN0ZXBJZHggPT0ga1NERk1heFN0ZXBzIHx8IHQgPiByYXkudE5lYXIpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAKICAgIHJheS50TmVhciA9IHQ7CiAgICBoaXQubiA9IHRyYW5zcG9zZSh0cmFuc2Zvcm0ucm90KSAqIG5vcm1hbGl6ZShGLnl6dykgKiB0cmFuc2Zvcm0uc2NhOwogICAgcmF5LmZsYWdzID0gKHJheS5mbGFncyAmIH5rRmxhZ3NCYWNrZmFjaW5nKSB8ICgoaXNTdWJzdXJmYWNlKSA/IGtGbGFnc0JhY2tmYWNpbmcgOiAwdSk7CiAgICBoaXQua2lja29mZiA9IDFlLTI7CgogICAgcmV0dXJuIHRydWU7Cn0KClJheSBDcmVhdGVPcnRob2dyYXBoaWNDYW1lcmFSYXkodmVjMiB1diwgdmVjMiBzZW5zb3JTaXplLCB2ZWMzIGNhbWVyYVBvcywgdmVjMyBjYW1lcmFMb29rQXQpCnsKICAgIHZlYzMgdyA9IG5vcm1hbGl6ZShjYW1lcmFMb29rQXQgLSBjYW1lcmFQb3MpOwogICAgbWF0MyBiYXNpcyA9IENyZWF0ZUJhc2lzKHcsIHZlYzMoMC4wLCAxLjAsIDAuMCkpOyAgICAKICAgIAogICAgUmF5IHJheTsKICAgIHJheS5vZC5vID0gY2FtZXJhUG9zICsgdmVjMyh1diAqIHNlbnNvclNpemUsIDAuMCkgKiBiYXNpczsKICAgIHJheS5vZC5kID0gdzsKICAgIHJheS53ZWlnaHQgPSB2ZWMzKDEuMCk7CiAgICByZXR1cm4gcmF5Owp9Cgp2ZWMzIFJheVBvaW50QXQoaW4gUmF5IHJheSwgZmxvYXQgdCkKewogICAgcmV0dXJuIHJheS5vZC5vICsgcmF5Lm9kLmQgKiB0Owp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIEZpbHRlcnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKI2RlZmluZSBrQXBwbHlCbG9vbSAgICAgICAgICAgICAgIHRydWUKI2RlZmluZSBrQmxvb21HYWluICAgICAgICAgICAgICAgIDEuNSAgICAgICAgICAgICAvLyBUaGUgc3RyZW5ndGggb2YgdGhlIGJsb29tIGVmZmVjdCAKI2RlZmluZSBrQmxvb21UaW50ICAgICAgICAgICAgICAgIHZlYzMoMS4wKSAgICAgICAvLyBUaGUgdGludCBhcHBsaWVkIHRvIHRoZSBibG9vbSBlZmZlY3QKI2RlZmluZSBrQmxvb21XaWR0aCAgICAgICAgICAgICAgICgwLjEgLyBmbG9hdChrU2NyZWVuRG93bnNhbXBsZSkpICAgICAgICAgICAgIC8vIFRoZSB3aWR0aCBvZiB0aGUgYmxvb20gZWZmZWN0IGFzIGEgcHJvcG9ydGlvbiBvZiB0aGUgYnVmZmVyIHdpZHRoCiNkZWZpbmUga0Jsb29tSGVpZ2h0ICAgICAgICAgICAgICAoMC4xIC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpKSAgICAgICAgICAgICAvLyBUaGUgaGVpZ2h0IG9mIHRoZSBibG9vbSBlZmZlY3QgYXMgYSBwcm9wb3J0aW9uIG9mIHRoZSBidWZmZXIgaGVpZ2h0CiNkZWZpbmUga0Jsb29tU2hhcGUgICAgICAgICAgICAgICAwLjUgICAgICAgICAgICAgLy8gVGhlIGZhbGwtb2ZmIG9mIHRoZSBibG9vbSBzaGFwZS4gSGlnaGVyIHZhbHVlID0gc3RlZXBlciBmYWxsLW9mZgojZGVmaW5lIGtCbG9vbURvd25zYW1wbGUgICAgICAgICAgMiAgICAgICAgICAgICAgIC8vIEhvdyBtdWNoIHRoZSBibG9vbSBidWZmZXIgaXMgZG93bnNhbXBsZWQuIEhpZ2hlciB2YWx1ZSA9IGxvd2VyIHF1YWxpdHksIGJ1dCBmYXN0ZXIKI2RlZmluZSBrRGVidWdCbG9vbSAgICAgICAgICAgICAgIGZhbHNlICAgICAgICAgICAvLyBTaG93IG9ubHkgdGhlIGJsb29tIGluIHRoZSBmaW5hbCBjb21wCiNkZWZpbmUga0Jsb29tQnVybkluICAgICAgICAgICAgICB2ZWMzKDAuNSkgICAgIAoKLy8gU2VwZXJhYmxlIGJsb29tIGZ1bmN0aW9uLiBUaGlzIGZpbHRlciByZXF1aXJlcyB0d28gcGFzc2VzIGluIHRoZSBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBkaXJlY3Rpb25zIHdoaWNoIGFyZSBjb21iaW5lZCBhcyBhIHBvc3QtcHJvY2VzcwovLyBlZmZlY3QgYWZ0ZXIgZWFjaCBmcmFtZS4gVGhlIGFjY3VyYWN5L2Nvc3Qgb2YgdGhlIGVmZmVjdCBjYW4gYmUgdHVuZWQgYnkgZGlhbGluZyB0aGUga0Jsb29tRG93bnNhbXBsZSBwYXJhbWV0ZXIuIAp2ZWMzIEJsb29tKHZlYzIgZnJhZ0Nvb3JkLCB2ZWMzIGlSZXNvbHV0aW9uLCBpdmVjMiBkZWx0YSwgc2FtcGxlcjJEIHJlbmRlclNhbXBsZXIpCnsgICAgICAgIAogICAgdmVjMiBzY2FsZWRSZXNvbHV0aW9uID0gdmVjMihpUmVzb2x1dGlvbi54LCBpUmVzb2x1dGlvbi55KSAvIGZsb2F0KChkZWx0YS54ID09IDEpID8ga0Jsb29tRG93bnNhbXBsZSA6IDEpOwogICAKICAgIGlmKGZyYWdDb29yZC54ID4gc2NhbGVkUmVzb2x1dGlvbi54IHx8IGZyYWdDb29yZC55ID4gc2NhbGVkUmVzb2x1dGlvbi55KSB7IHJldHVybiBrWmVybzsgfQogICAgCiAgICBmbG9hdCBibG9vbVNpemUgPSAoZGVsdGEueCA9PSAxKSA/IGtCbG9vbVdpZHRoIDoga0Jsb29tSGVpZ2h0OwogICAgCiAgICBpbnQga0tlcm5lbFdpZHRoID0gaW50KGJsb29tU2l6ZSAqIG1heChpUmVzb2x1dGlvbi54LCBpUmVzb2x1dGlvbi55KSArIDAuNSkgLyAoKGRlbHRhLnggPT0gMSkgPyBrQmxvb21Eb3duc2FtcGxlIDogMSk7CiAgICB2ZWMzIHN1bVdlaWdodHMgPSB2ZWMzKDAuMCk7CiAgICB2ZWMzIHN1bVJnYiA9IHZlYzMoMC4wKTsKICAgIGZvcihpbnQgaSA9IC1rS2VybmVsV2lkdGg7IGkgPD0ga0tlcm5lbFdpZHRoOyBpKyspCiAgICB7ICAgICAgCiAgICAgICAgdmVjMiB4eSA9IHZlYzIoZnJhZ0Nvb3JkLnggKyBmbG9hdChpICogZGVsdGEueCksIGZyYWdDb29yZC55ICsgZmxvYXQoaSAqIGRlbHRhLnkpKTsKICAgICAgICAKICAgICAgICBpZihkZWx0YS54ID09IDEpIHsgeHkgKj0gZmxvYXQoa0Jsb29tRG93bnNhbXBsZSk7IH0KICAgICAgICBlbHNlIHsgeHkgLz0gZmxvYXQoa0Jsb29tRG93bnNhbXBsZSk7IH0KICAgICAgICAKICAgICAgICBpZih4eS54IDwgMC4wIHx8IHh5LnggPiBpUmVzb2x1dGlvbi54IHx8IHh5LnkgPCAwLjAgfHwgeHkueSA+IGlSZXNvbHV0aW9uLnkpIHsgY29udGludWU7IH0KICAgICAgICAgICAgCiAgICAgICAgdmVjNCB0ZXhlbCA9IHRleHR1cmUocmVuZGVyU2FtcGxlciwgeHkgLyBpUmVzb2x1dGlvbi54eSk7CiAgICAgICAgdmVjMyByZ2IgPSBtYXgodGV4ZWwueHl6IC8gbWF4KDEuMCwgdGV4ZWwudyksIHZlYzMoMC4wKSk7ICAgICAgICAgICAgCiAgICAgICAgZmxvYXQgZCA9IGZsb2F0KGFicyhpKSkgLyBmbG9hdChrS2VybmVsV2lkdGgpOwogICAgICAgICAgIAogICAgICAgIHZlYzMgd2VpZ2h0ID0ga09uZTsKICAgICAgICBpZihpICE9IDApCiAgICAgICAgewogICAgICAgICAgICAvLyBDdXJyZW50bHkgdXNpbmcgYSBzaW5nbGUgd2VpZ2h0IGFsdGhvdWdoIHRoaXMgZWZmZWN0IGNhbiBiZSBkb25lIHBlci1jaGFubmVsCiAgICAgICAgICAgIGZsb2F0IGtlcm5lbCA9IHBvdyhtYXgoMC4wLCAoZXhwKC1zcXIoZCAqIDQuMCkpIC0gMC4wMTgzMTU2KSAvIDAuOTgxNjg0KSwga0Jsb29tU2hhcGUpOyAgICAgICAgICAgIAogICAgICAgICAgICB3ZWlnaHQgPSBrT25lICoga2VybmVsOwogICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgc3VtUmdiICs9ICgoZGVsdGEueSA9PSAxKSA/IHJnYiA6IG1heChrWmVybywgcmdiIC0ga0Jsb29tQnVybkluKSkgKiB3ZWlnaHQ7ICAgICAgICAgCiAgICAgICAgc3VtV2VpZ2h0cyArPSB3ZWlnaHQ7CiAgICB9CiAgICAKICAgIHN1bVJnYiA9IHN1bVJnYiAvIHN1bVdlaWdodHM7CiAgICAKICAgIHJldHVybiAoZGVsdGEueCA9PSAxKSA/IHN1bVJnYiA6IChzdW1SZ2IgKiBrQmxvb21UaW50KTsKfQ",
					"AQAAAAAAAAABAAAAAAAAAAAAAAD7ZgAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAimYAAAAAAAAAAAAAimYAAAAAAACKZgAAAAAAAIpmAAAjZGVmaW5lIGtDbGlwVmlldyAxCgojZGVmaW5lIGtTY3JlZW5Eb3duc2FtcGxlIDEKCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gR2xvYmFsIHZhcmlhYmxlcwoKdmVjMiBnUmVzb2x1dGlvbjsKdmVjMiBnRnJhZ0Nvb3JkOwp1dmVjNCBybmdTZWVkOwpmbG9hdCBnRHh5RHV2OwoKdm9pZCBTZXRHbG9iYWxzKHZlYzIgZnJhZ0Nvb3JkLCB2ZWMyIHJlc29sdXRpb24pCnsKICAgIGdGcmFnQ29vcmQgPSBmcmFnQ29vcmQ7CiAgICBnUmVzb2x1dGlvbiA9IHJlc29sdXRpb247CiAgICAKICAgICAvLyBGaXJzdCBkZXJpdmF0aXZlIG9mIHNjcmVlbiB0byB3b3JsZCBzcGFjZSAoYXNzdW1pbmcgc3F1YXJlIHBpeGVscykKICAgIGdEeHlEdXYgPSAxLjAgLyBnUmVzb2x1dGlvbi54Owp9Cgpib29sIElzVGV4ZWxJbkNsaXBSZWdpb24odmVjMiB4eSkKewojaWYga0NsaXBWaWV3ID09IDEKICAgIHJldHVybiAoYWJzKHh5LnggLSAoZ1Jlc29sdXRpb24ueCAvIDIuMCkpIDwgZ1Jlc29sdXRpb24ueSAvIDIuMCk7CiNlbHNlCiAgICByZXR1cm4gdHJ1ZTsKI2VuZGlmCn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgTWF0aCBmdW5jdGlvbnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKI2RlZmluZSBrUGkgICAgICAgICAgICAgICAgICAgIDMuMTQxNTkyNjUzNTkKI2RlZmluZSBrSW52UGkgICAgICAgICAgICAgICAgICgxLjAgLyAzLjE0MTU5MjY1MzU5KQojZGVmaW5lIGtUd29QaSAgICAgICAgICAgICAgICAgKDIuMCAqIGtQaSkKI2RlZmluZSBrSGFsZlBpICAgICAgICAgICAgICAgICgwLjUgKiBrUGkpCiNkZWZpbmUga1Jvb3QyICAgICAgICAgICAgICAgICAxLjQxNDIxMzU2MjM3CiNkZWZpbmUga0ZsdE1heCAgICAgICAgICAgICAgICAzLjQwMjgyMzQ2NmUrMzgKI2RlZmluZSBrSW50TWF4ICAgICAgICAgICAgICAgIDB4N2ZmZmZmZmYKI2RlZmluZSBrT25lICAgICAgICAgICAgICAgICAgIHZlYzMoMS4wKQojZGVmaW5lIGtaZXJvICAgICAgICAgICAgICAgICAgdmVjMygwLjApCiNkZWZpbmUga1BpbmsgICAgICAgICAgICAgICAgICB2ZWMzKDEuMCwgMC4wLCAwLjIpCgpmbG9hdCBjdWJydChmbG9hdCBhKSAgICAgICAgICAgeyByZXR1cm4gc2lnbihhKSAqIHBvdyhhYnMoYSksIDEuMCAvIDMuMCk7IH0KZmxvYXQgdG9SYWQoZmxvYXQgZGVnKSAgICAgICAgIHsgcmV0dXJuIGtUd29QaSAqIGRlZyAvIDM2MC4wOyB9CmZsb2F0IHRvRGVnKGZsb2F0IHJhZCkgICAgICAgICB7IHJldHVybiAzNjAuMCAqIHJhZCAvIGtUd29QaTsgfQpmbG9hdCBzcXIoZmxvYXQgYSkgICAgICAgICAgICAgeyByZXR1cm4gYSAqIGE7IH0KdmVjMyBzcXIodmVjMyBhKSAgICAgICAgICAgICAgIHsgcmV0dXJuIGEgKiBhOyB9CmludCBzcXIoaW50IGEpICAgICAgICAgICAgICAgICB7IHJldHVybiBhICogYTsgfQppbnQgbW9kMihpbnQgYSwgaW50IGIpICAgICAgICAgeyByZXR1cm4gKChhICUgYikgKyBiKSAlIGI7IH0KZmxvYXQgbW9kMihmbG9hdCBhLCBmbG9hdCBiKSAgIHsgcmV0dXJuIG1vZChtb2QoYSwgYikgKyBiLCBiKTsgfQp2ZWMzIG1vZDIodmVjMyBhLCB2ZWMzIGIpICAgICAgeyByZXR1cm4gbW9kKG1vZChhLCBiKSArIGIsIGIpOyB9CmZsb2F0IGxlbmd0aDIodmVjMiB2KSAgICAgICAgICB7IHJldHVybiBkb3Qodiwgdik7IH0KZmxvYXQgbGVuZ3RoMih2ZWMzIHYpICAgICAgICAgIHsgcmV0dXJuIGRvdCh2LCB2KTsgfQppbnQgc3VtKGl2ZWMyIGEpICAgICAgICAgICAgICAgeyByZXR1cm4gYS54ICsgYS55OyB9CmZsb2F0IGx1bWluYW5jZSh2ZWMzIHYpICAgICAgICB7IHJldHVybiB2LnggKiAwLjE3NjkxICsgdi55ICogMC44MTI0ICsgdi56ICogMC4wMTA2MzsgfQpmbG9hdCBtZWFuKHZlYzMgdikgICAgICAgICAgICAgeyByZXR1cm4gdi54IC8gMy4wICsgdi55IC8gMy4wICsgdi56IC8gMy4wOyB9CnZlYzQgbXVsNCh2ZWMzIGEsIG1hdDQgbSkgICAgICB7IHJldHVybiB2ZWM0KGEsIDEuMCkgKiBtOyB9CnZlYzMgbXVsMyh2ZWMzIGEsIG1hdDQgbSkgICAgICB7IHJldHVybiAodmVjNChhLCAxLjApICogbSkueHl6OyB9CmZsb2F0IHNpbjAxKGZsb2F0IGEpICAgICAgICAgICB7IHJldHVybiAwLjUgKiBzaW4oYSkgKyAwLjU7IH0KZmxvYXQgY29zMDEoZmxvYXQgYSkgICAgICAgICAgIHsgcmV0dXJuIDAuNSAqIGNvcyhhKSArIDAuNTsgfQpmbG9hdCBzYXR1cmF0ZShmbG9hdCBhKSAgICAgICAgeyByZXR1cm4gY2xhbXAoYSwgMC4wLCAxLjApOyB9CnZlYzMgc2F0dXJhdGUodmVjMyBhKSAgICAgICAgeyByZXR1cm4gY2xhbXAoYSwgMC4wLCAxLjApOyB9CmZsb2F0IHNhdzAxKGZsb2F0IGEpICAgICAgICAgICB7IHJldHVybiBhYnMoZnJhY3QoYSkgKiAyLjAgLSAxLjApOyB9CmZsb2F0IGN3aXNlTWF4KHZlYzMgdikgICAgICAgICB7IHJldHVybiAodi54ID4gdi55KSA/ICgodi54ID4gdi56KSA/IHYueCA6IHYueikgOiAoKHYueSA+IHYueikgPyB2LnkgOiB2LnopOyB9CmZsb2F0IGN3aXNlTWF4KHZlYzIgdikgICAgICAgICB7IHJldHVybiAodi54ID4gdi55KSA/IHYueCA6IHYueTsgfQpmbG9hdCBjd2lzZU1pbih2ZWMzIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA8IHYueSkgPyAoKHYueCA8IHYueikgPyB2LnggOiB2LnopIDogKCh2LnkgPCB2LnopID8gdi55IDogdi56KTsgfQpmbG9hdCBjd2lzZU1pbih2ZWMyIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA8IHYueSkgPyB2LnggOiB2Lnk7IH0Kdm9pZCBzb3J0KGlub3V0IGZsb2F0IGEsIGlub3V0IGZsb2F0IGIpIHsgaWYoYSA+IGIpIHsgZmxvYXQgcyA9IGE7IGEgPSBiOyBiID0gczsgfSB9CnZvaWQgc3dhcChpbm91dCBmbG9hdCBhLCBpbm91dCBmbG9hdCBiKSB7IGZsb2F0IHMgPSBhOyBhID0gYjsgYiA9IHM7IH0KCnZlYzMgc2FmZUF0YW4odmVjMyBhLCB2ZWMzIGIpCnsKICAgIHZlYzMgcjsKICAgICNkZWZpbmUga0F0YW5FcHNpbG9uIDFlLTEwCiAgICByLnggPSAoYWJzKGEueCkgPCBrQXRhbkVwc2lsb24gJiYgYWJzKGIueCkgPCBrQXRhbkVwc2lsb24pID8gMC4wIDogYXRhbihhLngsIGIueCk7IAogICAgci55ID0gKGFicyhhLnkpIDwga0F0YW5FcHNpbG9uICYmIGFicyhiLnkpIDwga0F0YW5FcHNpbG9uKSA/IDAuMCA6IGF0YW4oYS55LCBiLnkpOyAKICAgIHIueiA9IChhYnMoYS56KSA8IGtBdGFuRXBzaWxvbiAmJiBhYnMoYi56KSA8IGtBdGFuRXBzaWxvbikgPyAwLjAgOiBhdGFuKGEueiwgYi56KTsgCiAgICByZXR1cm4gcjsKfQoKZmxvYXQgU21vb3RoU3RlcChmbG9hdCBhLCBmbG9hdCBiLCBmbG9hdCB4KSB7IHJldHVybiBtaXgoYSwgYiwgeCAqIHggKiAoMy4wIC0gMi4wICogeCkpOyB9CnZlYzQgU21vb3RoU3RlcCh2ZWM0IGEsIHZlYzQgYiwgZmxvYXQgeCkgICAgeyByZXR1cm4gbWl4KGEsIGIsIHggKiB4ICogKDMuMCAtIDIuMCAqIHgpKTsgfQpmbG9hdCBTbW9vdGhTdGVwKGZsb2F0IHgpICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIG1peCgwLjAsIDEuMCwgeCAqIHggKiAoMy4wIC0gMi4wICogeCkpOyB9CgpmbG9hdCBQYWRkZWRTbW9vdGhTdGVwKGZsb2F0IHgsIGZsb2F0IGEsIGZsb2F0IGIpCnsgCiAgICByZXR1cm4gU21vb3RoU3RlcChzYXR1cmF0ZSh4ICogKGEgKyBiICsgMS4wKSAtIGEpKTsKfQoKZmxvYXQgUGFkZGVkU21vb3RoU3RlcChmbG9hdCB4LCBmbG9hdCBhKQp7CiAgICByZXR1cm4gUGFkZGVkU21vb3RoU3RlcCh4LCBhLCBhKTsKfQoKZmxvYXQgSW1wdWxzZShmbG9hdCB4LCBmbG9hdCBheGlzLCBmbG9hdCBzdGREZXYpCnsKICAgIHJldHVybiBleHAoLXNxcigoeCAtIGF4aXMpIC8gc3RkRGV2KSk7Cn0KCmZsb2F0IEFuaXNvdHJvcGljSW1wdWxzZShmbG9hdCB4LCBmbG9hdCBheGlzLCBmbG9hdCBzdGREZXZBLCBmbG9hdCBzdGREZXZCKQp7CiAgICBmbG9hdCBpbXB1bHNlID0gKHggPCBheGlzKSA/IGV4cCgtc3FyKCh4IC0gYXhpcykgLyBzdGREZXZBKSkgOiBleHAoLXNxcigoeCAtIGF4aXMpIC8gc3RkRGV2QikpOwogICAgcmV0dXJuIHNhdHVyYXRlKChpbXB1bHNlIC0gMC4wNSkgLyAoMS4wIC0gMC4wNSkpOwp9CgpmbG9hdCBLaWNrRHJvcChmbG9hdCB0LCB2ZWMyIHAwLCB2ZWMyIHAxLCB2ZWMyIHAyLCB2ZWMyIHAzKQp7CiAgICBpZih0IDwgcDEueCkKICAgIHsKICAgICAgICByZXR1cm4gbWl4KHAwLnksIHAxLnksIG1heCgwLjAsIGV4cCgtc3FyKCh0IC0gcDEueCkqMi4xNDU5NjYwMjYyODkzNDcvKHAxLngtcDAueCkpKSAtIDAuMDEpIC8gMC45OSk7CiAgICB9CiAgICBlbHNlIGlmKHQgPCBwMi54KQogICAgewogICAgICAgIHJldHVybiBtaXgocDEueSwgcDIueSwgKHQgLSBwMS54KSAvIChwMi54IC0gcDEueCkpOwogICAgfQogICAgZWxzZQogICAgeyAgCiAgICAgICAgcmV0dXJuIG1peChwMy55LCBwMi55LCBtYXgoMC4wLCBleHAoLXNxcigodCAtIHAyLngpKjIuMTQ1OTY2MDI2Mjg5MzQ3LyhwMy54LXAyLngpKSkgLSAwLjAxKSAvIDAuOTkpOwogICAgfQp9CgpmbG9hdCBLaWNrRHJvcChmbG9hdCB0LCB2ZWMyIHAwLCB2ZWMyIHAxLCB2ZWMyIHAyKQp7CiAgICByZXR1cm4gS2lja0Ryb3AodCwgcDAsIHAxLCBwMSwgcDIpOwp9Cgpib29sIFF1YWRyYXRpY1NvbHZlKGZsb2F0IGEsIGZsb2F0IGIsIGZsb2F0IGMsIG91dCBmbG9hdCB0MCwgb3V0IGZsb2F0IHQxKQp7CiAgICBmbG9hdCBiMmFjNCA9IGIgKiBiIC0gNC4wICogYSAqIGM7CiAgICBpZihiMmFjNCA8IDAuMCkgeyByZXR1cm4gZmFsc2U7IH0gCgogICAgZmxvYXQgc3FydGIyYWM0ID0gc3FydChiMmFjNCk7CiAgICB0MCA9ICgtYiArIHNxcnRiMmFjNCkgLyAoMi4wICogYSk7CiAgICB0MSA9ICgtYiAtIHNxcnRiMmFjNCkgLyAoMi4wICogYSk7ICAgIAogICAgcmV0dXJuIHRydWU7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgMkQgU1ZHCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCmZsb2F0IFNERkxpbmUodmVjMiBwLCB2ZWMyIHYwLCB2ZWMyIHYxLCBmbG9hdCB0aGlja25lc3MpCnsKICAgIHYxIC09IHYwOwogICAgZmxvYXQgdCA9IHNhdHVyYXRlKChkb3QocCwgdjEpIC0gZG90KHYwLCB2MSkpIC8gZG90KHYxLCB2MSkpOwogICAgdmVjMiBwZXJwID0gdjAgKyB0ICogdjE7CiAgICByZXR1cm4gc2F0dXJhdGUoKHRoaWNrbmVzcyAtIGxlbmd0aChwIC0gcGVycCkpIC8gZ0R4eUR1dik7Cn0KCmZsb2F0IFNERlF1YWQodmVjMiBwLCB2ZWMyIHZbNF0sIGZsb2F0IHRoaWNrbmVzcykKewogICAgZmxvYXQgYyA9IDAuMDsKICAgIGZvcihpbnQgaSA9IDA7IGkgPCA0OyBpKyspCiAgICB7CiAgICAgICAgYyA9IG1heChjLCBTREZMaW5lKHAsIHZbaV0sIHZbKGkrMSklNF0sIHRoaWNrbmVzcykpOyAKICAgIH0KIAogICAgcmV0dXJuIGM7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgMkQgcHJpbWl0aXZlIHRlc3RzCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCmJvb2wgSXNQb2ludEluUXVhZCh2ZWMyIHV2LCB2ZWMyIHZbNF0pCnsKICAgIGZvcihpbnQgaSA9IDA7IGkgPCA0OyBpKyspCiAgICB7CiAgICAgICAgaWYoZG90KHV2IC0gdltpXSwgdltpXSAtIHZbKGkrMSklNF0pID4gMC4wKSB7IHJldHVybiBmYWxzZTsgfQogICAgfQogICAgcmV0dXJuIHRydWU7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgVHJhbnNmb3JtcyAKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKbWF0MyBXb3JsZFRvVmlld01hdHJpeChmbG9hdCByb3QsIHZlYzIgdHJhbnMsIGZsb2F0IHNjYSkKeyAgIAogICAgcmV0dXJuIG1hdDModmVjMyhjb3Mocm90KSAvIHNjYSwgc2luKHJvdCkgLyBzY2EsIHRyYW5zLngpLCAKICAgICAgICAgICAgICAgIHZlYzMoLXNpbihyb3QpIC8gc2NhLCBjb3Mocm90KSAvIHNjYSwgdHJhbnMueSksCiAgICAgICAgICAgICAgICB2ZWMzKDAuMCwgMC4wLCAxLjApKTsKfQoKbWF0MyBXb3JsZFRvVmlld01hdHJpeCh2ZWMyIHRyYW5zLCBmbG9hdCBzY2EpCnsgICAKICAgIHJldHVybiBtYXQzKHZlYzMoMS4wIC8gc2NhLCAwLjAsIHRyYW5zLngpLCAKICAgICAgICAgICAgICAgIHZlYzMoMC4wLCAxLjAgLyBzY2EsIHRyYW5zLnkpLAogICAgICAgICAgICAgICAgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KCnZlYzIgVHJhbnNmb3JtU2NyZWVuVG9Xb3JsZCh2ZWMyIHApCnsgICAKICAgIHJldHVybiAocCAtIHZlYzIoZ1Jlc29sdXRpb24ueHkpICogMC41KSAvIGZsb2F0KGdSZXNvbHV0aW9uLnkpOyAKfQoKCnZlYzMgQ2FydGVzaWFuMkRUb0JhcnljZW50cmljKHZlYzIgcCkKeyAgICAKICAgIHJldHVybiB2ZWMzKHAsIDAuMCkgKiBtYXQzKHZlYzMoMC4wLCAxLjAgLyAwLjg2NjAyNTQwMzc4NDQzODcsIDAuMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMygxLjAsIDAuNTc3MzUwMjY5MTg5NjI1NywgMC4wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKC0xLjAsIDAuNTc3MzUwMjY5MTg5NjI1NywgMC4wKSk7CiAgICAKfQoKLy8gTWFwcyBhbiBpbnB1dCB1diBwb3NpdGlvbiB0byBwZXJpb2RpYyBoZXhhZ29uYWwgdGlsaW5nCi8vICAgICBpbm91dCB2ZWMyIHV2OiBUaGUgbWFwcGVkIHV2IGNvb3JkaW5hdGUKLy8gICAgIG91dCB2ZWMzIGJhcnk6IFRoZSBCYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBhdCB0aGUgcG9pbnQgb24gdGhlIGhleGFnb24KLy8gICAgIG91dCBpdmVjMiBpajogVGhlIGNvb3JkaW5hdGUgb2YgdGhlIHRpbGUKdmVjMiBDYXJ0ZXNpYW4yRFRvSGV4YWdvbmFsVGlsaW5nKGluIHZlYzIgdXYsIG91dCB2ZWMzIGJhcnksIG91dCBpdmVjMiBpaikKeyAgICAKICAgICNkZWZpbmUga0hleFJhdGlvIHZlYzIoMS41LCAwLjg2NjAyNTQwMzc4NDQzODcpCiAgICB2ZWMyIHV2Q2xpcCA9IG1vZCh1diArIGtIZXhSYXRpbywgMi4wICoga0hleFJhdGlvKSAtIGtIZXhSYXRpbzsKICAgIAogICAgaWogPSBpdmVjMigodXYgKyBrSGV4UmF0aW8pIC8gKDIuMCAqIGtIZXhSYXRpbykpICogMjsKICAgIGlmKHV2LnggKyBrSGV4UmF0aW8ueCA8PSAwLjApIGlqLnggLT0gMjsKICAgIGlmKHV2LnkgKyBrSGV4UmF0aW8ueSA8PSAwLjApIGlqLnkgLT0gMjsKICAgIAogICAgYmFyeSA9IENhcnRlc2lhbjJEVG9CYXJ5Y2VudHJpYyh1dkNsaXApOwogICAgaWYoYmFyeS54ID4gMC4wKQogICAgewogICAgICAgIGlmKGJhcnkueiA+IDEuMCkgeyBiYXJ5ICs9IHZlYzMoLTEuMCwgMS4wLCAtMi4wKTsgaWogKz0gaXZlYzIoLTEsIDEpOyB9CiAgICAgICAgZWxzZSBpZihiYXJ5LnkgPiAxLjApIHsgYmFyeSArPSB2ZWMzKC0xLjAsIC0yLjAsIDEuMCk7IGlqICs9IGl2ZWMyKDEsIDEpOyB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaWYoYmFyeS55IDwgLTEuMCkgeyBiYXJ5ICs9IHZlYzMoMS4wLCAyLjAsIC0xLjApOyBpaiArPSBpdmVjMigtMSwgLTEpOyB9CiAgICAgICAgZWxzZSBpZihiYXJ5LnogPCAtMS4wKSB7IGJhcnkgKz0gdmVjMygxLjAsIC0xLjAsIDIuMCk7IGlqICs9IGl2ZWMyKDEsIC0xKTsgfQogICAgfQoKICAgIHJldHVybiB2ZWMyKGJhcnkueSAqIDAuNTc3MzUwMjY5MTg5NjI1NyAtIGJhcnkueiAqIDAuNTc3MzUwMjY5MTg5NjI1NywgYmFyeS54KTsKfQoKYm9vbCBJbnZlcnNlU3Rlcm5vZ3JhcGgoaW5vdXQgdmVjMiB1diwgZmxvYXQgem9vbSkKewogICAgZmxvYXQgdGhldGEgPSBsZW5ndGgodXYpICoga1BpICogem9vbTsKICAgIGlmKHRoZXRhID49IGtQaSAtIDFlLTEpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAKICAgIGZsb2F0IHBoaSA9IGF0YW4oLXV2LnksIC11di54KSArIGtQaTsKICAgIAogICAgdmVjMyBzcGggPSB2ZWMzKGNvcyhwaGkpICogc2luKHRoZXRhKSwgc2luKHBoaSkgKiBzaW4odGhldGEpLCAtY29zKHRoZXRhKSk7CiAgICAKICAgIHV2ID0gdmVjMihzcGgueCAvICgxLjAgLSBzcGgueiksIHNwaC55IC8gKDEuMCAtIHNwaC56KSk7CiAgICByZXR1cm4gdHJ1ZTsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBSYW5kb20gbnVtYmVyIGdlbmVyYXRpb24KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKLy8gUGVybXV0ZWQgY29uZ3J1ZW50aWFsIGdlbmVyYXRvciBmcm9tICJIYXNoIEZ1bmN0aW9ucyBmb3IgR1BVIFJlbmRlcmluZyIgKEphcnp5bnNraSBhbmQgT2xhbm8pCi8vIGh0dHA6Ly9qY2d0Lm9yZy9wdWJsaXNoZWQvMDAwOS8wMy8wMi9wYXBlci5wZGYKdXZlYzQgUENHQWR2YW5jZSgpCnsKICAgIHJuZ1NlZWQgPSBybmdTZWVkICogMTY2NDUyNXUgKyAxMDEzOTA0MjIzdTsKICAgIAogICAgcm5nU2VlZC54ICs9IHJuZ1NlZWQueSpybmdTZWVkLnc7IAogICAgcm5nU2VlZC55ICs9IHJuZ1NlZWQueipybmdTZWVkLng7IAogICAgcm5nU2VlZC56ICs9IHJuZ1NlZWQueCpybmdTZWVkLnk7IAogICAgcm5nU2VlZC53ICs9IHJuZ1NlZWQueSpybmdTZWVkLno7CiAgICAKICAgIHJuZ1NlZWQgXj0gcm5nU2VlZCA+PiAxNnU7CiAgICAKICAgIHJuZ1NlZWQueCArPSBybmdTZWVkLnkqcm5nU2VlZC53OyAKICAgIHJuZ1NlZWQueSArPSBybmdTZWVkLnoqcm5nU2VlZC54OyAKICAgIHJuZ1NlZWQueiArPSBybmdTZWVkLngqcm5nU2VlZC55OyAKICAgIHJuZ1NlZWQudyArPSBybmdTZWVkLnkqcm5nU2VlZC56OwogICAgCiAgICByZXR1cm4gcm5nU2VlZDsKfQoKLy8gR2VuZXJhdGVzIGEgdHVwbGUgb2YgY2Fub25pY2FsIHJhbmRvbSBudW1iZXIgYW5kIHVzZXMgdGhlbSB0byBzYW1wbGUgYW4gaW5wdXQgdGV4dHVyZQp2ZWM0IFJhbmQoc2FtcGxlcjJEIHNhbXBsZXIpCnsKICAgIHJldHVybiB0ZXhlbEZldGNoKHNhbXBsZXIsIChpdmVjMihnRnJhZ0Nvb3JkKSArIGl2ZWMyKFBDR0FkdmFuY2UoKSA+PiAxNikpICUgMTAyNCwgMCk7Cn0KCi8vIEdlbmVyYXRlcyBhIHR1cGxlIG9mIGNhbm9uaWNhbCByYW5kb20gbnVtYmVycyBpbiB0aGUgcmFuZ2UgWzAsIDFdCnZlYzQgUmFuZCgpCnsKICAgIHJldHVybiB2ZWM0KFBDR0FkdmFuY2UoKSkgLyBmbG9hdCgweGZmZmZmZmZmdSk7Cn0KCi8vIFNlZWQgdGhlIFBDRyBoYXNoIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgZnJhbWUgbXVsdGlwbGVkIGJ5IGEgcHJpbWUKdm9pZCBQQ0dJbml0aWFsaXNlKHVpbnQgZnJhbWUpCnsgICAgCiAgICBybmdTZWVkID0gdXZlYzQoMjAyMTl1LCA3MjQzdSwgMTI1NDd1LCAyODU3M3UpICogZnJhbWU7Cn0KCi8vIFJldmVyc2UgdGhlIGJpdHMgb2YgMzItYml0IGludGV0ZXIKdWludCBSYWRpY2FsSW52ZXJzZSh1aW50IGkpCnsKICAgIGkgPSAoKGkgJiAweGZmZmZ1KSA8PCAxNnUpIHwgKGkgPj4gMTZ1KTsKICAgIGkgPSAoKGkgJiAweDAwZmYwMGZmdSkgPDwgOHUpIHwgKChpICYgMHhmZjAwZmYwMHUpID4+IDh1KTsKICAgIGkgPSAoKGkgJiAweDBmMGYwZjBmdSkgPDwgNHUpIHwgKChpICYgMHhmMGYwZjBmMHUpID4+IDR1KTsKICAgIGkgPSAoKGkgJiAweDMzMzMzMzMzdSkgPDwgMnUpIHwgKChpICYgMHhjY2NjY2NjY3UpID4+IDJ1KTsgICAgCiAgICBpID0gKChpICYgMHg1NTU1NTU1NXUpIDw8IDF1KSB8ICgoaSAmIDB4YWFhYWFhYWF1KSA+PiAxdSk7ICAgICAgICAKICAgIHJldHVybiBpOwp9CgovLyBTYW1wbGVzIHRoZSByYWRpeC0yIEhhbHRvbiBzZXF1ZW5jZSBmcm9tIHNlZWQgdmFsdWUsIGkKZmxvYXQgSGFsdG9uQmFzZTIodWludCBpKQp7ICAgIAogICAgcmV0dXJuIGZsb2F0KFJhZGljYWxJbnZlcnNlKGkpKSAvIGZsb2F0KDB4ZmZmZmZmZmZ1KTsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBIYXNoIGZ1bmN0aW9ucwovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgovLyBDb25zdGFudHMgZm9yIHRoZSBGb3dsZXItTm9sbC1WbyBoYXNoIGZ1bmN0aW9uCi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zvd2xlci1Ob2xsLVZvX2hhc2hfZnVuY3Rpb24KI2RlZmluZSBrRk5WUHJpbWUgICAgICAgICAgICAgIDB4MDEwMDAxOTN1CiNkZWZpbmUga0ZOVk9mZnNldCAgICAgICAgICAgICAweDgxMWM5ZGM1dQojZGVmaW5lIGtEaW1zUGVyQm91bmNlICAgICAgICAgNAoKLy8gTWl4IGFuZCBjb21iaW5lIHR3byBoYXNoZXMKdWludCBIYXNoQ29tYmluZSh1aW50IGEsIHVpbnQgYikKewogICAgcmV0dXJuICgoKGEgPDwgKDMxdSAtIChiICYgMzF1KSkpIHwgKGEgPj4gKGIgJiAzMXUpKSkpIF4KICAgICAgICAgICAgKChiIDw8IChhICYgMzF1KSkgfCAoYiA+PiAoMzF1IC0gKGEgJiAzMXUpKSkpOwp9CgovLyBDb21wdXRlIGEgMzItYml0IEZvd2xlci1Ob2xsLVZvIGhhc2ggZm9yIHRoZSBnaXZlbiBpbnB1dAp1aW50IEhhc2hPZih1aW50IGkpCnsKICAgIHVpbnQgaCA9IChrRk5WT2Zmc2V0IF4gKGkgJiAweGZmdSkpICoga0ZOVlByaW1lOwogICAgaCA9IChoIF4gKChpID4+IDh1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICBoID0gKGggXiAoKGkgPj4gMTZ1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICBoID0gKGggXiAoKGkgPj4gMjR1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICByZXR1cm4gaDsKfQoKdWludCBIYXNoT2YoaW50IGEpIHsgcmV0dXJuIEhhc2hPZih1aW50KGEpKTsgfQp1aW50IEhhc2hPZih1aW50IGEsIHVpbnQgYikgeyByZXR1cm4gSGFzaENvbWJpbmUoSGFzaE9mKGEpLCBIYXNoT2YoYikpOyB9CnVpbnQgSGFzaE9mKHVpbnQgYSwgdWludCBiLCB1aW50IGMpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hDb21iaW5lKEhhc2hPZihhKSwgSGFzaE9mKGIpKSwgSGFzaE9mKGMpKTsgfQp1aW50IEhhc2hPZih1aW50IGEsIHVpbnQgYiwgdWludCBjLCB1aW50IGQpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hDb21iaW5lKEhhc2hPZihhKSwgSGFzaE9mKGIpKSwgSGFzaENvbWJpbmUoSGFzaE9mKGMpLCBIYXNoT2YoZCkpKTsgfQp1aW50IEhhc2hPZih2ZWMyIHYpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hPZih1aW50KHYueCkpLCBIYXNoT2YodWludCh2LnkpKSk7IH0KdWludCBIYXNoT2YoaXZlYzIgdikgeyByZXR1cm4gSGFzaENvbWJpbmUoSGFzaE9mKHVpbnQodi54KSksIEhhc2hPZih1aW50KHYueSkpKTsgfQoKLy8gU2FtcGxlcyB0aGUgcmFkaXgtMiBIYWx0b24gc2VxdWVuY2UgZnJvbSBzZWVkIHZhbHVlLCBpCmZsb2F0IEhhc2hUb0Zsb2F0KHVpbnQgaSkKeyAgICAKICAgIHJldHVybiBmbG9hdChpKSAvIGZsb2F0KDB4ZmZmZmZmZmZ1KTsKfQoKY29uc3QgbWF0NCBrT3JkZXJlZERpdGhlciA9IG1hdDQodmVjNCgwLjAsIDguMCwgMi4wLCAxMC4pLCB2ZWM0KDEyLiwgNC4sIDE0LiwgNi4pLCB2ZWM0KDMuLCAxMS4sIDEuLCA5LiksIHZlYzQoMTUuLCA3LiwgMTMuLCA1LikpOwpmbG9hdCBPcmRlcmVkRGl0aGVyKCkKeyAgICAKICAgIHJldHVybiAoa09yZGVyZWREaXRoZXJbaW50KGdGcmFnQ29vcmQueCkgJiAzXVtpbnQoZ0ZyYWdDb29yZC55KSAmIDNdICsgMS4wKSAvIDE3LjA7Cn0KCnZlYzMgU2FtcGxlVW5pdFNwaGVyZSh2ZWMyIHhpKQp7CiAgICB4aS54ID0geGkueCAqIDIuMCAtIDEuMDsKICAgIHhpLnkgKj0ga1R3b1BpOwoKICAgIGZsb2F0IHNpblRoZXRhID0gc3FydCgxLjAgLSB4aS54ICogeGkueCk7CiAgICByZXR1cm4gdmVjMyhjb3MoeGkueSkgKiBzaW5UaGV0YSwgeGkueCwgc2luKHhpLnkpICogc2luVGhldGEpOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIENvbG91ciBmdW5jdGlvbnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKdmVjMyBIdWUoZmxvYXQgcGhpKQp7CiAgICBmbG9hdCBwaGlDb2xvdXIgPSA2LjAgKiBwaGk7CiAgICBpbnQgaSA9IGludChwaGlDb2xvdXIpOwogICAgdmVjMyBjMCA9IHZlYzMoKChpICsgNCkgLyAzKSAmIDEsICgoaSArIDIpIC8gMykgJiAxLCAoKGkgKyAwKSAvIDMpICYgMSk7CiAgICB2ZWMzIGMxID0gdmVjMygoKGkgKyA1KSAvIDMpICYgMSwgKChpICsgMykgLyAzKSAmIDEsICgoaSArIDEpIC8gMykgJiAxKTsgICAgICAgICAgICAgCiAgICByZXR1cm4gbWl4KGMwLCBjMSwgcGhpQ29sb3VyIC0gZmxvYXQoaSkpOwp9CgovLyBBIEdhdXNzaWFuIGZ1bmN0aW9uIHRoYXQgd2UgdXNlIHRvIHNhbXBsZSB0aGUgWFlaIHN0YW5kYXJkIG9ic2VydmVyIApmbG9hdCBDSUVYWVpHYXVzcyhmbG9hdCBsYW1iZGEsIGZsb2F0IGFscGhhLCBmbG9hdCBtdSwgZmxvYXQgc2lnbWExLCBmbG9hdCBzaWdtYTIpCnsKICAgcmV0dXJuIGFscGhhICogZXhwKHNxcihsYW1iZGEgLSBtdSkgLyAoLTIuMCAqIHNxcihsYW1iZGEgPCBtdSA/IHNpZ21hMSA6IHNpZ21hMikpKTsKfQoKdmVjMyBIU1ZUb1JHQih2ZWMzIGhzdikKewogICAgcmV0dXJuIG1peCh2ZWMzKDAuMCksIG1peCh2ZWMzKDEuMCksIEh1ZShoc3YueCksIGhzdi55KSwgaHN2LnopOwp9Cgp2ZWMzIFJHQlRvSFNWKCB2ZWMzIHJnYikKewogICAgLy8gVmFsdWUKICAgIHZlYzMgaHN2OwogICAgaHN2LnogPSBjd2lzZU1heChyZ2IpOwoKICAgIC8vIFNhdHVyYXRpb24KICAgIGZsb2F0IGNocm9tYSA9IGhzdi56IC0gY3dpc2VNaW4ocmdiKTsKICAgIGhzdi55ID0gKGhzdi56IDwgMWUtMTApID8gMC4wIDogKGNocm9tYSAvIGhzdi56KTsKCiAgICAvLyBIdWUKICAgIGlmIChjaHJvbWEgPCAxZS0xMCkgICAgICAgIHsgaHN2LnggPSAwLjA7IH0KICAgIGVsc2UgaWYgKGhzdi56ID09IHJnYi54KSAgICB7IGhzdi54ID0gKDEuMCAvIDYuMCkgKiAocmdiLnkgLSByZ2IueikgLyBjaHJvbWE7IH0KICAgIGVsc2UgaWYgKGhzdi56ID09IHJnYi55KSAgICB7IGhzdi54ID0gKDEuMCAvIDYuMCkgKiAoMi4wICsgKHJnYi56IC0gcmdiLngpIC8gY2hyb21hKTsgfQogICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgIHsgaHN2LnggPSAoMS4wIC8gNi4wKSAqICg0LjAgKyAocmdiLnggLSByZ2IueSkgLyBjaHJvbWEpOyB9CiAgICBoc3YueCA9IGZyYWN0KGhzdi54ICsgMS4wKTsKCiAgICByZXR1cm4gaHN2Owp9Cgp2ZWMzIFNhbXBsZVNwZWN0cnVtKGZsb2F0IGxhbWJkYSkKewogICAgLy8gSGVyZSB3ZSB1c2UgYSBzZXQgb2YgZml0dGVkIEdhdXNzaWFuIGN1cnZlcyB0byBhcHByb3hpbWF0ZSB0aGUgQ0lFIFhZWiBzdGFuZGFyZCBvYnNlcnZlci4KICAgIC8vIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DSUVfMTkzMV9jb2xvcl9zcGFjZSBmb3IgZGV0YWxzIG9uIHRoZSBmb3JtdWxhCiAgICAvLyBUaGlzIGFsbG93cyB1cyB0byBtYXAgdGhlIHNhbXBsZWQgd2F2ZWxlbmd0aCB0byB1c2FibGUgUkdCIHZhbHVlcy4gVGhpcyBjb2RlIG5lZWRzIGNsZWFuaW5nIAogICAgLy8gdXAgYmVjYXVzZSB3ZSBkbyBhbiB1bm5lY2Vzc2FyeSBub3JtYWxpc2F0aW9uIHN0ZXBzIGFzIHdlIG1hcCBmcm9tIGxhbWJkYSB0byBYWVogdG8gUkdCLgoKICAgICNkZWZpbmUga1JOb3JtICg3MDAwLjAgLSAzODAwLjApIC8gMTE0My4wNwogICAgI2RlZmluZSBrR05vcm0gKDcwMDAuMCAtIDM4MDAuMCkgLyAxMDY4LjcKICAgICNkZWZpbmUga0JOb3JtICg3MDAwLjAgLSAzODAwLjApIC8gMTA2OC4yNQoKICAgIC8vIFNhbXBsZSB0aGUgR2F1c3NpYW4gYXBwcm94aW1hdGlvbnMKICAgIHZlYzMgeHl6OwogICAgeHl6LnggPSAoQ0lFWFlaR2F1c3MobGFtYmRhLCAxLjA1NiwgNTk5OC4wLCAzNzkuMCwgMzEwLjApICsKICAgICAgICAgICAgIENJRVhZWkdhdXNzKGxhbWJkYSwgMC4zNjIsIDQ0MjAuMCwgMTYwLjAsIDI2Ny4wKSArCiAgICAgICAgICAgICBDSUVYWVpHYXVzcyhsYW1iZGEsIDAuMDY1LCA1MDExLjAsIDIwNC4wLCAyNjIuMCkpICoga1JOb3JtOwogICAgeHl6LnkgPSAoQ0lFWFlaR2F1c3MobGFtYmRhLCAwLjgyMSwgNTY4OC4wLCA0NjkuMCwgNDA1LjApICsKICAgICAgICAgICAgIENJRVhZWkdhdXNzKGxhbWJkYSwgMC4yODYsIDUzMDkuMCwgMTYzLjAsIDMxMS4wKSkgKiBrR05vcm07CiAgICB4eXoueiA9IChDSUVYWVpHYXVzcyhsYW1iZGEsIDEuMjE3LCA0MzcwLjAsIDExOC4wLCAzNjAuMCkgKwogICAgICAgICAgICAgQ0lFWFlaR2F1c3MobGFtYmRhLCAwLjY4MSwgNDU5MC4wLCAyNjAuMCwgMTM4LjApKSAqIGtCTm9ybTsKCiAgICAvLyBYWVogdG8gUkdCIGxpbmVhciB0cmFuc2Zvcm0KICAgIHZlYzMgcmdiOwogICAgcmdiLnIgPSAoMi4wNDE1OSAqIHh5ei54IC0gMC41NjUwICogeHl6LnkgLSAwLjM0NDczICogeHl6LnopIC8gKDIuMCAqIDAuNTY1KTsKICAgIHJnYi5nID0gKC0wLjk2OTI0ICogeHl6LnggKyAxLjg3NTk2ICogeHl6LnkgKyAwLjA0MTU1ICogeHl6LnopIC8gKDIuMCAqIDAuNDcyKTsKICAgIHJnYi5iID0gKDAuMDEzNDQgKiB4eXoueCAtIDAuMTE4NjMgKiB4eXoueSArIDEuMDE1MTcgKiB4eXoueikgLyAoMi4wICogMC40NTIpOwoKICAgIHJldHVybiByZ2I7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgUmF5IHRyYWNpbmcKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKI2RlZmluZSBrSW52YWxpZEhpdCAgICAgICAgICAgICAgLTEuMAojZGVmaW5lIGtOdWxsUmF5ICAgICAgICAgICAgICAgICAtMS4wCgpzdHJ1Y3QgVHJhbnNmb3JtCnsKICAgIHZlYzMgdHJhbnM7CiAgICBtYXQzIHJvdDsKICAgIGZsb2F0IHNjYTsKfTsKCm1hdDMgSWRlbnRpdHkoKQp7CiAgICByZXR1cm4gbWF0Myh2ZWMzKDEuMCwgMC4wLCAwLjApLCB2ZWMzKDAuMCwgMS4wLCAwLjApLCB2ZWMzKDAuMCwgMC4wLCAxLjApKTsKfQoKbWF0MyBTY2FsZU1hdDMoZmxvYXQgc2NhbGUpCnsKICAgIGZsb2F0IGludlNjYWxlID0gMS4wZiAvIHNjYWxlOwogICAgcmV0dXJuIG1hdDModmVjMyhpbnZTY2FsZSwgMC4wLCAwLjApLAogICAgICAgICAgICB2ZWMzKDAuMCwgaW52U2NhbGUsIDAuMCksCiAgICAgICAgICAgIHZlYzMoMC4wLCAwLjAsIGludlNjYWxlKSk7Cn0KCm1hdDMgUm90WE1hdDMoZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMygxLjAsIDAuMCwgMC4wKSwKICAgICAgICAgICAgdmVjMygwLjAsIGNvc1RoZXRhLCAtc2luVGhldGEpLAogICAgICAgICAgICB2ZWMzKDAuMCwgc2luVGhldGEsIGNvc1RoZXRhKSk7Cn0KCm1hdDMgUm90WU1hdDMoY29uc3QgZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMyhjb3NUaGV0YSwgMC4wLCBzaW5UaGV0YSksCiAgICAgICAgICAgIHZlYzMoMC4wLCAxLjAsIDAuMCksCiAgICAgICAgICAgIHZlYzMoLXNpblRoZXRhLCAwLjAsIGNvc1RoZXRhKSk7Cn0KCm1hdDMgUm90Wk1hdDMoY29uc3QgZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMyhjb3NUaGV0YSwgLXNpblRoZXRhLCAwLjApLAogICAgICAgICAgICB2ZWMzKHNpblRoZXRhLCBjb3NUaGV0YSwgMC4wKSwKICAgICAgICAgICAgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KClRyYW5zZm9ybSBDb21wb3VuZFRyYW5zZm9ybSh2ZWMzIHRyYW5zLCB2ZWMzIHJvdCwgZmxvYXQgc2NhbGUpCnsKICAgIFRyYW5zZm9ybSB0cmFuc2Zvcm07CiAgICB0cmFuc2Zvcm0ucm90ID0gSWRlbnRpdHkoKTsKICAgIHRyYW5zZm9ybS5zY2EgPSBzY2FsZTsKCiAgICBpZiAocm90LnggIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90WE1hdDMocm90LngpOyB9CiAgICBpZiAocm90LnkgIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90WU1hdDMocm90LnkpOyB9CiAgICBpZiAocm90LnogIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90Wk1hdDMocm90LnopOyB9CgogICAgaWYgKHNjYWxlICE9IDEuMGYpIHsgdHJhbnNmb3JtLnJvdCAqPSBTY2FsZU1hdDMoc2NhbGUpOyB9CiAgICAKICAgIHJldHVybiB0cmFuc2Zvcm07Cn0KCi8vIEZhc3QgY29uc3RydWN0aW9uIG9mIG9ydGhvbm9ybWFsIGJhc2lzIHVzaW5nIHF1YXJ0ZXJuaW9ucyB0byBhdm9pZCBleHBlbnNpdmUgbm9ybWFsaXNhdGlvbiBhbmQgYnJhbmNoaW5nIAovLyBGcm9tIER1ZiBldCBhbCdzIHRlY2huaWNhbCByZXBvcnQgaHR0cHM6Ly9ncmFwaGljcy5waXhhci5jb20vbGlicmFyeS9PcnRob25vcm1hbEIvcGFwZXIucGRmLCBpbnNwaXJlZCBieQovLyBGcmlzdmFkJ3Mgb3JpZ2luYWwgcGFwZXI6IGh0dHA6Ly9vcmJpdC5kdHUuZGsvZmlsZXMvMTI2ODI0OTcyL29uYl9mcmlzdmFkX2pndDIwMTJfdjIucGRmCm1hdDMgQ3JlYXRlQmFzaXModmVjMyBuKQp7CiAgICBmbG9hdCBzID0gc2lnbihuLnopOwogICAgZmxvYXQgYSA9IC0xLjAgLyAocyArIG4ueik7CiAgICBmbG9hdCBiID0gbi54ICogbi55ICogYTsKICAgIAogICAgcmV0dXJuIG1hdDModmVjMygxLjBmICsgcyAqIG4ueCAqIG4ueCAqIGEsIHMgKiBiLCAtcyAqIG4ueCksCiAgICAgICAgICAgICAgICB2ZWMzKGIsIHMgKyBuLnkgKiBuLnkgKiBhLCAtbi55KSwKICAgICAgICAgICAgICAgIG4pOwp9CgptYXQzIENyZWF0ZUJhc2lzKHZlYzMgbiwgdmVjMyB1cCkKewogICAgdmVjMyB0YW5nZW50ID0gbm9ybWFsaXplKGNyb3NzKG4sIHVwKSk7CiAgICB2ZWMzIGNvdGFuZ2VudCA9IGNyb3NzKHRhbmdlbnQsIG4pOwoKICAgIHJldHVybiB0cmFuc3Bvc2UobWF0Myh0YW5nZW50LCBjb3RhbmdlbnQsIG4pKTsKfQoKLy8gVGhlIG1pbmltdW0gYW1vdW50IG9mIGRhdGEgcmVxdWlyZWQgdG8gZGVmaW5lIGFuIGluZmluaXRlIHJheSBpbiAzRCBzcGFjZQpzdHJ1Y3QgUmF5QmFzaWMKewogICAgdmVjMyAgIG87ICAgICAgICAgICAgICAgICAgIC8vIE9yaWdpbiAKICAgIHZlYzMgICBkOyAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb24gIAp9OwoKLy8gVGhlICJmdWxsIGZhdCIgcmF5IG9iamVjdHMgdGhhdCBtb3N0IG1ldGhvZHMgd2lsbCByZWZlciB0bwpzdHJ1Y3QgUmF5CnsKICAgIFJheUJhc2ljIG9kOyAgICAgICAgICAgICAgICAKICAgIGZsb2F0ICAgIHROZWFyOyAgICAgICAgICAgICAKICAgIHZlYzMgICAgIHdlaWdodDsKICAgIHVpbnQgICAgIGZsYWdzOwogICAgLy9mbG9hdCAgICBsYW1iZGE7ICAgIAp9OwoKI2RlZmluZSBrRmxhZ3NCYWNrZmFjaW5nIDF1CiNkZWZpbmUga0ZsYWdzU3Vic3VyZmFjZSAydQojZGVmaW5lIGtGbGFnc0RpcmVjdFJheSAgNHUKCnN0cnVjdCBIaXRDdHgKewogICAgdmVjMyAgICAgbjsKICAgIGZsb2F0ICAgIGtpY2tvZmY7ICAgIAp9OwoKUmF5QmFzaWMgUmF5VG9PYmplY3RTcGFjZShpbiBSYXlCYXNpYyB3b3JsZCwgaW4gVHJhbnNmb3JtIHRyYW5zZm9ybSkgCnsKICAgIFJheUJhc2ljIG9iamVjdDsKICAgIG9iamVjdC5vID0gd29ybGQubyAtIHRyYW5zZm9ybS50cmFuczsKICAgIG9iamVjdC5kID0gd29ybGQuZCArIG9iamVjdC5vOwogICAgb2JqZWN0Lm8gPSB0cmFuc2Zvcm0ucm90ICogb2JqZWN0Lm87CiAgICBvYmplY3QuZCA9ICh0cmFuc2Zvcm0ucm90ICogb2JqZWN0LmQpIC0gb2JqZWN0Lm87CiAgICByZXR1cm4gb2JqZWN0Owp9Cgp2ZWM0IFNERlNpbXBsZXhGYWNlKGluIHZlYzMgcCwgaW4gdmVjMyB2WzRdLCBpbiB2ZWMzIG4pCnsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgZm9yKGludCBpID0gMDsgaSA8IDM7IGkrKykKICAgIHsKICAgICAgICB2ZWMzIGR2ID0gdlsoaSsxKSAlIDNdIC0gdltpXTsKICAgICAgICB2ZWMzIGVkZ2VOb3JtID0gbm9ybWFsaXplKGNyb3NzKGR2LCBuKSk7CiAgICAgICAgaWYoZG90KGVkZ2VOb3JtLCBwIC0gdltpXSkgPiAwLjApCiAgICAgICAgeyAgICAgICAgICAgIAogICAgICAgICAgICBmbG9hdCB0ID0gY2xhbXAoKGRvdChwLCBkdikgLSBkb3QodltpXSwgZHYpKSAvIGRvdChkdiwgZHYpLCAwLjAsIDEuMCk7CiAgICAgICAgICAgIHZlYzMgZ3JhZCA9IHAgLSAodltpXSArIHQgKiBkdik7CiAgICAgICAgICAgIHJldHVybiB2ZWM0KGxlbmd0aChncmFkKSwgZ3JhZCk7CiAgICAgICAgfQogICAgfQogICAgaWYoZG90KG4sIHAgLSB2WzBdKSA8IDAuMCkgeyBuID0gLW47IH0KICAgIHJldHVybiB2ZWM0KChkb3QocCwgbikgLSBkb3QodlswXSwgbikpLCBuKTsKfQoKYm9vbCBSYXlTaW1wbGV4U0RGKGlub3V0IFJheSByYXksIGlub3V0IHZlYzIgc2RmTmVhciwgb3V0IEhpdEN0eCBoaXQsIGluIFRyYW5zZm9ybSB0cmFuc2Zvcm0sIGluIGZsb2F0IGV4cGxvZGUsIGluIGludCBpbnRlcnZhbCwgaW4gZmxvYXQgcGhhc2UpCnsKICAgICNkZWZpbmUga1NERk1heFN0ZXBzICAgICAgICAgICAgIDUwCiAgICAjZGVmaW5lIGtTREZDdXRvZmZUaHJlc2hvbGQgICAgICAxZS00CiAgICAjZGVmaW5lIGtTREZFc2NhcGVUaHJlc2hvbGQgICAgICAyLjAKICAgICNkZWZpbmUga1NERlJheUluY3JlbWVudCAgICAgICAgIDAuOTUKICAgICNkZWZpbmUga1NERkZhaWxUaHJlc2hvbGQgICAgICAgIDAuMQogICAgCiAgICAjZGVmaW5lIGtOdW1JbnRlcnZhbHMgICAgICAgICAgICAyMAogICAgI2RlZmluZSBrQ2xvc2VkSW50ZXJ2YWwgICAgICAgICAgMTYKICAgIAogICAgUmF5QmFzaWMgbG9jYWxSYXkgPSBSYXlUb09iamVjdFNwYWNlKHJheS5vZCwgdHJhbnNmb3JtKTsKICAgIAogICAgZmxvYXQgbG9jYWxNYWcgPSBsZW5ndGgobG9jYWxSYXkuZCk7CiAgICBsb2NhbFJheS5kIC89IGxvY2FsTWFnOwogICAgCiAgICBmbG9hdCB0ID0gMC4wOyAgIAogICAgdmVjMyBwOwogICAgdmVjNCBGOwogICAgYm9vbCBpc1N1YnN1cmZhY2UsIGlzQm91bmRlZCA9IGZhbHNlOwoKICAgIGNvbnN0IHZlYzMgVls0XSA9IHZlYzNbXSh2ZWMzKDEsMSwxKSouNSwgdmVjMygtMSwtMSwxKSouNSwgdmVjMygxLC0xLC0xKSouNSwgdmVjMygtMSwxLC0xKSouNSk7CiAgICBjb25zdCBpbnQgSVsxNl0gPSBpbnRbXSggMCwgMiwgMSwgMCwgMSwgMywgMiwgMSwgMiwgMCwgMywgMiwgMywgMSwgMCwgMyk7CiAgICB2ZWMzIERbNF0sIE5bNF07ICAgICAKICAgICNkZWZpbmUga1NERlRoaWNrbmVzcyAwLjA1CiAgICAKICAgIGZsb2F0IGJldGEgPSBLaWNrRHJvcChwaGFzZSwgdmVjMigwLjAsIDAuMCksIHZlYzIoMC40LCAxLjIpLCB2ZWMyKDAuNSwgMS4wKSk7CiAgICBmbG9hdCBnYW1tYSA9IG1peCgxLjAsIDIuNSwgSW1wdWxzZShwaGFzZSwgMC40LCAwLjE1KSk7CiAgICAKICAgIGZvcihpbnQgaiA9IDA7IGogPCA0OyArK2opCiAgICB7CiAgICAgICAgaW50IGsgPSBqKjQ7CiAgICAgICAgdmVjMyBkID0gbWl4KFZbSVtrICsgaW50ZXJ2YWwlM11dLCBWW0lbayArIChpbnRlcnZhbCsxKSUzXV0sIGJldGEpICogZXhwbG9kZTsKICAgICAgICBpZihpbnRlcnZhbCA9PSAwKSB7IERbal0gPSBkICogYmV0YTsgfSAKICAgICAgICBlbHNlIGlmKGludGVydmFsIDwga0Nsb3NlZEludGVydmFsKSB7IERbal0gPSBkOyB9CiAgICAgICAgZWxzZSBpZihpbnRlcnZhbCA9PSBrQ2xvc2VkSW50ZXJ2YWwpIHsgRFtqXSA9IGQgKiAoMS4wIC0gYmV0YSk7IH0KICAgICAgICBlbHNlIHsgRFtqXSA9IGtaZXJvOyB9CiAgICAgICAgCiAgICAgICAgTltqXSA9IG5vcm1hbGl6ZShjcm9zcyhWW0lbaysxXV0gLSBWW0lba11dLCBWW0lbaysyXV0gLSBWW0lba11dKSk7CiAgICB9CiAgICAKICAgIGludCBzdGVwSWR4OwogICAgZm9yKHN0ZXBJZHggPSAwOyBzdGVwSWR4IDwga1NERk1heFN0ZXBzOyBzdGVwSWR4KyspCiAgICB7CiAgICAgICAgcCA9IGxvY2FsUmF5Lm8gKyBsb2NhbFJheS5kICogdDsKICAgICAgICAKICAgICAgICBGID0gdmVjNChrRmx0TWF4KTsKICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgNDsgaisrKQogICAgICAgIHsgICAgICAgICAgICAgIAogICAgICAgICAgICB2ZWM0IEZGYWNlID0gU0RGU2ltcGxleEZhY2UocCwgdmVjM1s0XShWW0lbaio0XV0gKyBEW2pdLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWW0lbaio0KzFdXSArIERbal0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZbSVtqKjQrMl1dICsgRFtqXSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVltJW2oqNCszXV0gKyBEW2pdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOW2pdKTsKCiAgICAgICAgICAgIEZGYWNlLnggPSBGRmFjZS54IC0ga1NERlRoaWNrbmVzcyAqIGdhbW1hOwogICAgICAgICAgICBpZihGRmFjZS54IDwgRi54KSAKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIEYgPSBGRmFjZTsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIAogICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24sIHNpbXBseSBkZXRlcm1pbmUgd2hldGhlciB3ZSdyZSBpbnNpZGUgdGhlIGlzb3N1cmZhY2Ugb3Igbm90CiAgICAgICAgaWYoc3RlcElkeCA9PSAwKSB7IGlzU3Vic3VyZmFjZSA9IEYueCA8IDAuMDsgfQogICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgdG8gc2VlIGlmIHdlJ3JlIGF0IHRoZSBzdXJmYWNlCiAgICAgICAgZWxzZSBpZihhYnMoRi54KSA8IGtTREZDdXRvZmZUaHJlc2hvbGQpIHsgYnJlYWs7IH0gICAgICAgIAogICAgICAgIAogICAgICAgIGlmKCFpc0JvdW5kZWQpIHsgaWYoRi54IDwga1NERkVzY2FwZVRocmVzaG9sZCkgeyBpc0JvdW5kZWQgPSB0cnVlOyB9IH0KICAgICAgICBlbHNlIGlmKEYueCA+IGtTREZFc2NhcGVUaHJlc2hvbGQpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAgICAgCiAgICAgICAgdCArPSAoaXNTdWJzdXJmYWNlID8gLUYueCA6IEYueCkgKiBrU0RGUmF5SW5jcmVtZW50OwogICAgICAgIAogICAgICAgIGlmKGFicyhGLnggLyBsb2NhbE1hZykgPCBzZGZOZWFyLngpCiAgICAgICAgICAgICAgICAgICAgc2RmTmVhciA9IHZlYzIoYWJzKEYueCAvIGxvY2FsTWFnKSwgdCAvIGxvY2FsTWFnKTsKICAgICAgICAKICAgICAgICBpZih0IC8gbG9jYWxNYWcgPiByYXkudE5lYXIpIHsgYnJlYWs7IH0KICAgICAgICAKICAgICAgICBwID0gbG9jYWxSYXkubyArIHQgKiBsb2NhbFJheS5kOwogICAgfSAgICAgICAgCiAgICAKICAgIHQgLz0gbG9jYWxNYWc7CiAgICBpZihGLnggPiBrU0RGRmFpbFRocmVzaG9sZCB8fCB0ID4gcmF5LnROZWFyKSB7IHJldHVybiBmYWxzZTsgfQogICAgCiAgICByYXkudE5lYXIgPSB0OwogICAgaGl0Lm4gPSB0cmFuc3Bvc2UodHJhbnNmb3JtLnJvdCkgKiBub3JtYWxpemUoRi55encpICogdHJhbnNmb3JtLnNjYTsKICAgIHJheS5mbGFncyA9IChyYXkuZmxhZ3MgJiB+a0ZsYWdzQmFja2ZhY2luZykgfCAoKGlzU3Vic3VyZmFjZSkgPyBrRmxhZ3NCYWNrZmFjaW5nIDogMHUpOwogICAgaGl0LmtpY2tvZmYgPSAxZS0yOwoKICAgIHJldHVybiB0cnVlOwp9CgpSYXkgQ3JlYXRlT3J0aG9ncmFwaGljQ2FtZXJhUmF5KHZlYzIgdXYsIHZlYzIgc2Vuc29yU2l6ZSwgdmVjMyBjYW1lcmFQb3MsIHZlYzMgY2FtZXJhTG9va0F0KQp7CiAgICB2ZWMzIHcgPSBub3JtYWxpemUoY2FtZXJhTG9va0F0IC0gY2FtZXJhUG9zKTsKICAgIG1hdDMgYmFzaXMgPSBDcmVhdGVCYXNpcyh3LCB2ZWMzKDAuMCwgMS4wLCAwLjApKTsgICAgCiAgICAKICAgIFJheSByYXk7CiAgICByYXkub2QubyA9IGNhbWVyYVBvcyArIHZlYzModXYgKiBzZW5zb3JTaXplLCAwLjApICogYmFzaXM7CiAgICByYXkub2QuZCA9IHc7CiAgICByYXkud2VpZ2h0ID0gdmVjMygxLjApOwogICAgcmV0dXJuIHJheTsKfQoKdmVjMyBSYXlQb2ludEF0KGluIFJheSByYXksIGZsb2F0IHQpCnsKICAgIHJldHVybiByYXkub2QubyArIHJheS5vZC5kICogdDsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBGaWx0ZXJzCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCiNkZWZpbmUga0FwcGx5Qmxvb20gICAgICAgICAgICAgICB0cnVlCiNkZWZpbmUga0Jsb29tR2FpbiAgICAgICAgICAgICAgICAxLjUgICAgICAgICAgICAgLy8gVGhlIHN0cmVuZ3RoIG9mIHRoZSBibG9vbSBlZmZlY3QgCiNkZWZpbmUga0Jsb29tVGludCAgICAgICAgICAgICAgICB2ZWMzKDEuMCkgICAgICAgLy8gVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgYmxvb20gZWZmZWN0CiNkZWZpbmUga0Jsb29tV2lkdGggICAgICAgICAgICAgICAoMC4xIC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpKSAgICAgICAgICAgICAvLyBUaGUgd2lkdGggb2YgdGhlIGJsb29tIGVmZmVjdCBhcyBhIHByb3BvcnRpb24gb2YgdGhlIGJ1ZmZlciB3aWR0aAojZGVmaW5lIGtCbG9vbUhlaWdodCAgICAgICAgICAgICAgKDAuMSAvIGZsb2F0KGtTY3JlZW5Eb3duc2FtcGxlKSkgICAgICAgICAgICAgLy8gVGhlIGhlaWdodCBvZiB0aGUgYmxvb20gZWZmZWN0IGFzIGEgcHJvcG9ydGlvbiBvZiB0aGUgYnVmZmVyIGhlaWdodAojZGVmaW5lIGtCbG9vbVNoYXBlICAgICAgICAgICAgICAgMC41ICAgICAgICAgICAgIC8vIFRoZSBmYWxsLW9mZiBvZiB0aGUgYmxvb20gc2hhcGUuIEhpZ2hlciB2YWx1ZSA9IHN0ZWVwZXIgZmFsbC1vZmYKI2RlZmluZSBrQmxvb21Eb3duc2FtcGxlICAgICAgICAgIDIgICAgICAgICAgICAgICAvLyBIb3cgbXVjaCB0aGUgYmxvb20gYnVmZmVyIGlzIGRvd25zYW1wbGVkLiBIaWdoZXIgdmFsdWUgPSBsb3dlciBxdWFsaXR5LCBidXQgZmFzdGVyCiNkZWZpbmUga0RlYnVnQmxvb20gICAgICAgICAgICAgICBmYWxzZSAgICAgICAgICAgLy8gU2hvdyBvbmx5IHRoZSBibG9vbSBpbiB0aGUgZmluYWwgY29tcAojZGVmaW5lIGtCbG9vbUJ1cm5JbiAgICAgICAgICAgICAgdmVjMygwLjMpICAgICAKCi8vIFNlcGVyYWJsZSBibG9vbSBmdW5jdGlvbi4gVGhpcyBmaWx0ZXIgcmVxdWlyZXMgdHdvIHBhc3NlcyBpbiB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgZGlyZWN0aW9ucyB3aGljaCBhcmUgY29tYmluZWQgYXMgYSBwb3N0LXByb2Nlc3MKLy8gZWZmZWN0IGFmdGVyIGVhY2ggZnJhbWUuIFRoZSBhY2N1cmFjeS9jb3N0IG9mIHRoZSBlZmZlY3QgY2FuIGJlIHR1bmVkIGJ5IGRpYWxpbmcgdGhlIGtCbG9vbURvd25zYW1wbGUgcGFyYW1ldGVyLiAKdmVjMyBCbG9vbSh2ZWMyIGZyYWdDb29yZCwgdmVjMyBpUmVzb2x1dGlvbiwgaXZlYzIgZGVsdGEsIHNhbXBsZXIyRCByZW5kZXJTYW1wbGVyKQp7ICAgICAgICAKICAgIHZlYzIgc2NhbGVkUmVzb2x1dGlvbiA9IHZlYzIoaVJlc29sdXRpb24ueCwgaVJlc29sdXRpb24ueSkgLyBmbG9hdCgoZGVsdGEueCA9PSAxKSA/IGtCbG9vbURvd25zYW1wbGUgOiAxKTsKICAgCiAgICBpZihmcmFnQ29vcmQueCA+IHNjYWxlZFJlc29sdXRpb24ueCB8fCBmcmFnQ29vcmQueSA+IHNjYWxlZFJlc29sdXRpb24ueSkgeyByZXR1cm4ga1plcm87IH0KICAgIAogICAgZmxvYXQgYmxvb21TaXplID0gKGRlbHRhLnggPT0gMSkgPyBrQmxvb21XaWR0aCA6IGtCbG9vbUhlaWdodDsKICAgIAogICAgaW50IGtLZXJuZWxXaWR0aCA9IGludChibG9vbVNpemUgKiBtYXgoaVJlc29sdXRpb24ueCwgaVJlc29sdXRpb24ueSkgKyAwLjUpIC8gKChkZWx0YS54ID09IDEpID8ga0Jsb29tRG93bnNhbXBsZSA6IDEpOwogICAgdmVjMyBzdW1XZWlnaHRzID0gdmVjMygwLjApOwogICAgdmVjMyBzdW1SZ2IgPSB2ZWMzKDAuMCk7CiAgICBmb3IoaW50IGkgPSAta0tlcm5lbFdpZHRoOyBpIDw9IGtLZXJuZWxXaWR0aDsgaSsrKQogICAgeyAgICAgIAogICAgICAgIHZlYzIgeHkgPSB2ZWMyKGZyYWdDb29yZC54ICsgZmxvYXQoaSAqIGRlbHRhLngpLCBmcmFnQ29vcmQueSArIGZsb2F0KGkgKiBkZWx0YS55KSk7CiAgICAgICAgCiAgICAgICAgaWYoZGVsdGEueCA9PSAxKSB7IHh5ICo9IGZsb2F0KGtCbG9vbURvd25zYW1wbGUpOyB9CiAgICAgICAgZWxzZSB7IHh5IC89IGZsb2F0KGtCbG9vbURvd25zYW1wbGUpOyB9CiAgICAgICAgCiAgICAgICAgaWYoeHkueCA8IDAuMCB8fCB4eS54ID4gaVJlc29sdXRpb24ueCB8fCB4eS55IDwgMC4wIHx8IHh5LnkgPiBpUmVzb2x1dGlvbi55KSB7IGNvbnRpbnVlOyB9CiAgICAgICAgICAgIAogICAgICAgIHZlYzQgdGV4ZWwgPSB0ZXh0dXJlKHJlbmRlclNhbXBsZXIsIHh5IC8gaVJlc29sdXRpb24ueHkpOwogICAgICAgIHZlYzMgcmdiID0gbWF4KHRleGVsLnh5eiAvIG1heCgxLjAsIHRleGVsLncpLCB2ZWMzKDAuMCkpOyAgICAgICAgICAgIAogICAgICAgIGZsb2F0IGQgPSBmbG9hdChhYnMoaSkpIC8gZmxvYXQoa0tlcm5lbFdpZHRoKTsKICAgICAgICAgICAKICAgICAgICB2ZWMzIHdlaWdodCA9IGtPbmU7CiAgICAgICAgaWYoaSAhPSAwKQogICAgICAgIHsKICAgICAgICAgICAgLy8gQ3VycmVudGx5IHVzaW5nIGEgc2luZ2xlIHdlaWdodCBhbHRob3VnaCB0aGlzIGVmZmVjdCBjYW4gYmUgZG9uZSBwZXItY2hhbm5lbAogICAgICAgICAgICBmbG9hdCBrZXJuZWwgPSBwb3cobWF4KDAuMCwgKGV4cCgtc3FyKGQgKiA0LjApKSAtIDAuMDE4MzE1NikgLyAwLjk4MTY4NCksIGtCbG9vbVNoYXBlKTsgICAgICAgICAgICAKICAgICAgICAgICAgd2VpZ2h0ID0ga09uZSAqIGtlcm5lbDsKICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIHN1bVJnYiArPSAoKGRlbHRhLnkgPT0gMSkgPyByZ2IgOiBtYXgoa1plcm8sIHJnYiAtIGtCbG9vbUJ1cm5JbikpICogd2VpZ2h0OyAgICAgICAgIAogICAgICAgIHN1bVdlaWdodHMgKz0gd2VpZ2h0OwogICAgfQogICAgCiAgICBzdW1SZ2IgPSBzdW1SZ2IgLyBzdW1XZWlnaHRzOwogICAgCiAgICByZXR1cm4gKGRlbHRhLnggPT0gMSkgPyBzdW1SZ2IgOiAoc3VtUmdiICoga0Jsb29tVGludCk7Cn0",
					"AQAAAAAAAAABAAAAAAAAAAAAAACKZgAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAj20AAAAAAAAAAAAAj20AAAAAAACPbQAAAAAAAIpmAAAjZGVmaW5lIGtDbGlwVmlldyAxCgojZGVmaW5lIGtTY3JlZW5Eb3duc2FtcGxlIDEKCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gR2xvYmFsIHZhcmlhYmxlcwoKdmVjMiBnUmVzb2x1dGlvbjsKdmVjMiBnRnJhZ0Nvb3JkOwp1dmVjNCBybmdTZWVkOwpmbG9hdCBnRHh5RHV2OwoKdm9pZCBTZXRHbG9iYWxzKHZlYzIgZnJhZ0Nvb3JkLCB2ZWMyIHJlc29sdXRpb24pCnsKICAgIGdGcmFnQ29vcmQgPSBmcmFnQ29vcmQ7CiAgICBnUmVzb2x1dGlvbiA9IHJlc29sdXRpb247CiAgICAKICAgICAvLyBGaXJzdCBkZXJpdmF0aXZlIG9mIHNjcmVlbiB0byB3b3JsZCBzcGFjZSAoYXNzdW1pbmcgc3F1YXJlIHBpeGVscykKICAgIGdEeHlEdXYgPSAxLjAgLyBnUmVzb2x1dGlvbi54Owp9Cgpib29sIElzVGV4ZWxJbkNsaXBSZWdpb24odmVjMiB4eSkKewojaWYga0NsaXBWaWV3ID09IDEKICAgIHJldHVybiAoYWJzKHh5LnggLSAoZ1Jlc29sdXRpb24ueCAvIDIuMCkpIDwgZ1Jlc29sdXRpb24ueSAvIDIuMCk7CiNlbHNlCiAgICByZXR1cm4gdHJ1ZTsKI2VuZGlmCn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgTWF0aCBmdW5jdGlvbnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKI2RlZmluZSBrUGkgICAgICAgICAgICAgICAgICAgIDMuMTQxNTkyNjUzNTkKI2RlZmluZSBrSW52UGkgICAgICAgICAgICAgICAgICgxLjAgLyAzLjE0MTU5MjY1MzU5KQojZGVmaW5lIGtUd29QaSAgICAgICAgICAgICAgICAgKDIuMCAqIGtQaSkKI2RlZmluZSBrSGFsZlBpICAgICAgICAgICAgICAgICgwLjUgKiBrUGkpCiNkZWZpbmUga1Jvb3QyICAgICAgICAgICAgICAgICAxLjQxNDIxMzU2MjM3CiNkZWZpbmUga0ZsdE1heCAgICAgICAgICAgICAgICAzLjQwMjgyMzQ2NmUrMzgKI2RlZmluZSBrSW50TWF4ICAgICAgICAgICAgICAgIDB4N2ZmZmZmZmYKI2RlZmluZSBrT25lICAgICAgICAgICAgICAgICAgIHZlYzMoMS4wKQojZGVmaW5lIGtaZXJvICAgICAgICAgICAgICAgICAgdmVjMygwLjApCiNkZWZpbmUga1BpbmsgICAgICAgICAgICAgICAgICB2ZWMzKDEuMCwgMC4wLCAwLjIpCgpmbG9hdCBjdWJydChmbG9hdCBhKSAgICAgICAgICAgeyByZXR1cm4gc2lnbihhKSAqIHBvdyhhYnMoYSksIDEuMCAvIDMuMCk7IH0KZmxvYXQgdG9SYWQoZmxvYXQgZGVnKSAgICAgICAgIHsgcmV0dXJuIGtUd29QaSAqIGRlZyAvIDM2MC4wOyB9CmZsb2F0IHRvRGVnKGZsb2F0IHJhZCkgICAgICAgICB7IHJldHVybiAzNjAuMCAqIHJhZCAvIGtUd29QaTsgfQpmbG9hdCBzcXIoZmxvYXQgYSkgICAgICAgICAgICAgeyByZXR1cm4gYSAqIGE7IH0KdmVjMyBzcXIodmVjMyBhKSAgICAgICAgICAgICAgIHsgcmV0dXJuIGEgKiBhOyB9CmludCBzcXIoaW50IGEpICAgICAgICAgICAgICAgICB7IHJldHVybiBhICogYTsgfQppbnQgbW9kMihpbnQgYSwgaW50IGIpICAgICAgICAgeyByZXR1cm4gKChhICUgYikgKyBiKSAlIGI7IH0KZmxvYXQgbW9kMihmbG9hdCBhLCBmbG9hdCBiKSAgIHsgcmV0dXJuIG1vZChtb2QoYSwgYikgKyBiLCBiKTsgfQp2ZWMzIG1vZDIodmVjMyBhLCB2ZWMzIGIpICAgICAgeyByZXR1cm4gbW9kKG1vZChhLCBiKSArIGIsIGIpOyB9CmZsb2F0IGxlbmd0aDIodmVjMiB2KSAgICAgICAgICB7IHJldHVybiBkb3Qodiwgdik7IH0KZmxvYXQgbGVuZ3RoMih2ZWMzIHYpICAgICAgICAgIHsgcmV0dXJuIGRvdCh2LCB2KTsgfQppbnQgc3VtKGl2ZWMyIGEpICAgICAgICAgICAgICAgeyByZXR1cm4gYS54ICsgYS55OyB9CmZsb2F0IGx1bWluYW5jZSh2ZWMzIHYpICAgICAgICB7IHJldHVybiB2LnggKiAwLjE3NjkxICsgdi55ICogMC44MTI0ICsgdi56ICogMC4wMTA2MzsgfQpmbG9hdCBtZWFuKHZlYzMgdikgICAgICAgICAgICAgeyByZXR1cm4gdi54IC8gMy4wICsgdi55IC8gMy4wICsgdi56IC8gMy4wOyB9CnZlYzQgbXVsNCh2ZWMzIGEsIG1hdDQgbSkgICAgICB7IHJldHVybiB2ZWM0KGEsIDEuMCkgKiBtOyB9CnZlYzMgbXVsMyh2ZWMzIGEsIG1hdDQgbSkgICAgICB7IHJldHVybiAodmVjNChhLCAxLjApICogbSkueHl6OyB9CmZsb2F0IHNpbjAxKGZsb2F0IGEpICAgICAgICAgICB7IHJldHVybiAwLjUgKiBzaW4oYSkgKyAwLjU7IH0KZmxvYXQgY29zMDEoZmxvYXQgYSkgICAgICAgICAgIHsgcmV0dXJuIDAuNSAqIGNvcyhhKSArIDAuNTsgfQpmbG9hdCBzYXR1cmF0ZShmbG9hdCBhKSAgICAgICAgeyByZXR1cm4gY2xhbXAoYSwgMC4wLCAxLjApOyB9CnZlYzMgc2F0dXJhdGUodmVjMyBhKSAgICAgICAgeyByZXR1cm4gY2xhbXAoYSwgMC4wLCAxLjApOyB9CmZsb2F0IHNhdzAxKGZsb2F0IGEpICAgICAgICAgICB7IHJldHVybiBhYnMoZnJhY3QoYSkgKiAyLjAgLSAxLjApOyB9CmZsb2F0IGN3aXNlTWF4KHZlYzMgdikgICAgICAgICB7IHJldHVybiAodi54ID4gdi55KSA/ICgodi54ID4gdi56KSA/IHYueCA6IHYueikgOiAoKHYueSA+IHYueikgPyB2LnkgOiB2LnopOyB9CmZsb2F0IGN3aXNlTWF4KHZlYzIgdikgICAgICAgICB7IHJldHVybiAodi54ID4gdi55KSA/IHYueCA6IHYueTsgfQpmbG9hdCBjd2lzZU1pbih2ZWMzIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA8IHYueSkgPyAoKHYueCA8IHYueikgPyB2LnggOiB2LnopIDogKCh2LnkgPCB2LnopID8gdi55IDogdi56KTsgfQpmbG9hdCBjd2lzZU1pbih2ZWMyIHYpICAgICAgICAgeyByZXR1cm4gKHYueCA8IHYueSkgPyB2LnggOiB2Lnk7IH0Kdm9pZCBzb3J0KGlub3V0IGZsb2F0IGEsIGlub3V0IGZsb2F0IGIpIHsgaWYoYSA+IGIpIHsgZmxvYXQgcyA9IGE7IGEgPSBiOyBiID0gczsgfSB9CnZvaWQgc3dhcChpbm91dCBmbG9hdCBhLCBpbm91dCBmbG9hdCBiKSB7IGZsb2F0IHMgPSBhOyBhID0gYjsgYiA9IHM7IH0KCnZlYzMgc2FmZUF0YW4odmVjMyBhLCB2ZWMzIGIpCnsKICAgIHZlYzMgcjsKICAgICNkZWZpbmUga0F0YW5FcHNpbG9uIDFlLTEwCiAgICByLnggPSAoYWJzKGEueCkgPCBrQXRhbkVwc2lsb24gJiYgYWJzKGIueCkgPCBrQXRhbkVwc2lsb24pID8gMC4wIDogYXRhbihhLngsIGIueCk7IAogICAgci55ID0gKGFicyhhLnkpIDwga0F0YW5FcHNpbG9uICYmIGFicyhiLnkpIDwga0F0YW5FcHNpbG9uKSA/IDAuMCA6IGF0YW4oYS55LCBiLnkpOyAKICAgIHIueiA9IChhYnMoYS56KSA8IGtBdGFuRXBzaWxvbiAmJiBhYnMoYi56KSA8IGtBdGFuRXBzaWxvbikgPyAwLjAgOiBhdGFuKGEueiwgYi56KTsgCiAgICByZXR1cm4gcjsKfQoKZmxvYXQgU21vb3RoU3RlcChmbG9hdCBhLCBmbG9hdCBiLCBmbG9hdCB4KSB7IHJldHVybiBtaXgoYSwgYiwgeCAqIHggKiAoMy4wIC0gMi4wICogeCkpOyB9CnZlYzQgU21vb3RoU3RlcCh2ZWM0IGEsIHZlYzQgYiwgZmxvYXQgeCkgICAgeyByZXR1cm4gbWl4KGEsIGIsIHggKiB4ICogKDMuMCAtIDIuMCAqIHgpKTsgfQpmbG9hdCBTbW9vdGhTdGVwKGZsb2F0IHgpICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIG1peCgwLjAsIDEuMCwgeCAqIHggKiAoMy4wIC0gMi4wICogeCkpOyB9CgpmbG9hdCBQYWRkZWRTbW9vdGhTdGVwKGZsb2F0IHgsIGZsb2F0IGEsIGZsb2F0IGIpCnsgCiAgICByZXR1cm4gU21vb3RoU3RlcChzYXR1cmF0ZSh4ICogKGEgKyBiICsgMS4wKSAtIGEpKTsKfQoKZmxvYXQgUGFkZGVkU21vb3RoU3RlcChmbG9hdCB4LCBmbG9hdCBhKQp7CiAgICByZXR1cm4gUGFkZGVkU21vb3RoU3RlcCh4LCBhLCBhKTsKfQoKZmxvYXQgSW1wdWxzZShmbG9hdCB4LCBmbG9hdCBheGlzLCBmbG9hdCBzdGREZXYpCnsKICAgIHJldHVybiBleHAoLXNxcigoeCAtIGF4aXMpIC8gc3RkRGV2KSk7Cn0KCmZsb2F0IEFuaXNvdHJvcGljSW1wdWxzZShmbG9hdCB4LCBmbG9hdCBheGlzLCBmbG9hdCBzdGREZXZBLCBmbG9hdCBzdGREZXZCKQp7CiAgICBmbG9hdCBpbXB1bHNlID0gKHggPCBheGlzKSA/IGV4cCgtc3FyKCh4IC0gYXhpcykgLyBzdGREZXZBKSkgOiBleHAoLXNxcigoeCAtIGF4aXMpIC8gc3RkRGV2QikpOwogICAgcmV0dXJuIHNhdHVyYXRlKChpbXB1bHNlIC0gMC4wNSkgLyAoMS4wIC0gMC4wNSkpOwp9CgpmbG9hdCBLaWNrRHJvcChmbG9hdCB0LCB2ZWMyIHAwLCB2ZWMyIHAxLCB2ZWMyIHAyLCB2ZWMyIHAzKQp7CiAgICBpZih0IDwgcDEueCkKICAgIHsKICAgICAgICByZXR1cm4gbWl4KHAwLnksIHAxLnksIG1heCgwLjAsIGV4cCgtc3FyKCh0IC0gcDEueCkqMi4xNDU5NjYwMjYyODkzNDcvKHAxLngtcDAueCkpKSAtIDAuMDEpIC8gMC45OSk7CiAgICB9CiAgICBlbHNlIGlmKHQgPCBwMi54KQogICAgewogICAgICAgIHJldHVybiBtaXgocDEueSwgcDIueSwgKHQgLSBwMS54KSAvIChwMi54IC0gcDEueCkpOwogICAgfQogICAgZWxzZQogICAgeyAgCiAgICAgICAgcmV0dXJuIG1peChwMy55LCBwMi55LCBtYXgoMC4wLCBleHAoLXNxcigodCAtIHAyLngpKjIuMTQ1OTY2MDI2Mjg5MzQ3LyhwMy54LXAyLngpKSkgLSAwLjAxKSAvIDAuOTkpOwogICAgfQp9CgpmbG9hdCBLaWNrRHJvcChmbG9hdCB0LCB2ZWMyIHAwLCB2ZWMyIHAxLCB2ZWMyIHAyKQp7CiAgICByZXR1cm4gS2lja0Ryb3AodCwgcDAsIHAxLCBwMSwgcDIpOwp9Cgpib29sIFF1YWRyYXRpY1NvbHZlKGZsb2F0IGEsIGZsb2F0IGIsIGZsb2F0IGMsIG91dCBmbG9hdCB0MCwgb3V0IGZsb2F0IHQxKQp7CiAgICBmbG9hdCBiMmFjNCA9IGIgKiBiIC0gNC4wICogYSAqIGM7CiAgICBpZihiMmFjNCA8IDAuMCkgeyByZXR1cm4gZmFsc2U7IH0gCgogICAgZmxvYXQgc3FydGIyYWM0ID0gc3FydChiMmFjNCk7CiAgICB0MCA9ICgtYiArIHNxcnRiMmFjNCkgLyAoMi4wICogYSk7CiAgICB0MSA9ICgtYiAtIHNxcnRiMmFjNCkgLyAoMi4wICogYSk7ICAgIAogICAgcmV0dXJuIHRydWU7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgMkQgU1ZHCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCmZsb2F0IFNERkxpbmUodmVjMiBwLCB2ZWMyIHYwLCB2ZWMyIHYxLCBmbG9hdCB0aGlja25lc3MpCnsKICAgIHYxIC09IHYwOwogICAgZmxvYXQgdCA9IHNhdHVyYXRlKChkb3QocCwgdjEpIC0gZG90KHYwLCB2MSkpIC8gZG90KHYxLCB2MSkpOwogICAgdmVjMiBwZXJwID0gdjAgKyB0ICogdjE7CiAgICByZXR1cm4gc2F0dXJhdGUoKHRoaWNrbmVzcyAtIGxlbmd0aChwIC0gcGVycCkpIC8gZ0R4eUR1dik7Cn0KCmZsb2F0IFNERlF1YWQodmVjMiBwLCB2ZWMyIHZbNF0sIGZsb2F0IHRoaWNrbmVzcykKewogICAgZmxvYXQgYyA9IDAuMDsKICAgIGZvcihpbnQgaSA9IDA7IGkgPCA0OyBpKyspCiAgICB7CiAgICAgICAgYyA9IG1heChjLCBTREZMaW5lKHAsIHZbaV0sIHZbKGkrMSklNF0sIHRoaWNrbmVzcykpOyAKICAgIH0KIAogICAgcmV0dXJuIGM7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgMkQgcHJpbWl0aXZlIHRlc3RzCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCmJvb2wgSXNQb2ludEluUXVhZCh2ZWMyIHV2LCB2ZWMyIHZbNF0pCnsKICAgIGZvcihpbnQgaSA9IDA7IGkgPCA0OyBpKyspCiAgICB7CiAgICAgICAgaWYoZG90KHV2IC0gdltpXSwgdltpXSAtIHZbKGkrMSklNF0pID4gMC4wKSB7IHJldHVybiBmYWxzZTsgfQogICAgfQogICAgcmV0dXJuIHRydWU7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgVHJhbnNmb3JtcyAKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKbWF0MyBXb3JsZFRvVmlld01hdHJpeChmbG9hdCByb3QsIHZlYzIgdHJhbnMsIGZsb2F0IHNjYSkKeyAgIAogICAgcmV0dXJuIG1hdDModmVjMyhjb3Mocm90KSAvIHNjYSwgc2luKHJvdCkgLyBzY2EsIHRyYW5zLngpLCAKICAgICAgICAgICAgICAgIHZlYzMoLXNpbihyb3QpIC8gc2NhLCBjb3Mocm90KSAvIHNjYSwgdHJhbnMueSksCiAgICAgICAgICAgICAgICB2ZWMzKDAuMCwgMC4wLCAxLjApKTsKfQoKbWF0MyBXb3JsZFRvVmlld01hdHJpeCh2ZWMyIHRyYW5zLCBmbG9hdCBzY2EpCnsgICAKICAgIHJldHVybiBtYXQzKHZlYzMoMS4wIC8gc2NhLCAwLjAsIHRyYW5zLngpLCAKICAgICAgICAgICAgICAgIHZlYzMoMC4wLCAxLjAgLyBzY2EsIHRyYW5zLnkpLAogICAgICAgICAgICAgICAgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KCnZlYzIgVHJhbnNmb3JtU2NyZWVuVG9Xb3JsZCh2ZWMyIHApCnsgICAKICAgIHJldHVybiAocCAtIHZlYzIoZ1Jlc29sdXRpb24ueHkpICogMC41KSAvIGZsb2F0KGdSZXNvbHV0aW9uLnkpOyAKfQoKCnZlYzMgQ2FydGVzaWFuMkRUb0JhcnljZW50cmljKHZlYzIgcCkKeyAgICAKICAgIHJldHVybiB2ZWMzKHAsIDAuMCkgKiBtYXQzKHZlYzMoMC4wLCAxLjAgLyAwLjg2NjAyNTQwMzc4NDQzODcsIDAuMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMygxLjAsIDAuNTc3MzUwMjY5MTg5NjI1NywgMC4wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKC0xLjAsIDAuNTc3MzUwMjY5MTg5NjI1NywgMC4wKSk7CiAgICAKfQoKLy8gTWFwcyBhbiBpbnB1dCB1diBwb3NpdGlvbiB0byBwZXJpb2RpYyBoZXhhZ29uYWwgdGlsaW5nCi8vICAgICBpbm91dCB2ZWMyIHV2OiBUaGUgbWFwcGVkIHV2IGNvb3JkaW5hdGUKLy8gICAgIG91dCB2ZWMzIGJhcnk6IFRoZSBCYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBhdCB0aGUgcG9pbnQgb24gdGhlIGhleGFnb24KLy8gICAgIG91dCBpdmVjMiBpajogVGhlIGNvb3JkaW5hdGUgb2YgdGhlIHRpbGUKdmVjMiBDYXJ0ZXNpYW4yRFRvSGV4YWdvbmFsVGlsaW5nKGluIHZlYzIgdXYsIG91dCB2ZWMzIGJhcnksIG91dCBpdmVjMiBpaikKeyAgICAKICAgICNkZWZpbmUga0hleFJhdGlvIHZlYzIoMS41LCAwLjg2NjAyNTQwMzc4NDQzODcpCiAgICB2ZWMyIHV2Q2xpcCA9IG1vZCh1diArIGtIZXhSYXRpbywgMi4wICoga0hleFJhdGlvKSAtIGtIZXhSYXRpbzsKICAgIAogICAgaWogPSBpdmVjMigodXYgKyBrSGV4UmF0aW8pIC8gKDIuMCAqIGtIZXhSYXRpbykpICogMjsKICAgIGlmKHV2LnggKyBrSGV4UmF0aW8ueCA8PSAwLjApIGlqLnggLT0gMjsKICAgIGlmKHV2LnkgKyBrSGV4UmF0aW8ueSA8PSAwLjApIGlqLnkgLT0gMjsKICAgIAogICAgYmFyeSA9IENhcnRlc2lhbjJEVG9CYXJ5Y2VudHJpYyh1dkNsaXApOwogICAgaWYoYmFyeS54ID4gMC4wKQogICAgewogICAgICAgIGlmKGJhcnkueiA+IDEuMCkgeyBiYXJ5ICs9IHZlYzMoLTEuMCwgMS4wLCAtMi4wKTsgaWogKz0gaXZlYzIoLTEsIDEpOyB9CiAgICAgICAgZWxzZSBpZihiYXJ5LnkgPiAxLjApIHsgYmFyeSArPSB2ZWMzKC0xLjAsIC0yLjAsIDEuMCk7IGlqICs9IGl2ZWMyKDEsIDEpOyB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaWYoYmFyeS55IDwgLTEuMCkgeyBiYXJ5ICs9IHZlYzMoMS4wLCAyLjAsIC0xLjApOyBpaiArPSBpdmVjMigtMSwgLTEpOyB9CiAgICAgICAgZWxzZSBpZihiYXJ5LnogPCAtMS4wKSB7IGJhcnkgKz0gdmVjMygxLjAsIC0xLjAsIDIuMCk7IGlqICs9IGl2ZWMyKDEsIC0xKTsgfQogICAgfQoKICAgIHJldHVybiB2ZWMyKGJhcnkueSAqIDAuNTc3MzUwMjY5MTg5NjI1NyAtIGJhcnkueiAqIDAuNTc3MzUwMjY5MTg5NjI1NywgYmFyeS54KTsKfQoKYm9vbCBJbnZlcnNlU3Rlcm5vZ3JhcGgoaW5vdXQgdmVjMiB1diwgZmxvYXQgem9vbSkKewogICAgZmxvYXQgdGhldGEgPSBsZW5ndGgodXYpICoga1BpICogem9vbTsKICAgIGlmKHRoZXRhID49IGtQaSAtIDFlLTEpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAKICAgIGZsb2F0IHBoaSA9IGF0YW4oLXV2LnksIC11di54KSArIGtQaTsKICAgIAogICAgdmVjMyBzcGggPSB2ZWMzKGNvcyhwaGkpICogc2luKHRoZXRhKSwgc2luKHBoaSkgKiBzaW4odGhldGEpLCAtY29zKHRoZXRhKSk7CiAgICAKICAgIHV2ID0gdmVjMihzcGgueCAvICgxLjAgLSBzcGgueiksIHNwaC55IC8gKDEuMCAtIHNwaC56KSk7CiAgICByZXR1cm4gdHJ1ZTsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBSYW5kb20gbnVtYmVyIGdlbmVyYXRpb24KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKLy8gUGVybXV0ZWQgY29uZ3J1ZW50aWFsIGdlbmVyYXRvciBmcm9tICJIYXNoIEZ1bmN0aW9ucyBmb3IgR1BVIFJlbmRlcmluZyIgKEphcnp5bnNraSBhbmQgT2xhbm8pCi8vIGh0dHA6Ly9qY2d0Lm9yZy9wdWJsaXNoZWQvMDAwOS8wMy8wMi9wYXBlci5wZGYKdXZlYzQgUENHQWR2YW5jZSgpCnsKICAgIHJuZ1NlZWQgPSBybmdTZWVkICogMTY2NDUyNXUgKyAxMDEzOTA0MjIzdTsKICAgIAogICAgcm5nU2VlZC54ICs9IHJuZ1NlZWQueSpybmdTZWVkLnc7IAogICAgcm5nU2VlZC55ICs9IHJuZ1NlZWQueipybmdTZWVkLng7IAogICAgcm5nU2VlZC56ICs9IHJuZ1NlZWQueCpybmdTZWVkLnk7IAogICAgcm5nU2VlZC53ICs9IHJuZ1NlZWQueSpybmdTZWVkLno7CiAgICAKICAgIHJuZ1NlZWQgXj0gcm5nU2VlZCA+PiAxNnU7CiAgICAKICAgIHJuZ1NlZWQueCArPSBybmdTZWVkLnkqcm5nU2VlZC53OyAKICAgIHJuZ1NlZWQueSArPSBybmdTZWVkLnoqcm5nU2VlZC54OyAKICAgIHJuZ1NlZWQueiArPSBybmdTZWVkLngqcm5nU2VlZC55OyAKICAgIHJuZ1NlZWQudyArPSBybmdTZWVkLnkqcm5nU2VlZC56OwogICAgCiAgICByZXR1cm4gcm5nU2VlZDsKfQoKLy8gR2VuZXJhdGVzIGEgdHVwbGUgb2YgY2Fub25pY2FsIHJhbmRvbSBudW1iZXIgYW5kIHVzZXMgdGhlbSB0byBzYW1wbGUgYW4gaW5wdXQgdGV4dHVyZQp2ZWM0IFJhbmQoc2FtcGxlcjJEIHNhbXBsZXIpCnsKICAgIHJldHVybiB0ZXhlbEZldGNoKHNhbXBsZXIsIChpdmVjMihnRnJhZ0Nvb3JkKSArIGl2ZWMyKFBDR0FkdmFuY2UoKSA+PiAxNikpICUgMTAyNCwgMCk7Cn0KCi8vIEdlbmVyYXRlcyBhIHR1cGxlIG9mIGNhbm9uaWNhbCByYW5kb20gbnVtYmVycyBpbiB0aGUgcmFuZ2UgWzAsIDFdCnZlYzQgUmFuZCgpCnsKICAgIHJldHVybiB2ZWM0KFBDR0FkdmFuY2UoKSkgLyBmbG9hdCgweGZmZmZmZmZmdSk7Cn0KCi8vIFNlZWQgdGhlIFBDRyBoYXNoIGZ1bmN0aW9uIHdpdGggdGhlIGN1cnJlbnQgZnJhbWUgbXVsdGlwbGVkIGJ5IGEgcHJpbWUKdm9pZCBQQ0dJbml0aWFsaXNlKHVpbnQgZnJhbWUpCnsgICAgCiAgICBybmdTZWVkID0gdXZlYzQoMjAyMTl1LCA3MjQzdSwgMTI1NDd1LCAyODU3M3UpICogZnJhbWU7Cn0KCi8vIFJldmVyc2UgdGhlIGJpdHMgb2YgMzItYml0IGludGV0ZXIKdWludCBSYWRpY2FsSW52ZXJzZSh1aW50IGkpCnsKICAgIGkgPSAoKGkgJiAweGZmZmZ1KSA8PCAxNnUpIHwgKGkgPj4gMTZ1KTsKICAgIGkgPSAoKGkgJiAweDAwZmYwMGZmdSkgPDwgOHUpIHwgKChpICYgMHhmZjAwZmYwMHUpID4+IDh1KTsKICAgIGkgPSAoKGkgJiAweDBmMGYwZjBmdSkgPDwgNHUpIHwgKChpICYgMHhmMGYwZjBmMHUpID4+IDR1KTsKICAgIGkgPSAoKGkgJiAweDMzMzMzMzMzdSkgPDwgMnUpIHwgKChpICYgMHhjY2NjY2NjY3UpID4+IDJ1KTsgICAgCiAgICBpID0gKChpICYgMHg1NTU1NTU1NXUpIDw8IDF1KSB8ICgoaSAmIDB4YWFhYWFhYWF1KSA+PiAxdSk7ICAgICAgICAKICAgIHJldHVybiBpOwp9CgovLyBTYW1wbGVzIHRoZSByYWRpeC0yIEhhbHRvbiBzZXF1ZW5jZSBmcm9tIHNlZWQgdmFsdWUsIGkKZmxvYXQgSGFsdG9uQmFzZTIodWludCBpKQp7ICAgIAogICAgcmV0dXJuIGZsb2F0KFJhZGljYWxJbnZlcnNlKGkpKSAvIGZsb2F0KDB4ZmZmZmZmZmZ1KTsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBIYXNoIGZ1bmN0aW9ucwovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgovLyBDb25zdGFudHMgZm9yIHRoZSBGb3dsZXItTm9sbC1WbyBoYXNoIGZ1bmN0aW9uCi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zvd2xlci1Ob2xsLVZvX2hhc2hfZnVuY3Rpb24KI2RlZmluZSBrRk5WUHJpbWUgICAgICAgICAgICAgIDB4MDEwMDAxOTN1CiNkZWZpbmUga0ZOVk9mZnNldCAgICAgICAgICAgICAweDgxMWM5ZGM1dQojZGVmaW5lIGtEaW1zUGVyQm91bmNlICAgICAgICAgNAoKLy8gTWl4IGFuZCBjb21iaW5lIHR3byBoYXNoZXMKdWludCBIYXNoQ29tYmluZSh1aW50IGEsIHVpbnQgYikKewogICAgcmV0dXJuICgoKGEgPDwgKDMxdSAtIChiICYgMzF1KSkpIHwgKGEgPj4gKGIgJiAzMXUpKSkpIF4KICAgICAgICAgICAgKChiIDw8IChhICYgMzF1KSkgfCAoYiA+PiAoMzF1IC0gKGEgJiAzMXUpKSkpOwp9CgovLyBDb21wdXRlIGEgMzItYml0IEZvd2xlci1Ob2xsLVZvIGhhc2ggZm9yIHRoZSBnaXZlbiBpbnB1dAp1aW50IEhhc2hPZih1aW50IGkpCnsKICAgIHVpbnQgaCA9IChrRk5WT2Zmc2V0IF4gKGkgJiAweGZmdSkpICoga0ZOVlByaW1lOwogICAgaCA9IChoIF4gKChpID4+IDh1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICBoID0gKGggXiAoKGkgPj4gMTZ1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICBoID0gKGggXiAoKGkgPj4gMjR1KSAmIDB4ZmZ1KSkgKiBrRk5WUHJpbWU7CiAgICByZXR1cm4gaDsKfQoKdWludCBIYXNoT2YoaW50IGEpIHsgcmV0dXJuIEhhc2hPZih1aW50KGEpKTsgfQp1aW50IEhhc2hPZih1aW50IGEsIHVpbnQgYikgeyByZXR1cm4gSGFzaENvbWJpbmUoSGFzaE9mKGEpLCBIYXNoT2YoYikpOyB9CnVpbnQgSGFzaE9mKHVpbnQgYSwgdWludCBiLCB1aW50IGMpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hDb21iaW5lKEhhc2hPZihhKSwgSGFzaE9mKGIpKSwgSGFzaE9mKGMpKTsgfQp1aW50IEhhc2hPZih1aW50IGEsIHVpbnQgYiwgdWludCBjLCB1aW50IGQpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hDb21iaW5lKEhhc2hPZihhKSwgSGFzaE9mKGIpKSwgSGFzaENvbWJpbmUoSGFzaE9mKGMpLCBIYXNoT2YoZCkpKTsgfQp1aW50IEhhc2hPZih2ZWMyIHYpIHsgcmV0dXJuIEhhc2hDb21iaW5lKEhhc2hPZih1aW50KHYueCkpLCBIYXNoT2YodWludCh2LnkpKSk7IH0KdWludCBIYXNoT2YoaXZlYzIgdikgeyByZXR1cm4gSGFzaENvbWJpbmUoSGFzaE9mKHVpbnQodi54KSksIEhhc2hPZih1aW50KHYueSkpKTsgfQoKLy8gU2FtcGxlcyB0aGUgcmFkaXgtMiBIYWx0b24gc2VxdWVuY2UgZnJvbSBzZWVkIHZhbHVlLCBpCmZsb2F0IEhhc2hUb0Zsb2F0KHVpbnQgaSkKeyAgICAKICAgIHJldHVybiBmbG9hdChpKSAvIGZsb2F0KDB4ZmZmZmZmZmZ1KTsKfQoKY29uc3QgbWF0NCBrT3JkZXJlZERpdGhlciA9IG1hdDQodmVjNCgwLjAsIDguMCwgMi4wLCAxMC4pLCB2ZWM0KDEyLiwgNC4sIDE0LiwgNi4pLCB2ZWM0KDMuLCAxMS4sIDEuLCA5LiksIHZlYzQoMTUuLCA3LiwgMTMuLCA1LikpOwpmbG9hdCBPcmRlcmVkRGl0aGVyKCkKeyAgICAKICAgIHJldHVybiAoa09yZGVyZWREaXRoZXJbaW50KGdGcmFnQ29vcmQueCkgJiAzXVtpbnQoZ0ZyYWdDb29yZC55KSAmIDNdICsgMS4wKSAvIDE3LjA7Cn0KCnZlYzMgU2FtcGxlVW5pdFNwaGVyZSh2ZWMyIHhpKQp7CiAgICB4aS54ID0geGkueCAqIDIuMCAtIDEuMDsKICAgIHhpLnkgKj0ga1R3b1BpOwoKICAgIGZsb2F0IHNpblRoZXRhID0gc3FydCgxLjAgLSB4aS54ICogeGkueCk7CiAgICByZXR1cm4gdmVjMyhjb3MoeGkueSkgKiBzaW5UaGV0YSwgeGkueCwgc2luKHhpLnkpICogc2luVGhldGEpOwp9CgovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vICAgIENvbG91ciBmdW5jdGlvbnMKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKdmVjMyBIdWUoZmxvYXQgcGhpKQp7CiAgICBmbG9hdCBwaGlDb2xvdXIgPSA2LjAgKiBwaGk7CiAgICBpbnQgaSA9IGludChwaGlDb2xvdXIpOwogICAgdmVjMyBjMCA9IHZlYzMoKChpICsgNCkgLyAzKSAmIDEsICgoaSArIDIpIC8gMykgJiAxLCAoKGkgKyAwKSAvIDMpICYgMSk7CiAgICB2ZWMzIGMxID0gdmVjMygoKGkgKyA1KSAvIDMpICYgMSwgKChpICsgMykgLyAzKSAmIDEsICgoaSArIDEpIC8gMykgJiAxKTsgICAgICAgICAgICAgCiAgICByZXR1cm4gbWl4KGMwLCBjMSwgcGhpQ29sb3VyIC0gZmxvYXQoaSkpOwp9CgovLyBBIEdhdXNzaWFuIGZ1bmN0aW9uIHRoYXQgd2UgdXNlIHRvIHNhbXBsZSB0aGUgWFlaIHN0YW5kYXJkIG9ic2VydmVyIApmbG9hdCBDSUVYWVpHYXVzcyhmbG9hdCBsYW1iZGEsIGZsb2F0IGFscGhhLCBmbG9hdCBtdSwgZmxvYXQgc2lnbWExLCBmbG9hdCBzaWdtYTIpCnsKICAgcmV0dXJuIGFscGhhICogZXhwKHNxcihsYW1iZGEgLSBtdSkgLyAoLTIuMCAqIHNxcihsYW1iZGEgPCBtdSA/IHNpZ21hMSA6IHNpZ21hMikpKTsKfQoKdmVjMyBIU1ZUb1JHQih2ZWMzIGhzdikKewogICAgcmV0dXJuIG1peCh2ZWMzKDAuMCksIG1peCh2ZWMzKDEuMCksIEh1ZShoc3YueCksIGhzdi55KSwgaHN2LnopOwp9Cgp2ZWMzIFJHQlRvSFNWKCB2ZWMzIHJnYikKewogICAgLy8gVmFsdWUKICAgIHZlYzMgaHN2OwogICAgaHN2LnogPSBjd2lzZU1heChyZ2IpOwoKICAgIC8vIFNhdHVyYXRpb24KICAgIGZsb2F0IGNocm9tYSA9IGhzdi56IC0gY3dpc2VNaW4ocmdiKTsKICAgIGhzdi55ID0gKGhzdi56IDwgMWUtMTApID8gMC4wIDogKGNocm9tYSAvIGhzdi56KTsKCiAgICAvLyBIdWUKICAgIGlmIChjaHJvbWEgPCAxZS0xMCkgICAgICAgIHsgaHN2LnggPSAwLjA7IH0KICAgIGVsc2UgaWYgKGhzdi56ID09IHJnYi54KSAgICB7IGhzdi54ID0gKDEuMCAvIDYuMCkgKiAocmdiLnkgLSByZ2IueikgLyBjaHJvbWE7IH0KICAgIGVsc2UgaWYgKGhzdi56ID09IHJnYi55KSAgICB7IGhzdi54ID0gKDEuMCAvIDYuMCkgKiAoMi4wICsgKHJnYi56IC0gcmdiLngpIC8gY2hyb21hKTsgfQogICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgIHsgaHN2LnggPSAoMS4wIC8gNi4wKSAqICg0LjAgKyAocmdiLnggLSByZ2IueSkgLyBjaHJvbWEpOyB9CiAgICBoc3YueCA9IGZyYWN0KGhzdi54ICsgMS4wKTsKCiAgICByZXR1cm4gaHN2Owp9Cgp2ZWMzIFNhbXBsZVNwZWN0cnVtKGZsb2F0IGxhbWJkYSkKewogICAgLy8gSGVyZSB3ZSB1c2UgYSBzZXQgb2YgZml0dGVkIEdhdXNzaWFuIGN1cnZlcyB0byBhcHByb3hpbWF0ZSB0aGUgQ0lFIFhZWiBzdGFuZGFyZCBvYnNlcnZlci4KICAgIC8vIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DSUVfMTkzMV9jb2xvcl9zcGFjZSBmb3IgZGV0YWxzIG9uIHRoZSBmb3JtdWxhCiAgICAvLyBUaGlzIGFsbG93cyB1cyB0byBtYXAgdGhlIHNhbXBsZWQgd2F2ZWxlbmd0aCB0byB1c2FibGUgUkdCIHZhbHVlcy4gVGhpcyBjb2RlIG5lZWRzIGNsZWFuaW5nIAogICAgLy8gdXAgYmVjYXVzZSB3ZSBkbyBhbiB1bm5lY2Vzc2FyeSBub3JtYWxpc2F0aW9uIHN0ZXBzIGFzIHdlIG1hcCBmcm9tIGxhbWJkYSB0byBYWVogdG8gUkdCLgoKICAgICNkZWZpbmUga1JOb3JtICg3MDAwLjAgLSAzODAwLjApIC8gMTE0My4wNwogICAgI2RlZmluZSBrR05vcm0gKDcwMDAuMCAtIDM4MDAuMCkgLyAxMDY4LjcKICAgICNkZWZpbmUga0JOb3JtICg3MDAwLjAgLSAzODAwLjApIC8gMTA2OC4yNQoKICAgIC8vIFNhbXBsZSB0aGUgR2F1c3NpYW4gYXBwcm94aW1hdGlvbnMKICAgIHZlYzMgeHl6OwogICAgeHl6LnggPSAoQ0lFWFlaR2F1c3MobGFtYmRhLCAxLjA1NiwgNTk5OC4wLCAzNzkuMCwgMzEwLjApICsKICAgICAgICAgICAgIENJRVhZWkdhdXNzKGxhbWJkYSwgMC4zNjIsIDQ0MjAuMCwgMTYwLjAsIDI2Ny4wKSArCiAgICAgICAgICAgICBDSUVYWVpHYXVzcyhsYW1iZGEsIDAuMDY1LCA1MDExLjAsIDIwNC4wLCAyNjIuMCkpICoga1JOb3JtOwogICAgeHl6LnkgPSAoQ0lFWFlaR2F1c3MobGFtYmRhLCAwLjgyMSwgNTY4OC4wLCA0NjkuMCwgNDA1LjApICsKICAgICAgICAgICAgIENJRVhZWkdhdXNzKGxhbWJkYSwgMC4yODYsIDUzMDkuMCwgMTYzLjAsIDMxMS4wKSkgKiBrR05vcm07CiAgICB4eXoueiA9IChDSUVYWVpHYXVzcyhsYW1iZGEsIDEuMjE3LCA0MzcwLjAsIDExOC4wLCAzNjAuMCkgKwogICAgICAgICAgICAgQ0lFWFlaR2F1c3MobGFtYmRhLCAwLjY4MSwgNDU5MC4wLCAyNjAuMCwgMTM4LjApKSAqIGtCTm9ybTsKCiAgICAvLyBYWVogdG8gUkdCIGxpbmVhciB0cmFuc2Zvcm0KICAgIHZlYzMgcmdiOwogICAgcmdiLnIgPSAoMi4wNDE1OSAqIHh5ei54IC0gMC41NjUwICogeHl6LnkgLSAwLjM0NDczICogeHl6LnopIC8gKDIuMCAqIDAuNTY1KTsKICAgIHJnYi5nID0gKC0wLjk2OTI0ICogeHl6LnggKyAxLjg3NTk2ICogeHl6LnkgKyAwLjA0MTU1ICogeHl6LnopIC8gKDIuMCAqIDAuNDcyKTsKICAgIHJnYi5iID0gKDAuMDEzNDQgKiB4eXoueCAtIDAuMTE4NjMgKiB4eXoueSArIDEuMDE1MTcgKiB4eXoueikgLyAoMi4wICogMC40NTIpOwoKICAgIHJldHVybiByZ2I7Cn0KCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKLy8gICAgUmF5IHRyYWNpbmcKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKI2RlZmluZSBrSW52YWxpZEhpdCAgICAgICAgICAgICAgLTEuMAojZGVmaW5lIGtOdWxsUmF5ICAgICAgICAgICAgICAgICAtMS4wCgpzdHJ1Y3QgVHJhbnNmb3JtCnsKICAgIHZlYzMgdHJhbnM7CiAgICBtYXQzIHJvdDsKICAgIGZsb2F0IHNjYTsKfTsKCm1hdDMgSWRlbnRpdHkoKQp7CiAgICByZXR1cm4gbWF0Myh2ZWMzKDEuMCwgMC4wLCAwLjApLCB2ZWMzKDAuMCwgMS4wLCAwLjApLCB2ZWMzKDAuMCwgMC4wLCAxLjApKTsKfQoKbWF0MyBTY2FsZU1hdDMoZmxvYXQgc2NhbGUpCnsKICAgIGZsb2F0IGludlNjYWxlID0gMS4wZiAvIHNjYWxlOwogICAgcmV0dXJuIG1hdDModmVjMyhpbnZTY2FsZSwgMC4wLCAwLjApLAogICAgICAgICAgICB2ZWMzKDAuMCwgaW52U2NhbGUsIDAuMCksCiAgICAgICAgICAgIHZlYzMoMC4wLCAwLjAsIGludlNjYWxlKSk7Cn0KCm1hdDMgUm90WE1hdDMoZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMygxLjAsIDAuMCwgMC4wKSwKICAgICAgICAgICAgdmVjMygwLjAsIGNvc1RoZXRhLCAtc2luVGhldGEpLAogICAgICAgICAgICB2ZWMzKDAuMCwgc2luVGhldGEsIGNvc1RoZXRhKSk7Cn0KCm1hdDMgUm90WU1hdDMoY29uc3QgZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMyhjb3NUaGV0YSwgMC4wLCBzaW5UaGV0YSksCiAgICAgICAgICAgIHZlYzMoMC4wLCAxLjAsIDAuMCksCiAgICAgICAgICAgIHZlYzMoLXNpblRoZXRhLCAwLjAsIGNvc1RoZXRhKSk7Cn0KCm1hdDMgUm90Wk1hdDMoY29uc3QgZmxvYXQgdGhldGEpCnsKICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKHRoZXRhKSwgc2luVGhldGEgPSBzaW4odGhldGEpOwogICAgcmV0dXJuIG1hdDModmVjMyhjb3NUaGV0YSwgLXNpblRoZXRhLCAwLjApLAogICAgICAgICAgICB2ZWMzKHNpblRoZXRhLCBjb3NUaGV0YSwgMC4wKSwKICAgICAgICAgICAgdmVjMygwLjAsIDAuMCwgMS4wKSk7Cn0KClRyYW5zZm9ybSBDb21wb3VuZFRyYW5zZm9ybSh2ZWMzIHRyYW5zLCB2ZWMzIHJvdCwgZmxvYXQgc2NhbGUpCnsKICAgIFRyYW5zZm9ybSB0cmFuc2Zvcm07CiAgICB0cmFuc2Zvcm0ucm90ID0gSWRlbnRpdHkoKTsKICAgIHRyYW5zZm9ybS5zY2EgPSBzY2FsZTsKCiAgICBpZiAocm90LnggIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90WE1hdDMocm90LngpOyB9CiAgICBpZiAocm90LnkgIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90WU1hdDMocm90LnkpOyB9CiAgICBpZiAocm90LnogIT0gMC4wKSB7IHRyYW5zZm9ybS5yb3QgKj0gUm90Wk1hdDMocm90LnopOyB9CgogICAgaWYgKHNjYWxlICE9IDEuMGYpIHsgdHJhbnNmb3JtLnJvdCAqPSBTY2FsZU1hdDMoc2NhbGUpOyB9CiAgICAKICAgIHJldHVybiB0cmFuc2Zvcm07Cn0KCi8vIEZhc3QgY29uc3RydWN0aW9uIG9mIG9ydGhvbm9ybWFsIGJhc2lzIHVzaW5nIHF1YXJ0ZXJuaW9ucyB0byBhdm9pZCBleHBlbnNpdmUgbm9ybWFsaXNhdGlvbiBhbmQgYnJhbmNoaW5nIAovLyBGcm9tIER1ZiBldCBhbCdzIHRlY2huaWNhbCByZXBvcnQgaHR0cHM6Ly9ncmFwaGljcy5waXhhci5jb20vbGlicmFyeS9PcnRob25vcm1hbEIvcGFwZXIucGRmLCBpbnNwaXJlZCBieQovLyBGcmlzdmFkJ3Mgb3JpZ2luYWwgcGFwZXI6IGh0dHA6Ly9vcmJpdC5kdHUuZGsvZmlsZXMvMTI2ODI0OTcyL29uYl9mcmlzdmFkX2pndDIwMTJfdjIucGRmCm1hdDMgQ3JlYXRlQmFzaXModmVjMyBuKQp7CiAgICBmbG9hdCBzID0gc2lnbihuLnopOwogICAgZmxvYXQgYSA9IC0xLjAgLyAocyArIG4ueik7CiAgICBmbG9hdCBiID0gbi54ICogbi55ICogYTsKICAgIAogICAgcmV0dXJuIG1hdDModmVjMygxLjBmICsgcyAqIG4ueCAqIG4ueCAqIGEsIHMgKiBiLCAtcyAqIG4ueCksCiAgICAgICAgICAgICAgICB2ZWMzKGIsIHMgKyBuLnkgKiBuLnkgKiBhLCAtbi55KSwKICAgICAgICAgICAgICAgIG4pOwp9CgptYXQzIENyZWF0ZUJhc2lzKHZlYzMgbiwgdmVjMyB1cCkKewogICAgdmVjMyB0YW5nZW50ID0gbm9ybWFsaXplKGNyb3NzKG4sIHVwKSk7CiAgICB2ZWMzIGNvdGFuZ2VudCA9IGNyb3NzKHRhbmdlbnQsIG4pOwoKICAgIHJldHVybiB0cmFuc3Bvc2UobWF0Myh0YW5nZW50LCBjb3RhbmdlbnQsIG4pKTsKfQoKLy8gVGhlIG1pbmltdW0gYW1vdW50IG9mIGRhdGEgcmVxdWlyZWQgdG8gZGVmaW5lIGFuIGluZmluaXRlIHJheSBpbiAzRCBzcGFjZQpzdHJ1Y3QgUmF5QmFzaWMKewogICAgdmVjMyAgIG87ICAgICAgICAgICAgICAgICAgIC8vIE9yaWdpbiAKICAgIHZlYzMgICBkOyAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb24gIAp9OwoKLy8gVGhlICJmdWxsIGZhdCIgcmF5IG9iamVjdHMgdGhhdCBtb3N0IG1ldGhvZHMgd2lsbCByZWZlciB0bwpzdHJ1Y3QgUmF5CnsKICAgIFJheUJhc2ljIG9kOyAgICAgICAgICAgICAgICAKICAgIGZsb2F0ICAgIHROZWFyOyAgICAgICAgICAgICAKICAgIHZlYzMgICAgIHdlaWdodDsKICAgIHVpbnQgICAgIGZsYWdzOwogICAgLy9mbG9hdCAgICBsYW1iZGE7ICAgIAp9OwoKI2RlZmluZSBrRmxhZ3NCYWNrZmFjaW5nIDF1CiNkZWZpbmUga0ZsYWdzU3Vic3VyZmFjZSAydQojZGVmaW5lIGtGbGFnc0RpcmVjdFJheSAgNHUKCnN0cnVjdCBIaXRDdHgKewogICAgdmVjMyAgICAgbjsKICAgIGZsb2F0ICAgIGtpY2tvZmY7ICAgIAp9OwoKUmF5QmFzaWMgUmF5VG9PYmplY3RTcGFjZShpbiBSYXlCYXNpYyB3b3JsZCwgaW4gVHJhbnNmb3JtIHRyYW5zZm9ybSkgCnsKICAgIFJheUJhc2ljIG9iamVjdDsKICAgIG9iamVjdC5vID0gd29ybGQubyAtIHRyYW5zZm9ybS50cmFuczsKICAgIG9iamVjdC5kID0gd29ybGQuZCArIG9iamVjdC5vOwogICAgb2JqZWN0Lm8gPSB0cmFuc2Zvcm0ucm90ICogb2JqZWN0Lm87CiAgICBvYmplY3QuZCA9ICh0cmFuc2Zvcm0ucm90ICogb2JqZWN0LmQpIC0gb2JqZWN0Lm87CiAgICByZXR1cm4gb2JqZWN0Owp9Cgp2ZWM0IFNERlNpbXBsZXhGYWNlKGluIHZlYzMgcCwgaW4gdmVjMyB2WzRdLCBpbiB2ZWMzIG4pCnsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgZm9yKGludCBpID0gMDsgaSA8IDM7IGkrKykKICAgIHsKICAgICAgICB2ZWMzIGR2ID0gdlsoaSsxKSAlIDNdIC0gdltpXTsKICAgICAgICB2ZWMzIGVkZ2VOb3JtID0gbm9ybWFsaXplKGNyb3NzKGR2LCBuKSk7CiAgICAgICAgaWYoZG90KGVkZ2VOb3JtLCBwIC0gdltpXSkgPiAwLjApCiAgICAgICAgeyAgICAgICAgICAgIAogICAgICAgICAgICBmbG9hdCB0ID0gY2xhbXAoKGRvdChwLCBkdikgLSBkb3QodltpXSwgZHYpKSAvIGRvdChkdiwgZHYpLCAwLjAsIDEuMCk7CiAgICAgICAgICAgIHZlYzMgZ3JhZCA9IHAgLSAodltpXSArIHQgKiBkdik7CiAgICAgICAgICAgIHJldHVybiB2ZWM0KGxlbmd0aChncmFkKSwgZ3JhZCk7CiAgICAgICAgfQogICAgfQogICAgaWYoZG90KG4sIHAgLSB2WzBdKSA8IDAuMCkgeyBuID0gLW47IH0KICAgIHJldHVybiB2ZWM0KChkb3QocCwgbikgLSBkb3QodlswXSwgbikpLCBuKTsKfQoKYm9vbCBSYXlTaW1wbGV4U0RGKGlub3V0IFJheSByYXksIGlub3V0IHZlYzIgc2RmTmVhciwgb3V0IEhpdEN0eCBoaXQsIGluIFRyYW5zZm9ybSB0cmFuc2Zvcm0sIGluIGZsb2F0IGV4cGxvZGUsIGluIGludCBpbnRlcnZhbCwgaW4gZmxvYXQgcGhhc2UpCnsKICAgICNkZWZpbmUga1NERk1heFN0ZXBzICAgICAgICAgICAgIDUwCiAgICAjZGVmaW5lIGtTREZDdXRvZmZUaHJlc2hvbGQgICAgICAxZS00CiAgICAjZGVmaW5lIGtTREZFc2NhcGVUaHJlc2hvbGQgICAgICAyLjAKICAgICNkZWZpbmUga1NERlJheUluY3JlbWVudCAgICAgICAgIDAuOTUKICAgICNkZWZpbmUga1NERkZhaWxUaHJlc2hvbGQgICAgICAgIDAuMQogICAgCiAgICAjZGVmaW5lIGtOdW1JbnRlcnZhbHMgICAgICAgICAgICAxNgogICAgI2RlZmluZSBrQ2xvc2VkSW50ZXJ2YWwgICAgICAgICAgMTIKICAgIAogICAgUmF5QmFzaWMgbG9jYWxSYXkgPSBSYXlUb09iamVjdFNwYWNlKHJheS5vZCwgdHJhbnNmb3JtKTsKICAgIAogICAgZmxvYXQgbG9jYWxNYWcgPSBsZW5ndGgobG9jYWxSYXkuZCk7CiAgICBsb2NhbFJheS5kIC89IGxvY2FsTWFnOwogICAgCiAgICBmbG9hdCB0ID0gMC4wOyAgIAogICAgdmVjMyBwOwogICAgdmVjNCBGOwogICAgYm9vbCBpc1N1YnN1cmZhY2UsIGlzQm91bmRlZCA9IGZhbHNlOwoKICAgIGNvbnN0IHZlYzMgVls0XSA9IHZlYzNbXSh2ZWMzKDEsMSwxKSouNSwgdmVjMygtMSwtMSwxKSouNSwgdmVjMygxLC0xLC0xKSouNSwgdmVjMygtMSwxLC0xKSouNSk7CiAgICBjb25zdCBpbnQgSVsxNl0gPSBpbnRbXSggMCwgMiwgMSwgMCwgMSwgMywgMiwgMSwgMiwgMCwgMywgMiwgMywgMSwgMCwgMyk7CiAgICB2ZWMzIERbNF0sIE5bNF07ICAgICAKICAgICNkZWZpbmUga1NERlRoaWNrbmVzcyAwLjA1CiAgICAKICAgIGZsb2F0IGJldGEgPSBLaWNrRHJvcChwaGFzZSwgdmVjMigwLjAsIDAuMCksIHZlYzIoMC40LCAxLjIpLCB2ZWMyKDAuNSwgMS4wKSk7CiAgICBmbG9hdCBnYW1tYSA9IG1peCgxLjAsIDIuNSwgSW1wdWxzZShwaGFzZSwgMC40LCAwLjE1KSk7CiAgICAKICAgIGZvcihpbnQgaiA9IDA7IGogPCA0OyArK2opCiAgICB7CiAgICAgICAgaW50IGsgPSBqKjQ7CiAgICAgICAgdmVjMyBkID0gbWl4KFZbSVtrICsgaW50ZXJ2YWwlM11dLCBWW0lbayArIChpbnRlcnZhbCsxKSUzXV0sIGJldGEpICogZXhwbG9kZTsKICAgICAgICBpZihpbnRlcnZhbCA9PSAwKSB7IERbal0gPSBkICogYmV0YTsgfSAKICAgICAgICBlbHNlIGlmKGludGVydmFsIDwga0Nsb3NlZEludGVydmFsKSB7IERbal0gPSBkOyB9CiAgICAgICAgZWxzZSBpZihpbnRlcnZhbCA9PSBrQ2xvc2VkSW50ZXJ2YWwpIHsgRFtqXSA9IGQgKiAoMS4wIC0gYmV0YSk7IH0KICAgICAgICBlbHNlIHsgRFtqXSA9IGtaZXJvOyB9CiAgICAgICAgCiAgICAgICAgTltqXSA9IG5vcm1hbGl6ZShjcm9zcyhWW0lbaysxXV0gLSBWW0lba11dLCBWW0lbaysyXV0gLSBWW0lba11dKSk7CiAgICB9CiAgICAKICAgIGludCBzdGVwSWR4OwogICAgZm9yKHN0ZXBJZHggPSAwOyBzdGVwSWR4IDwga1NERk1heFN0ZXBzOyBzdGVwSWR4KyspCiAgICB7CiAgICAgICAgcCA9IGxvY2FsUmF5Lm8gKyBsb2NhbFJheS5kICogdDsKICAgICAgICAKICAgICAgICBGID0gdmVjNChrRmx0TWF4KTsKICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgNDsgaisrKQogICAgICAgIHsgICAgICAgICAgICAgIAogICAgICAgICAgICB2ZWM0IEZGYWNlID0gU0RGU2ltcGxleEZhY2UocCwgdmVjM1s0XShWW0lbaio0XV0gKyBEW2pdLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWW0lbaio0KzFdXSArIERbal0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZbSVtqKjQrMl1dICsgRFtqXSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVltJW2oqNCszXV0gKyBEW2pdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOW2pdKTsKCiAgICAgICAgICAgIEZGYWNlLnggPSBGRmFjZS54IC0ga1NERlRoaWNrbmVzcyAqIGdhbW1hOwogICAgICAgICAgICBpZihGRmFjZS54IDwgRi54KSAKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIEYgPSBGRmFjZTsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIAogICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24sIHNpbXBseSBkZXRlcm1pbmUgd2hldGhlciB3ZSdyZSBpbnNpZGUgdGhlIGlzb3N1cmZhY2Ugb3Igbm90CiAgICAgICAgaWYoc3RlcElkeCA9PSAwKSB7IGlzU3Vic3VyZmFjZSA9IEYueCA8IDAuMDsgfQogICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgdG8gc2VlIGlmIHdlJ3JlIGF0IHRoZSBzdXJmYWNlCiAgICAgICAgZWxzZSBpZihhYnMoRi54KSA8IGtTREZDdXRvZmZUaHJlc2hvbGQpIHsgYnJlYWs7IH0gICAgICAgIAogICAgICAgIAogICAgICAgIGlmKCFpc0JvdW5kZWQpIHsgaWYoRi54IDwga1NERkVzY2FwZVRocmVzaG9sZCkgeyBpc0JvdW5kZWQgPSB0cnVlOyB9IH0KICAgICAgICBlbHNlIGlmKEYueCA+IGtTREZFc2NhcGVUaHJlc2hvbGQpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAgICAgCiAgICAgICAgdCArPSAoaXNTdWJzdXJmYWNlID8gLUYueCA6IEYueCkgKiBrU0RGUmF5SW5jcmVtZW50OwogICAgICAgIAogICAgICAgIGlmKGFicyhGLnggLyBsb2NhbE1hZykgPCBzZGZOZWFyLngpCiAgICAgICAgICAgICAgICAgICAgc2RmTmVhciA9IHZlYzIoYWJzKEYueCAvIGxvY2FsTWFnKSwgdCAvIGxvY2FsTWFnKTsKICAgICAgICAKICAgICAgICBpZih0IC8gbG9jYWxNYWcgPiByYXkudE5lYXIpIHsgYnJlYWs7IH0KICAgICAgICAKICAgICAgICBwID0gbG9jYWxSYXkubyArIHQgKiBsb2NhbFJheS5kOwogICAgfSAgICAgICAgCiAgICAKICAgIHQgLz0gbG9jYWxNYWc7CiAgICBpZihGLnggPiBrU0RGRmFpbFRocmVzaG9sZCB8fCB0ID4gcmF5LnROZWFyKSB7IHJldHVybiBmYWxzZTsgfQogICAgCiAgICByYXkudE5lYXIgPSB0OwogICAgaGl0Lm4gPSB0cmFuc3Bvc2UodHJhbnNmb3JtLnJvdCkgKiBub3JtYWxpemUoRi55encpICogdHJhbnNmb3JtLnNjYTsKICAgIHJheS5mbGFncyA9IChyYXkuZmxhZ3MgJiB+a0ZsYWdzQmFja2ZhY2luZykgfCAoKGlzU3Vic3VyZmFjZSkgPyBrRmxhZ3NCYWNrZmFjaW5nIDogMHUpOwogICAgaGl0LmtpY2tvZmYgPSAxZS0yOwoKICAgIHJldHVybiB0cnVlOwp9CgpSYXkgQ3JlYXRlT3J0aG9ncmFwaGljQ2FtZXJhUmF5KHZlYzIgdXYsIHZlYzIgc2Vuc29yU2l6ZSwgdmVjMyBjYW1lcmFQb3MsIHZlYzMgY2FtZXJhTG9va0F0KQp7CiAgICB2ZWMzIHcgPSBub3JtYWxpemUoY2FtZXJhTG9va0F0IC0gY2FtZXJhUG9zKTsKICAgIG1hdDMgYmFzaXMgPSBDcmVhdGVCYXNpcyh3LCB2ZWMzKDAuMCwgMS4wLCAwLjApKTsgICAgCiAgICAKICAgIFJheSByYXk7CiAgICByYXkub2QubyA9IGNhbWVyYVBvcyArIHZlYzModXYgKiBzZW5zb3JTaXplLCAwLjApICogYmFzaXM7CiAgICByYXkub2QuZCA9IHc7CiAgICByYXkud2VpZ2h0ID0gdmVjMygxLjApOwogICAgcmV0dXJuIHJheTsKfQoKdmVjMyBSYXlQb2ludEF0KGluIFJheSByYXksIGZsb2F0IHQpCnsKICAgIHJldHVybiByYXkub2QubyArIHJheS5vZC5kICogdDsKfQoKLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAgICBGaWx0ZXJzCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCiNkZWZpbmUga0FwcGx5Qmxvb20gICAgICAgICAgICAgICB0cnVlCiNkZWZpbmUga0Jsb29tR2FpbiAgICAgICAgICAgICAgICAxLjUgICAgICAgICAgICAgLy8gVGhlIHN0cmVuZ3RoIG9mIHRoZSBibG9vbSBlZmZlY3QgCiNkZWZpbmUga0Jsb29tVGludCAgICAgICAgICAgICAgICB2ZWMzKDEuMCkgICAgICAgLy8gVGhlIHRpbnQgYXBwbGllZCB0byB0aGUgYmxvb20gZWZmZWN0CiNkZWZpbmUga0Jsb29tV2lkdGggICAgICAgICAgICAgICAoMC4xIC8gZmxvYXQoa1NjcmVlbkRvd25zYW1wbGUpKSAgICAgICAgICAgICAvLyBUaGUgd2lkdGggb2YgdGhlIGJsb29tIGVmZmVjdCBhcyBhIHByb3BvcnRpb24gb2YgdGhlIGJ1ZmZlciB3aWR0aAojZGVmaW5lIGtCbG9vbUhlaWdodCAgICAgICAgICAgICAgKDAuMSAvIGZsb2F0KGtTY3JlZW5Eb3duc2FtcGxlKSkgICAgICAgICAgICAgLy8gVGhlIGhlaWdodCBvZiB0aGUgYmxvb20gZWZmZWN0IGFzIGEgcHJvcG9ydGlvbiBvZiB0aGUgYnVmZmVyIGhlaWdodAojZGVmaW5lIGtCbG9vbVNoYXBlICAgICAgICAgICAgICAgMC41ICAgICAgICAgICAgIC8vIFRoZSBmYWxsLW9mZiBvZiB0aGUgYmxvb20gc2hhcGUuIEhpZ2hlciB2YWx1ZSA9IHN0ZWVwZXIgZmFsbC1vZmYKI2RlZmluZSBrQmxvb21Eb3duc2FtcGxlICAgICAgICAgIDIgICAgICAgICAgICAgICAvLyBIb3cgbXVjaCB0aGUgYmxvb20gYnVmZmVyIGlzIGRvd25zYW1wbGVkLiBIaWdoZXIgdmFsdWUgPSBsb3dlciBxdWFsaXR5LCBidXQgZmFzdGVyCiNkZWZpbmUga0RlYnVnQmxvb20gICAgICAgICAgICAgICBmYWxzZSAgICAgICAgICAgLy8gU2hvdyBvbmx5IHRoZSBibG9vbSBpbiB0aGUgZmluYWwgY29tcAojZGVmaW5lIGtCbG9vbUJ1cm5JbiAgICAgICAgICAgICAgdmVjMygwLjMpICAgICAKCi8vIFNlcGVyYWJsZSBibG9vbSBmdW5jdGlvbi4gVGhpcyBmaWx0ZXIgcmVxdWlyZXMgdHdvIHBhc3NlcyBpbiB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgZGlyZWN0aW9ucyB3aGljaCBhcmUgY29tYmluZWQgYXMgYSBwb3N0LXByb2Nlc3MKLy8gZWZmZWN0IGFmdGVyIGVhY2ggZnJhbWUuIFRoZSBhY2N1cmFjeS9jb3N0IG9mIHRoZSBlZmZlY3QgY2FuIGJlIHR1bmVkIGJ5IGRpYWxpbmcgdGhlIGtCbG9vbURvd25zYW1wbGUgcGFyYW1ldGVyLiAKdmVjMyBCbG9vbSh2ZWMyIGZyYWdDb29yZCwgdmVjMyBpUmVzb2x1dGlvbiwgaXZlYzIgZGVsdGEsIHNhbXBsZXIyRCByZW5kZXJTYW1wbGVyKQp7ICAgICAgICAKICAgIHZlYzIgc2NhbGVkUmVzb2x1dGlvbiA9IHZlYzIoaVJlc29sdXRpb24ueCwgaVJlc29sdXRpb24ueSkgLyBmbG9hdCgoZGVsdGEueCA9PSAxKSA/IGtCbG9vbURvd25zYW1wbGUgOiAxKTsKICAgCiAgICBpZihmcmFnQ29vcmQueCA+IHNjYWxlZFJlc29sdXRpb24ueCB8fCBmcmFnQ29vcmQueSA+IHNjYWxlZFJlc29sdXRpb24ueSkgeyByZXR1cm4ga1plcm87IH0KICAgIAogICAgZmxvYXQgYmxvb21TaXplID0gKGRlbHRhLnggPT0gMSkgPyBrQmxvb21XaWR0aCA6IGtCbG9vbUhlaWdodDsKICAgIAogICAgaW50IGtLZXJuZWxXaWR0aCA9IGludChibG9vbVNpemUgKiBtYXgoaVJlc29sdXRpb24ueCwgaVJlc29sdXRpb24ueSkgKyAwLjUpIC8gKChkZWx0YS54ID09IDEpID8ga0Jsb29tRG93bnNhbXBsZSA6IDEpOwogICAgdmVjMyBzdW1XZWlnaHRzID0gdmVjMygwLjApOwogICAgdmVjMyBzdW1SZ2IgPSB2ZWMzKDAuMCk7CiAgICBmb3IoaW50IGkgPSAta0tlcm5lbFdpZHRoOyBpIDw9IGtLZXJuZWxXaWR0aDsgaSsrKQogICAgeyAgICAgIAogICAgICAgIHZlYzIgeHkgPSB2ZWMyKGZyYWdDb29yZC54ICsgZmxvYXQoaSAqIGRlbHRhLngpLCBmcmFnQ29vcmQueSArIGZsb2F0KGkgKiBkZWx0YS55KSk7CiAgICAgICAgCiAgICAgICAgaWYoZGVsdGEueCA9PSAxKSB7IHh5ICo9IGZsb2F0KGtCbG9vbURvd25zYW1wbGUpOyB9CiAgICAgICAgZWxzZSB7IHh5IC89IGZsb2F0KGtCbG9vbURvd25zYW1wbGUpOyB9CiAgICAgICAgCiAgICAgICAgaWYoeHkueCA8IDAuMCB8fCB4eS54ID4gaVJlc29sdXRpb24ueCB8fCB4eS55IDwgMC4wIHx8IHh5LnkgPiBpUmVzb2x1dGlvbi55KSB7IGNvbnRpbnVlOyB9CiAgICAgICAgICAgIAogICAgICAgIHZlYzQgdGV4ZWwgPSB0ZXh0dXJlKHJlbmRlclNhbXBsZXIsIHh5IC8gaVJlc29sdXRpb24ueHkpOwogICAgICAgIHZlYzMgcmdiID0gbWF4KHRleGVsLnh5eiAvIG1heCgxLjAsIHRleGVsLncpLCB2ZWMzKDAuMCkpOyAgICAgICAgICAgIAogICAgICAgIGZsb2F0IGQgPSBmbG9hdChhYnMoaSkpIC8gZmxvYXQoa0tlcm5lbFdpZHRoKTsKICAgICAgICAgICAKICAgICAgICB2ZWMzIHdlaWdodCA9IGtPbmU7CiAgICAgICAgaWYoaSAhPSAwKQogICAgICAgIHsKICAgICAgICAgICAgLy8gQ3VycmVudGx5IHVzaW5nIGEgc2luZ2xlIHdlaWdodCBhbHRob3VnaCB0aGlzIGVmZmVjdCBjYW4gYmUgZG9uZSBwZXItY2hhbm5lbAogICAgICAgICAgICBmbG9hdCBrZXJuZWwgPSBwb3cobWF4KDAuMCwgKGV4cCgtc3FyKGQgKiA0LjApKSAtIDAuMDE4MzE1NikgLyAwLjk4MTY4NCksIGtCbG9vbVNoYXBlKTsgICAgICAgICAgICAKICAgICAgICAgICAgd2VpZ2h0ID0ga09uZSAqIGtlcm5lbDsKICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIHN1bVJnYiArPSAoKGRlbHRhLnkgPT0gMSkgPyByZ2IgOiBtYXgoa1plcm8sIHJnYiAtIGtCbG9vbUJ1cm5JbikpICogd2VpZ2h0OyAgICAgICAgIAogICAgICAgIHN1bVdlaWdodHMgKz0gd2VpZ2h0OwogICAgfQogICAgCiAgICBzdW1SZ2IgPSBzdW1SZ2IgLyBzdW1XZWlnaHRzOwogICAgCiAgICByZXR1cm4gKGRlbHRhLnggPT0gMSkgPyBzdW1SZ2IgOiAoc3VtUmdiICoga0Jsb29tVGludCk7Cn0",
					"AQAAAAAAAAABAAAAAAAAAAAAAACKZgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/3d/SDF.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/2d/SDF.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Windows"
			}
		},
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/core/LinearRegression.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/2d/QuadraticBezier.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/3d/QuadraticBezier.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/core/Colour.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/2d/PostProcessing.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"contents": "",
			"file": "examples/shadertoy/readme.txt",
			"file_size": 0,
			"file_write_time": 132902011022081218,
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/core/Hash.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/core/Random.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"contents": "// *******************************************************************************************************\n//    Filters\n// *******************************************************************************************************\n\n#define kApplyBloom               true\n#define kBloomGain                1.4             // The strength of the bloom effect \n#define kBloomTint                vec3(1.0)       // The tint applied to the bloom effect\n#define kBloomWidth               (0.2 / float(kScreenDownsample))             // The width of the bloom effect as a proportion of the buffer width\n#define kBloomHeight              (0.05 / float(kScreenDownsample))             // The height of the bloom effect as a proportion of the buffer height\n#define kBloomShape               2.0             // The fall-off of the bloom shape. Higher value = steeper fall-off\n#define kBloomDownsample          1               // How much the bloom buffer is downsampled. Higher value = lower quality, but faster\n#define kDebugBloom               false           // Show only the bloom in the final comp\n#define kBloomBurnIn              vec3(0.6)     \n\n// Seperable bloom function. This filter requires two passes in the horizontal and vertical directions which are combined as a post-process\n// effect after each frame. The accuracy/cost of the effect can be tuned by dialing the kBloomDownsample parameter. \nvec3 Bloom(vec2 xyImage, vec3 resoltuion, ivec2 delta, sampler2D renderSampler)\n{        \n    vec2 scaledResolution = vec2(iResolution.x, iResolution.y) / float((delta.x == 1) ? kBloomDownsample : 1);\n   \n    if(fragCoord.x > scaledResolution.x || fragCoord.y > scaledResolution.y) { return kZero; }\n    \n    float bloomSize = (delta.x == 1) ? kBloomWidth : kBloomHeight;\n    \n    int kKernelWidth = int(bloomSize * max(iResolution.x, iResolution.y) + 0.5) / ((delta.x == 1) ? kBloomDownsample : 1);\n    vec3 sumWeights = vec3(0.0);\n    vec3 sumRgb = vec3(0.0);\n    for(int i = -kKernelWidth; i <= kKernelWidth; i++)\n    {      \n        vec2 xy = vec2(fragCoord.x + float(i * delta.x), fragCoord.y + float(i * delta.y));\n        \n        if(delta.x == 1) { xy *= float(kBloomDownsample); }\n        else { xy /= float(kBloomDownsample); }\n        \n        if(xy.x < 0.0 || xy.x > iResolution.x || xy.y < 0.0 || xy.y > iResolution.y) { continue; }\n            \n        vec4 texel = texture(renderSampler, xy / iResolution.xy);\n        vec3 rgb = max(texel.xyz / max(1.0, texel.w), vec3(0.0));            \n        float d = float(abs(i)) / float(kKernelWidth);\n           \n        vec3 weight = kOne;\n        if(i != 0)\n        {\n            // Currently using a single weight although this effect can be done per-channel\n            float kernel = pow(max(0.0, (exp(-sqr(d * 4.0)) - 0.0183156) / 0.981684), kBloomShape);            \n            weight = kOne * kernel;\n        }\n            \n        sumRgb += ((delta.y == 1) ? rgb : max(kZero, rgb - kBloomBurnIn)) * weight;         \n        sumWeights += weight;\n    }\n    \n    sumRgb = sumRgb / sumWeights;\n    \n    return (delta.x == 1) ? sumRgb : (sumRgb * kBloomTint);\n}",
			"file": "src/2d/Filter.glsl",
			"file_size": 0,
			"file_write_time": 132902019595938978,
			"settings":
			{
				"buffer_size": 3120,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAMwwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					14,
					1,
					"insert",
					{
						"characters": "uimqt3"
					},
					"BwAAAIQFAAAAAAAAhQUAAAAAAAAAAAAAhQUAAAAAAACFBQAAAAAAAAkAAABmcmFnQ29vcmSFBQAAAAAAAIYFAAAAAAAAAAAAAIYFAAAAAAAAhwUAAAAAAAAAAAAAhwUAAAAAAACIBQAAAAAAAAAAAACIBQAAAAAAAIkFAAAAAAAAAAAAAIkFAAAAAAAAigUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAUAAAAAAACNBQAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					6,
					"left_delete",
					null,
					"BgAAAIkFAAAAAAAAiQUAAAAAAAABAAAAM4gFAAAAAAAAiAUAAAAAAAABAAAAdIcFAAAAAAAAhwUAAAAAAAABAAAAcYYFAAAAAAAAhgUAAAAAAAABAAAAbYUFAAAAAAAAhQUAAAAAAAABAAAAaYQFAAAAAAAAhAUAAAAAAAABAAAAdQ",
					"AQAAAAAAAAABAAAAigUAAAAAAACKBQAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "iamgeX"
					},
					"BgAAAIQFAAAAAAAAhQUAAAAAAAAAAAAAhQUAAAAAAACGBQAAAAAAAAAAAACGBQAAAAAAAIcFAAAAAAAAAAAAAIcFAAAAAAAAiAUAAAAAAAAAAAAAiAUAAAAAAACJBQAAAAAAAAAAAACJBQAAAAAAAIoFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAUAAAAAAACEBQAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"delete_word",
					{
						"forward": false
					},
					"AQAAAIQFAAAAAAAAhAUAAAAAAAAGAAAAaWFtZ2VY",
					"AQAAAAAAAAABAAAAigUAAAAAAACEBQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "imageXy"
					},
					"BwAAAIQFAAAAAAAAhQUAAAAAAAAAAAAAhQUAAAAAAACGBQAAAAAAAAAAAACGBQAAAAAAAIcFAAAAAAAAAAAAAIcFAAAAAAAAiAUAAAAAAAAAAAAAiAUAAAAAAACJBQAAAAAAAAAAAACJBQAAAAAAAIoFAAAAAAAAAAAAAIoFAAAAAAAAiwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAUAAAAAAACEBQAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					2,
					"left_delete",
					null,
					"AgAAAIoFAAAAAAAAigUAAAAAAAABAAAAeYkFAAAAAAAAiQUAAAAAAAABAAAAWA",
					"AQAAAAAAAAABAAAAiwUAAAAAAACLBQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"delete_word",
					{
						"forward": false
					},
					"AQAAAIQFAAAAAAAAhAUAAAAAAAAFAAAAaW1hZ2U",
					"AQAAAAAAAAABAAAAiQUAAAAAAACEBQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "xyImage"
					},
					"BwAAAIQFAAAAAAAAhQUAAAAAAAAAAAAAhQUAAAAAAACGBQAAAAAAAAAAAACGBQAAAAAAAIcFAAAAAAAAAAAAAIcFAAAAAAAAiAUAAAAAAAAAAAAAiAUAAAAAAACJBQAAAAAAAAAAAACJBQAAAAAAAIoFAAAAAAAAAAAAAIoFAAAAAAAAiwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAUAAAAAAACEBQAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"left_delete",
					null,
					"AQAAAJIFAAAAAAAAkgUAAAAAAAALAAAAaVJlc29sdXRpb24",
					"AQAAAAAAAAABAAAAkgUAAAAAAACdBQAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": "xyResol"
					},
					"BwAAAJIFAAAAAAAAkwUAAAAAAAAAAAAAkwUAAAAAAACUBQAAAAAAAAAAAACUBQAAAAAAAJUFAAAAAAAAAAAAAJUFAAAAAAAAlgUAAAAAAAAAAAAAlgUAAAAAAACXBQAAAAAAAAAAAACXBQAAAAAAAJgFAAAAAAAAAAAAAJgFAAAAAAAAmQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkgUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "ution"
					},
					"BQAAAJkFAAAAAAAAmgUAAAAAAAAAAAAAmgUAAAAAAACbBQAAAAAAAAAAAACbBQAAAAAAAJwFAAAAAAAAAAAAAJwFAAAAAAAAnQUAAAAAAAAAAAAAnQUAAAAAAACeBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQUAAAAAAACZBQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"left_delete",
					null,
					"AQAAAJIFAAAAAAAAkgUAAAAAAAAMAAAAeHlSZXNvbHV0aW9u",
					"AQAAAAAAAAABAAAAngUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAJIFAAAAAAAAkwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkgUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "Re"
					},
					"AgAAAJQFAAAAAAAAlQUAAAAAAAAAAAAAlQUAAAAAAACWBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlAUAAAAAAACUBQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					4,
					"left_delete",
					null,
					"BAAAAJUFAAAAAAAAlQUAAAAAAAABAAAAZZQFAAAAAAAAlAUAAAAAAAABAAAAUpMFAAAAAAAAkwUAAAAAAAABAAAALJIFAAAAAAAAkgUAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAAlgUAAAAAAACWBQAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "resoltuion,"
					},
					"CwAAAJIFAAAAAAAAkwUAAAAAAAAAAAAAkwUAAAAAAACUBQAAAAAAAAAAAACUBQAAAAAAAJUFAAAAAAAAAAAAAJUFAAAAAAAAlgUAAAAAAAAAAAAAlgUAAAAAAACXBQAAAAAAAAAAAACXBQAAAAAAAJgFAAAAAAAAAAAAAJgFAAAAAAAAmQUAAAAAAAAAAAAAmQUAAAAAAACaBQAAAAAAAAAAAACaBQAAAAAAAJsFAAAAAAAAAAAAAJsFAAAAAAAAnAUAAAAAAAAAAAAAnAUAAAAAAACdBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkgUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"left_delete",
					null,
					"AQAAAJIFAAAAAAAAkgUAAAAAAAAKAAAAcmVzb2x0dWlvbg",
					"AQAAAAAAAAABAAAAnAUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "resoltuion"
					},
					"CgAAAJIFAAAAAAAAkwUAAAAAAAAAAAAAkwUAAAAAAACUBQAAAAAAAAAAAACUBQAAAAAAAJUFAAAAAAAAAAAAAJUFAAAAAAAAlgUAAAAAAAAAAAAAlgUAAAAAAACXBQAAAAAAAAAAAACXBQAAAAAAAJgFAAAAAAAAAAAAAJgFAAAAAAAAmQUAAAAAAAAAAAAAmQUAAAAAAACaBQAAAAAAAAAAAACaBQAAAAAAAJsFAAAAAAAAAAAAAJsFAAAAAAAAnAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkgUAAAAAAACSBQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/core/Wavelets.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		},
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Windows"
			}
		},
		{
			"file": "src/3d/Emitter.glsl",
			"settings":
			{
				"buffer_size": 0,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			}
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"package",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/C/projects/glslfx",
		"/C/projects/glslfx/examples",
		"/C/projects/glslfx/examples/shadertoy",
		"/C/projects/glslfx/examples/shadertoy/simplex",
		"/C/projects/glslfx/src",
		"/C/projects/glslfx/src/2d",
		"/C/projects/glslfx/src/3d",
		"/C/projects/glslfx/src/core",
		"/C/projects/glslfx/src/tools"
	],
	"file_history":
	[
		"/C/Users/ben.spencer/Downloads/Microsoft.ML.OnnxRuntime.Gpu.1.10.0/build/native/include/onnxruntime_c_api.h",
		"/C/projects/probegen/data/onnx/test.onnx",
		"/C/Users/ben.spencer/Downloads/VSIXTorch.vsix",
		"/C/projects/Pix2PixTerrain/Python/Models/Grid2Grid/Dataset.py",
		"/C/projects/glslfx/src/3d/SphericalHarmonics.glsl",
		"/C/projects/glslfx/src/core/Filters.glsl",
		"/C/projects/glslfx/src/3d/KIFS.glsl",
		"/C/projects/glslfx/src/3d/Camera.glsl",
		"/C/projects/glslfx/src/3d/Primatives.glsl",
		"/C/projects/glslfx/src/core/Transforms.glsl",
		"/C/projects/glslfx/src/core/Quarternions.glsl",
		"/C/projects/glslfx/src/core/Splines.glsl",
		"/C/projects/glslfx/src/core/Math.glsl",
		"/C/Users/ben.spencer/Videos/Captures/ffmpeg transcode.txt",
		"/C/Users/ben.spencer/Desktop/MyData/Playlist1.json",
		"/C/Users/ben.spencer/Desktop/MyData/StreamingHistory0.json",
		"/C/Users/ben.spencer/Desktop/MyData/SearchQueries.json",
		"/D/Steam/steamapps/common/Halo Infinite/NOTICE.txt",
		"/C/projects/probegen-scenes/grid2grid/cornellstatic/data/scene-000000.direct.0446563185.usda",
		"/C/Users/ben.spencer/Desktop/remarkable/test.svg",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.indirect.1416168154000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.0789172247000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene-000019-8.indirect.1347281681000207.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.0481962437000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.0217680512000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.1556433466000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.0775691504000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.indirect.2040565540000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.direct.0875534463000000.json",
		"/C/projects/probegen-scenes/lightprobedenoiser/mono/data/scene--00001-0.indirect.0908147705000000.json",
		"/C/projects/probegen/data/usd/cornell000000.direct.0543624672.000000.json",
		"/C/scratch/FB1242829/test.html",
		"/C/projects/pt/.gitignore",
		"/C/projects/pt/scenes/environmentprobe.json",
		"/C/projects/pt/scenes/cornell.json",
		"/C/projects/pt/scenes/config.json",
		"/C/projects/scratch/main2.cpp",
		"/C/Users/ben.spencer/Pictures/heart.svg",
		"/C/projects/scratch/common.glsl",
		"/C/projects/scratch/buffer A.glsl",
		"/C/projects/scratch/main.cpp",
		"/C/projects/shadertoy/automata/bufferA.glsl",
		"/C/projects/shadertoy/automata/bufferB.glsl",
		"/C/projects/shadertoy/automata/bufferC.glsl",
		"/C/projects/shadertoy/automata/image.glsl",
		"/C/projects/scratch/buffer B.glsl",
		"/C/projects/scratch/buffer C.glsl",
		"/C/projects/pt/scenes/codec/block.h",
		"/C/projects/unity/commits.txt",
		"/C/projects/scratch/data/hadamard.txt",
		"/C/projects/scratch/data/hadamard.svg",
		"/C/projects/scratch/math.h",
		"/C/projects/scratch/image.glsl",
		"/C/scratch/shadertoy/shaders.json",
		"/C/projects/pt/scenes/codec/block2.h",
		"/C/projects/pt/src/generic/AdaptiveBinaryCoder.h",
		"/C/projects/scratch/dump.txt",
		"/C/projects/pt/scenes/codec/histogram.dat",
		"/C/projects/pt/src/generic/ArithmeticCoder.h",
		"/C/projects/pt/scenes/codec/encoder.dat",
		"/C/projects/scratch/ArithmeticCoder.h",
		"/C/projects/pt/src/generic/ShadertoyArithmeticCoder.h",
		"/C/projects/pt/src/generic/ArithmeticCoderUtils.h",
		"/C/projects/scratch/data/rca.csv",
		"/C/projects/pt/src/math/Math.h",
		"/C/Users/ben.spencer/Documents/Mongoose/weather.htm",
		"/C/Users/ben.spencer/Downloads/Lighting Team RCA Map - Scratchpad.csv",
		"/C/projects/pt/src/main.cpp",
		"/C/projects/pt/src/math/BBox3.h",
		"/C/projects/pt/src/math/Vector.h",
		"/C/projects/pt/src/generic/ColourUtils.h",
		"/C/projects/pt/src/generic/thirdparty/sobol/Sobol.h",
		"/C/projects/pt/src/generic/FNVHash.h",
		"/C/projects/pt/CMakeLists.txt",
		"/C/projects/pt/build/output.vcxproj",
		"/C/projects/openexr/OpenEXR/CMakeLists.txt",
		"/C/projects/openexr/CMakeLists.txt",
		"/C/projects/pt/src/generic/FilesystemUtils.cpp",
		"/C/projects/pt/src/generic/FilesystemUtils.h",
		"/C/projects/pt/src/renderer/AssetContainer.h",
		"/C/projects/pt/src/renderer/AssetFactory.h",
		"/C/projects/pt/src/renderer/BVHBuilder.cpp",
		"/C/projects/pt/src/renderer/BxDF.cpp",
		"/C/projects/pt/src/renderer/BxDF.h",
		"/C/projects/pt/src/renderer/TextureShader.h",
		"/C/projects/pt/src/renderer/Emitter.cpp",
		"/C/projects/pt/src/renderer/TextureShader.cpp",
		"/C/projects/pt/src/renderer/EnvironmentLight.cpp",
		"/C/projects/unity/Editor/Src/GI/Progressive/ScratchpadMemoryPool.h",
		"/C/projects/pt/src/renderer/Emitter.h",
		"/C/projects/scratch/ScratchpadMemoryPool.h",
		"/C/projects/pt/src/generic/TinySVG.h",
		"/C/projects/pt/src/math/EnvironmentPDF2.h",
		"/C/projects/pt/src/math/PDF2.h",
		"/C/projects/pt/src/generic/StdHeaders.h",
		"/C/projects/pt/src/generic/Interpolate.h",
		"/C/projects/pt/src/image/ImageFactory.h",
		"/C/projects/pt/src/renderer/EnvironmentLight.h",
		"/C/projects/pt/src/renderer/Mesh.cpp",
		"/C/projects/pt/src/renderer/PathTracer.cpp",
		"/C/projects/pt/src/renderer/PathTracer.h",
		"/C/projects/pt/src/math/SphericalHarmonics.h",
		"/C/projects/pt/src/math/SphericalHarmonics.cpp",
		"/C/projects/gittest/FileA.txt",
		"/C/projects/gittest/FileB.txt",
		"/C/projects/pt/src/renderer/Ray.h",
		"/C/projects/pt/src/renderer/Renderer.cpp",
		"/C/projects/pt/src/renderer/Tracable.cpp",
		"/C/projects/pt/src/renderer/Camera.cpp",
		"/C/projects/pt/src/renderer/Camera.h",
		"/C/projects/pt/src/generic/thirdparty/base64/Base64.cpp",
		"/C/projects/pt/src/generic/JsonUtils.cpp",
		"/C/projects/pt/src/image/ImageContainer.cpp",
		"/C/projects/pt/src/image/ImageContainer.h",
		"/C/projects/unity/gi-docs/view.cmd",
		"/C/projects/pt/src/image/ImageIO.h",
		"/C/projects/pt/src/generic/JsonUtils.h",
		"/C/projects/unity/Editor/Src/GI/Progressive/PVRLightmapBakeHeavyData.cpp",
		"/C/projects/toy_path_tracer/src/generic/FloatPairMuxer.h",
		"/C/projects/pt/scenes/ffmpeg.txt",
		"/C/projects/pt/src/renderer/Renderer.h",
		"/C/projects/pt/src/image/DecomposedImageFilePath.h",
		"/C/projects/pt/src/image/DecomposedImageFilePath.cpp",
		"/C/projects/pt/src/renderer/Scene.cpp",
		"/C/projects/pt/src/generic/Assert.h",
		"/C/projects/pt/src/renderer/Tracable.h",
		"/C/projects/pt/src/renderer/VolumeSampleCache.cpp",
		"/C/projects/pt/src/image/Image.h"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 104.0,
		"where_history":
		[
			"C:\\projects\\pt\\src",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"Load",
			"sphere",
			"true",
			"sphere/2",
			"sphere/1",
			"sphere/12",
			"light_sphere/1",
			"light_sphere",
			"light_sphere/2",
			"light_sphere/2 ",
			"light_sphere/2",
			"light_sphere",
			"ccssc",
			"abcX, abcY, ",
			"Arc(",
			"test(",
			" <<",
			"<< ",
			"<<",
			"inverse",
			"min",
			"bvhDepth",
			"maxDepth",
			"flagBit",
			"flagIdx",
			"bvhFlags",
			"flags",
			"kNumBVHLeaves",
			"kNumPaths",
			"quadPolyList",
			"bb",
			"abc",
			"QuadraticCurve",
			"CubicBezier",
			"QuadraticCurve",
			"489",
			".i00",
			".i20",
			".i10",
			".i02",
			".i01",
			".i22",
			".i21",
			".i12",
			".i11",
			"true",
			"noisy",
			"gridDirect",
			"gridDirectID",
			"filtered",
			"gridAdaptive",
			"grid_filtered_direct",
			"grid_filtered_direct_half",
			"inputGridHalfID",
			"outputGridHalfID",
			"noisy",
			"direct",
			"h ",
			"kMove",
			"y2",
			"std::make_pair<",
			"bb0",
			"min",
			"kFltMax",
			"std::vector<std::vector<Vector2f>>",
			"OL",
			"'\\0",
			"(const char* buffer",
			"coords",
			"idx",
			"ParseBezier",
			"grad1",
			"grad0",
			"quad",
			"eigen",
			"quadParams",
			"b",
			"b.",
			"b0",
			"tinyxml2",
			"long",
			"double",
			"cubicBezierKnots",
			"bezIdx",
			"bezierPoints",
			"v",
			"v0",
			"p2",
			"d2Tangent",
			"Vector2f ",
			"length(",
			"dot(",
			"magnitude",
			"magntiude",
			"segIdx",
			"quadParams",
			"absoluteMode",
			"extent",
			"max(",
			"parseSpline",
			"vec2",
			"intRng",
			"buffer",
			".y",
			".x",
			".0",
			".5",
			"5,",
			"0,",
			"            ",
			"                ",
			"               ",
			"              ",
			"             ",
			"            ",
			"           ",
			"          ",
			"         ",
			"        ",
			"            ",
			"                ",
			"               ",
			"              ",
			"             ",
			"            ",
			" \n",
			",  ",
			" , "
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			"SHRGB<3>",
			"-100",
			"-1",
			"0",
			"",
			"PT_ASSERT",
			"math::min",
			"math::max",
			"PT_ASSERT"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/2d/ImageCodec.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "src/core/SphericalHarmonics.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "examples/shadertoy/simplex/BufferA.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 13199,
						"regions":
						{
						},
						"selection":
						[
							[
								13199,
								13199
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 7.0,
						"translation.y": 4383.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "examples/shadertoy/simplex/Common.glsl",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 28047,
						"regions":
						{
						},
						"selection":
						[
							[
								24815,
								24815
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 9955.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "src/3d/SDF.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/2d/SDF.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"default_dir": "C:\\projects\\glslfx\\src\\tools",
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"default_dir": "C:\\projects\\glslfx\\src\\core",
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "src/core/LinearRegression.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "src/2d/QuadraticBezier.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "src/3d/QuadraticBezier.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "src/core/Colour.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "src/2d/PostProcessing.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "examples/shadertoy/readme.txt",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "src/core/Hash.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "src/core/Random.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "src/2d/Filter.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3120,
						"regions":
						{
						},
						"selection":
						[
							[
								1748,
								1748
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "src/core/Wavelets.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "src/3d/Emitter.glsl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/C++/C++.sublime-syntax"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 40.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "glslfx.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"main",
				"splineparse\\main.cpp"
			],
			[
				"mono",
				"probegen-scenes\\lightprobedenoiser\\mono\\mono.json"
			],
			[
				"corne",
				"probegen-scenes\\misc\\cornell.json"
			],
			[
				"main2",
				"C:\\projects\\scratch\\main2.cpp"
			],
			[
				"math",
				"C:\\projects\\pt\\src\\math\\Vector.h"
			],
			[
				"arith",
				"ArithmeticCoder.h"
			],
			[
				"ar",
				"ArithmeticCoder.h"
			],
			[
				"shad",
				"C:\\projects\\pt\\src\\generic\\ShadertoyArithmeticCoder.h"
			],
			[
				"",
				"math.h"
			],
			[
				"base",
				"src\\generic\\thirdparty\\base64\\Base64.cpp"
			],
			[
				"cmake",
				"CMakeLists.txt"
			],
			[
				"spher",
				"src\\math\\SphericalHarmonics.h"
			],
			[
				"render",
				"src\\renderer\\Renderer.cpp"
			],
			[
				"camera",
				"src\\renderer\\Camera.cpp"
			],
			[
				"col",
				"src\\generic\\ColourUtils.h"
			],
			[
				"camer",
				"src\\renderer\\Camera.h"
			],
			[
				"camea",
				"src\\renderer\\Camera.h"
			],
			[
				"scene",
				"src\\renderer\\Scene.cpp"
			],
			[
				"ren",
				"src\\renderer\\Renderer.cpp"
			],
			[
				"path",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"vec",
				"src\\math\\Vector.h"
			],
			[
				"colo",
				"src\\generic\\ColourUtils.h"
			],
			[
				"vector",
				"src\\math\\Vector.h"
			],
			[
				"stat",
				"src\\math\\Statistic.h"
			],
			[
				"mathf",
				"src\\generic\\thirdparty\\eigen\\src\\Core\\MathFunctionsImpl.h"
			],
			[
				"tbb",
				"src\\generic\\Tbb.h"
			],
			[
				"std",
				"src\\generic\\StdHeaders.h"
			],
			[
				"patht",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"envir",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"container",
				"src\\renderer\\AssetContainer.h"
			],
			[
				"bxdf",
				"src\\renderer\\BxDF.h"
			],
			[
				"emitter",
				"src\\renderer\\Emitter.h"
			],
			[
				"bxd",
				"src\\renderer\\BxDF.h"
			],
			[
				"rendere",
				"src\\renderer\\Renderer.cpp"
			],
			[
				"tex",
				"src\\renderer\\TextureShader.cpp"
			],
			[
				"image",
				"src\\image\\ImageIO.cpp"
			],
			[
				"trac",
				"src\\renderer\\Tracable.h"
			],
			[
				"assetco",
				"src\\renderer\\AssetContainer.h"
			],
			[
				"samp",
				"src\\renderer\\Sampler.h"
			],
			[
				"enviro",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"env",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"mai",
				"src\\main.cpp"
			],
			[
				"fnvha",
				"src\\generic\\FNVHash.h"
			],
			[
				"sobol",
				"src\\generic\\thirdparty\\sobol\\Sobol.h"
			],
			[
				"tiny",
				"src\\generic\\TinySVG.h"
			],
			[
				"imageio",
				"src\\image\\ImageIO.cpp"
			],
			[
				"pathtr",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"mat",
				"src\\math\\Math.h"
			],
			[
				"envi",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"emitt",
				"src\\renderer\\Emitter.h"
			],
			[
				"en",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"cdf2",
				"src\\math\\PDF2.h"
			],
			[
				"pdf2",
				"src\\math\\PDF2.h"
			],
			[
				"sam",
				"src\\renderer\\Sampler.h"
			],
			[
				"inter",
				"src\\generic\\Interpolate.h"
			],
			[
				"pdf",
				"src\\math\\PDF2.h"
			],
			[
				"imagefac",
				"src\\image\\ImageFactory.h"
			],
			[
				"image.h",
				"src\\image\\Image.h"
			],
			[
				"cdf",
				"src\\math\\CDF2.h"
			],
			[
				"sampler",
				"src\\renderer\\Sampler.h"
			],
			[
				"bx",
				"src\\renderer\\BxDF.h"
			],
			[
				"tra",
				"src\\renderer\\Tracable.h"
			],
			[
				"renderer",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"pat",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"emi",
				"src\\renderer\\Emitter.h"
			],
			[
				"ray",
				"src\\renderer\\Ray.h"
			],
			[
				"sa",
				"src\\renderer\\Sampler.h"
			],
			[
				"sampe",
				"src\\renderer\\Sampler.h"
			],
			[
				"stdh",
				"src\\generic\\StdHeaders.h"
			],
			[
				"sinys",
				"src\\generic\\TinySVG.h"
			],
			[
				"tinys",
				"src\\generic\\TinySVG.h"
			],
			[
				"vect",
				"src\\math\\Vector.h"
			],
			[
				"mesh",
				"src\\renderer\\Mesh.cpp"
			],
			[
				"asset",
				"src\\renderer\\AssetFactory.h"
			],
			[
				"abs",
				"src\\image\\AbstractImage.h"
			],
			[
				"imagecon",
				"src\\image\\ImageContainer.h"
			],
			[
				"imagecont",
				"src\\image\\ImageContainer.h"
			],
			[
				"ImageIO",
				"src\\image\\ImageIO.cpp"
			],
			[
				"asse",
				"src\\renderer\\AssetFactory.h"
			],
			[
				"em",
				"src\\renderer\\Emitter.cpp"
			],
			[
				"ray.h",
				"src\\renderer\\Ray.h"
			],
			[
				"pathr",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"envc",
				"src\\renderer\\EnvironmentLight.cpp"
			],
			[
				"ra",
				"src\\renderer\\Ray.h"
			],
			[
				"pathtra",
				"src\\renderer\\PathTracer.cpp"
			],
			[
				"emit",
				"src\\renderer\\Emitter.cpp"
			],
			[
				"cmakel",
				"CMakeLists.txt"
			],
			[
				"image ",
				"src\\image\\Image.h"
			],
			[
				"traca",
				"src\\renderer\\Tracable.h"
			],
			[
				"rend",
				"src\\renderer\\Renderer.cpp"
			],
			[
				"assert",
				"src\\renderer\\AssetFactory.h"
			],
			[
				"file",
				"src\\generic\\FilesystemUtils.cpp"
			],
			[
				"re",
				"src\\renderer\\Renderer.cpp"
			],
			[
				"abst",
				"src\\image\\AbstractImage.cpp"
			],
			[
				"dec",
				"src\\image\\DecomposedImageFilePath.cpp"
			],
			[
				"filesys",
				"src\\generic\\FilesystemUtils.cpp"
			],
			[
				"cmakeli",
				"CMakeLists.txt"
			],
			[
				"string",
				"src\\generic\\StringUtils.h"
			],
			[
				"abstra",
				"src\\image\\AbstractImage.h"
			],
			[
				"imagefiel",
				"src\\image\\ImageFilePathManager.h"
			],
			[
				"scene.cpp",
				"src\\renderer\\Scene.cpp"
			],
			[
				"abstr",
				"src\\image\\AbstractImage.h"
			],
			[
				"coloru",
				"src\\generic\\ColourUtils.h"
			],
			[
				"basis",
				"src\\math\\Basis.h"
			],
			[
				"iamgeio",
				"src\\image\\ImageIO.cpp"
			],
			[
				"iamge.h",
				"src\\image\\Image.h"
			],
			[
				"stdhead",
				"src\\generic\\StdHeaders.h"
			],
			[
				"math.h",
				"src\\math\\Math.h"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 394.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
